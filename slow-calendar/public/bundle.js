(()=>{"use strict";function e(e,n,...s){if(!e)throw new TypeError(t(n,s))}function t(e,t){let s=0;return e.replace(/%[os]/gu,(()=>n(t[s++])))}function n(e){return"object"!=typeof e||null===e?String(e):Object.prototype.toString.call(e)}const s="undefined"!=typeof window?window:"undefined"!=typeof self?self:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:void 0;let i;class o{constructor(e,t){this.code=e,this.message=t}warn(...e){var t;try{i;const n=(null!==(t=(new Error).stack)&&void 0!==t?t:"").replace(/^(?:.+?\n){2}/gu,"\n");console.warn(this.message,...e,n)}catch(e){}}}const a=new o("W01","Unable to initialize event under dispatching."),r=new o("W02","Assigning any falsy value to 'cancelBubble' property has no effect."),l=new o("W03","Assigning any truthy value to 'returnValue' property has no effect."),c=new o("W04","Unable to preventDefault on non-cancelable events."),d=new o("W05","Unable to preventDefault inside passive event listener invocation."),h=new o("W06","An event listener wasn't added because it has been added already: %o, %o"),u=new o("W07","The %o option value was abandoned because the event listener wasn't added as duplicated."),p=new o("W08","The 'callback' argument must be a function or an object that has 'handleEvent' method: %o");new o("W09","Event attribute handler must be a function: %o");class g{static get NONE(){return v}static get CAPTURING_PHASE(){return m}static get AT_TARGET(){return E}static get BUBBLING_PHASE(){return y}constructor(e,t){Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});const n=null!=t?t:{};f.set(this,{type:String(e),bubbles:Boolean(n.bubbles),cancelable:Boolean(n.cancelable),composed:Boolean(n.composed),target:null,currentTarget:null,stopPropagationFlag:!1,stopImmediatePropagationFlag:!1,canceledFlag:!1,inPassiveListenerFlag:!1,dispatchFlag:!1,timeStamp:Date.now()})}get type(){return b(this).type}get target(){return b(this).target}get srcElement(){return b(this).target}get currentTarget(){return b(this).currentTarget}composedPath(){const e=b(this).currentTarget;return e?[e]:[]}get NONE(){return v}get CAPTURING_PHASE(){return m}get AT_TARGET(){return E}get BUBBLING_PHASE(){return y}get eventPhase(){return b(this).dispatchFlag?2:0}stopPropagation(){b(this).stopPropagationFlag=!0}get cancelBubble(){return b(this).stopPropagationFlag}set cancelBubble(e){e?b(this).stopPropagationFlag=!0:r.warn()}stopImmediatePropagation(){const e=b(this);e.stopPropagationFlag=e.stopImmediatePropagationFlag=!0}get bubbles(){return b(this).bubbles}get cancelable(){return b(this).cancelable}get returnValue(){return!b(this).canceledFlag}set returnValue(e){e?l.warn():w(b(this))}preventDefault(){w(b(this))}get defaultPrevented(){return b(this).canceledFlag}get composed(){return b(this).composed}get isTrusted(){return!1}get timeStamp(){return b(this).timeStamp}initEvent(e,t=!1,n=!1){const s=b(this);s.dispatchFlag?a.warn():f.set(this,{...s,type:String(e),bubbles:Boolean(t),cancelable:Boolean(n),target:null,currentTarget:null,stopPropagationFlag:!1,stopImmediatePropagationFlag:!1,canceledFlag:!1})}}const v=0,m=1,E=2,y=3,f=new WeakMap;function b(t,n="this"){const s=f.get(t);return e(null!=s,"'%s' must be an object that Event constructor created, but got another one: %o",n,t),s}function w(e){e.inPassiveListenerFlag?d.warn():e.cancelable?e.canceledFlag=!0:c.warn()}Object.defineProperty(g,"NONE",{enumerable:!0}),Object.defineProperty(g,"CAPTURING_PHASE",{enumerable:!0}),Object.defineProperty(g,"AT_TARGET",{enumerable:!0}),Object.defineProperty(g,"BUBBLING_PHASE",{enumerable:!0});const D=Object.getOwnPropertyNames(g.prototype);for(let e=0;e<D.length;++e)"constructor"!==D[e]&&Object.defineProperty(g.prototype,D[e],{enumerable:!0});let _;void 0!==s&&void 0!==s.Event&&Object.setPrototypeOf(g.prototype,s.Event.prototype);const T={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25};function k(e){const t=Object.keys(T);for(let n=0;n<t.length;++n){const s=t[n],i=T[s];Object.defineProperty(e,s,{get:()=>i,configurable:!0,enumerable:!0})}}class P extends g{static wrap(e){return new(L(e))(e)}constructor(e){super(e.type,{bubbles:e.bubbles,cancelable:e.cancelable,composed:e.composed}),e.cancelBubble&&super.stopPropagation(),e.defaultPrevented&&super.preventDefault(),M.set(this,{original:e});const t=Object.keys(e);for(let n=0;n<t.length;++n){const s=t[n];s in this||Object.defineProperty(this,s,O(e,s))}}stopPropagation(){super.stopPropagation();const{original:e}=S(this);"stopPropagation"in e&&e.stopPropagation()}get cancelBubble(){return super.cancelBubble}set cancelBubble(e){super.cancelBubble=e;const{original:t}=S(this);"cancelBubble"in t&&(t.cancelBubble=e)}stopImmediatePropagation(){super.stopImmediatePropagation();const{original:e}=S(this);"stopImmediatePropagation"in e&&e.stopImmediatePropagation()}get returnValue(){return super.returnValue}set returnValue(e){super.returnValue=e;const{original:t}=S(this);"returnValue"in t&&(t.returnValue=e)}preventDefault(){super.preventDefault();const{original:e}=S(this);"preventDefault"in e&&e.preventDefault()}get timeStamp(){const{original:e}=S(this);return"timeStamp"in e?e.timeStamp:super.timeStamp}}const M=new WeakMap;function S(t){const n=M.get(t);return e(null!=n,"'this' is expected an Event object, but got",t),n}const R=new WeakMap;function L(e){const t=Object.getPrototypeOf(e);if(null==t)return P;let n=R.get(t);return null==n&&(n=function(e,t){class n extends e{}const s=Object.keys(t);for(let e=0;e<s.length;++e)Object.defineProperty(n.prototype,s[e],O(t,s[e]));return n}(L(t),t),R.set(t,n)),n}function O(e,t){const n=Object.getOwnPropertyDescriptor(e,t);return{get(){const e=S(this).original,n=e[t];return"function"==typeof n?n.bind(e):n},set(e){S(this).original[t]=e},configurable:n.configurable,enumerable:n.enumerable}}function $(e){return 1==(1&e.flags)}function I(e){return 2==(2&e.flags)}function F(e){return 4==(4&e.flags)}function A(e){return 8==(8&e.flags)}function N({callback:e},t,s){try{"function"==typeof e?e.call(t,s):"function"==typeof e.handleEvent&&e.handleEvent(s)}catch(e){!function(e){try{const t=e instanceof Error?e:new Error(n(e));if("function"==typeof dispatchEvent&&"function"==typeof ErrorEvent)dispatchEvent(new ErrorEvent("error",{error:t,message:t.message}));else if("undefined"!=typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",t);console.error(t)}catch(e){}}(e)}}function j({listeners:e},t,n){for(let s=0;s<e.length;++s)if(e[s].callback===t&&$(e[s])===n)return s;return-1}function x(e,t,n){const s=j(e,t,n);return-1!==s&&C(e,s)}function C(e,t,n=!1){const s=e.listeners[t];return function(e){e.flags|=8}(s),s.signal&&s.signal.removeEventListener("abort",s.signalListener),e.cow&&!n?(e.cow=!1,e.listeners=e.listeners.filter(((e,n)=>n!==t)),!1):(e.listeners.splice(t,1),!0)}R.set(Object.prototype,P),void 0!==s&&void 0!==s.Event&&R.set(s.Event.prototype,P);class G{constructor(){B.set(this,Object.create(null))}addEventListener(e,t,n){const s=H(this),{callback:i,capture:o,once:a,passive:r,signal:l,type:c}=function(e,t,n){var s;return W(t),"object"==typeof n&&null!==n?{type:String(e),callback:null!=t?t:void 0,capture:Boolean(n.capture),passive:Boolean(n.passive),once:Boolean(n.once),signal:null!==(s=n.signal)&&void 0!==s?s:void 0}:{type:String(e),callback:null!=t?t:void 0,capture:Boolean(n),passive:!1,once:!1,signal:void 0}}(e,t,n);if(null==i||(null==l?void 0:l.aborted))return;const d=function(e,t){var n;return null!==(n=e[t])&&void 0!==n?n:e[t]={attrCallback:void 0,attrListener:void 0,cow:!1,listeners:[]}}(s,c),p=j(d,i,o);-1===p?function(e,t,n,s,i,o){let a;o&&(a=x.bind(null,e,t,n),o.addEventListener("abort",a));const r=function(e,t,n,s,i,o){return{callback:e,flags:(t?1:0)|(n?2:0)|(s?4:0),signal:i,signalListener:o}}(t,n,s,i,o,a);e.cow?(e.cow=!1,e.listeners=[...e.listeners,r]):e.listeners.push(r)}(d,i,o,r,a,l):function(e,t,n,s){h.warn($(e)?"capture":"bubble",e.callback),I(e)!==t&&u.warn("passive"),F(e)!==n&&u.warn("once"),e.signal!==s&&u.warn("signal")}(d.listeners[p],r,a,l)}removeEventListener(e,t,n){const s=H(this),{callback:i,capture:o,type:a}=function(e,t,n){return W(t),"object"==typeof n&&null!==n?{type:String(e),callback:null!=t?t:void 0,capture:Boolean(n.capture)}:{type:String(e),callback:null!=t?t:void 0,capture:Boolean(n)}}(e,t,n),r=s[a];null!=i&&r&&x(r,i,o)}dispatchEvent(e){const t=H(this)[String(e.type)];if(null==t)return!0;const n=e instanceof g?e:P.wrap(e),i=b(n,"event");if(i.dispatchFlag)throw o="This event has been in dispatching.",s.DOMException?new s.DOMException(o,"InvalidStateError"):(null==_&&(_=class e extends Error{constructor(t){super(t),Error.captureStackTrace&&Error.captureStackTrace(this,e)}get code(){return 11}get name(){return"InvalidStateError"}},Object.defineProperties(_.prototype,{code:{enumerable:!0},name:{enumerable:!0}}),k(_),k(_.prototype)),new _(o));var o;if(i.dispatchFlag=!0,i.target=i.currentTarget=this,!i.stopPropagationFlag){const{cow:e,listeners:s}=t;t.cow=!0;for(let o=0;o<s.length;++o){const a=s[o];if(!A(a)&&(F(a)&&C(t,o,!e)&&(o-=1),i.inPassiveListenerFlag=I(a),N(a,this,n),i.inPassiveListenerFlag=!1,i.stopImmediatePropagationFlag))break}e||(t.cow=!1)}return i.target=null,i.currentTarget=null,i.stopImmediatePropagationFlag=!1,i.stopPropagationFlag=!1,i.dispatchFlag=!1,!i.canceledFlag}}const B=new WeakMap;function H(t,n="this"){const s=B.get(t);return e(null!=s,"'%s' must be an object that EventTarget constructor created, but got another one: %o",n,t),s}function W(e){if("function"!=typeof e&&("object"!=typeof e||null===e||"function"!=typeof e.handleEvent)){if(null!=e&&"object"!=typeof e)throw new TypeError(t(p.message,[e]));p.warn(e)}}const Y=Object.getOwnPropertyNames(G.prototype);for(let e=0;e<Y.length;++e)"constructor"!==Y[e]&&Object.defineProperty(G.prototype,Y[e],{enumerable:!0});function U(e,t){return e.filter((e=>e.date.getFullYear()===t.getFullYear()&&e.date.getMonth()===t.getMonth()&&e.date.getDate()===t.getDate())).sort(((e,t)=>!e.time&&t.time?-1:e.time&&!t.time?1:e.time||t.time?parseInt(e.time.replace(/^0/,"").replace(":",""))-parseInt(t.time.replace(/^0/,"").replace(":","")):0)).sort(((e,t)=>e.multiDays&&!t.multiDays?-1:!e.multiDays&&t.multiDays?1:void 0))}void 0!==s&&void 0!==s.EventTarget&&Object.setPrototypeOf(G.prototype,s.EventTarget.prototype);const V=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];class q extends G{constructor(e,t,n){super(),this.el=e,this._date=new Date,this.rootEl=e,this._date=t,this._events=n,this.render()}render(){this.rootEl.innerHTML="";const e=this._date.getMonth(),t=this._date.getFullYear(),n=new Date(t,e,1),s=new Date(t,e+1,0),i=n.getDay(),o=s.getDay(),a=s.getDate(),r=new Date(t,e,0).getDate(),l=[];let c=0;for(let n=r-i+1;n<=r;n++){const s=new Date(t,e-1,n);l.push({date:s,html:this.renderDay(s,n,c,"prev-month")}),c++}for(let n=1;n<=a;n++){const s=new Date(t,e,n);l.push({date:s,html:this.renderDay(s,n,c)}),c++}for(let n=1;n<=7-o-1;n++){const s=new Date(t,e+1,n);l.push({date:s,html:this.renderDay(s,n,c,"next-month")}),c++}for(const{date:e,html:t}of l)this.rootEl.insertAdjacentHTML("beforeend",t),this.rootEl.lastElementChild.addEventListener("click",(t=>{this.dispatchEvent(new CustomEvent("day-clicked",{detail:e}))}));this.updateNowMarker()}renderDay(e,t,n,s=""){const i=U(this._events,e);return`\n      <div class="day ${e.toDateString()===(new Date).toDateString()?"today":""} ${s}">\n        <div class="header">\n          <span class="day-name">${V[e.getDay()]}</span>\n          <span class="day-number">${t}</span>\n        </div>\n        <ul class="events">\n          ${i.map((e=>e.asOneLineHTML(n))).join("")}\n        </ul>\n      </div>\n    `}updateNowMarker(){const e=new Date,t=100*(100*e.getHours()+e.getMinutes())/2400,n=this.rootEl.querySelector(".day.today");if(n){const e=n.offsetHeight*t/100;this.rootEl.style.setProperty("--now-marker",`${e}px`)}setTimeout((()=>this.updateNowMarker()),1e3)}set date(e){this._date=e,this.render()}set events(e){this._events=e,this.render()}}const J=["January","February","March","April","May","June","July","August","September","October","November","December"];class X extends G{constructor(e,t,n){super(),this.el=e,this.selectedMode="month",this.rootEl=e,this._date=t,this.selectedMode=n,this.render()}formatMonthYear(){const e=this._date.getMonth(),t=this._date.getFullYear();return`${J[e]} ${t}`}render(){this.rootEl.innerHTML=`\n      <button id="prev-month">Prev</button>\n      <button id="today" class="primary">Today</button>\n      <button id="next-month">Next</button>\n      <span id="month-year">${this.formatMonthYear()}</span>\n      <input type="radio" name="view" id="month-view" ${"month"===this.selectedMode?"checked":""}>\n      <label for="month-view">Month</label>\n      <input type="radio" name="view" id="week-view" ${"week"===this.selectedMode?"checked":""}>\n      <label for="week-view">Week</label>      \n    `,this.rootEl.querySelector("#prev-month").addEventListener("click",(()=>{console.log(`Prev ${this.selectedMode} clicked`),this.dispatchEvent(new g("prev"))})),this.rootEl.querySelector("#next-month").addEventListener("click",(()=>{console.log(`Next ${this.selectedMode} clicked`),this.dispatchEvent(new g("next"))})),this.rootEl.querySelector("#today").addEventListener("click",(()=>{console.log("Today clicked"),this.dispatchEvent(new g("today"))})),this.rootEl.querySelector("#month-view").addEventListener("click",(()=>{console.log("Month view clicked"),this.dispatchEvent(new g("month-view")),this.selectedMode="month"})),this.rootEl.querySelector("#week-view").addEventListener("click",(()=>{console.log("Week view clicked"),this.dispatchEvent(new g("week-view")),this.selectedMode="week"}))}set date(e){this._date=e,this.render()}}class z{constructor(e,t,n){this.el=e,this._events=[],this._date=new Date,this.rootEl=e,this._date=t,this._events=n,this.render()}render(){if(this.rootEl.innerHTML="\n      <h2>Click a day to view events</h2>\n    ",!this._events.length)return;this.rootEl.innerHTML="";const e=document.createElement("ul");e.className="events",this.rootEl.appendChild(e);for(const t of this._events)e.innerHTML+=t.asFullHTML()}set events(e){this._events=e,this.render()}}const Q=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];class Z extends G{constructor(e,t,n){super(),this.el=e,this._date=new Date,this.rootEl=e,this._date=t,this._events=n,this.render()}render(){this.rootEl.innerHTML="";const e=this._date.getMonth(),t=this._date.getFullYear(),n=this._date.getDate(),s=this._date.getDay(),i=new Date(t,e,n-s);for(let n=0;n<7;n++){const s=new Date(t,e,i.getDate()+n);this.rootEl.insertAdjacentHTML("beforeend",this.renderDay(s,s.getDate())),this.rootEl.lastElementChild.addEventListener("click",(e=>{this.dispatchEvent(new CustomEvent("day-clicked",{detail:s}))}))}this.updateNowMarker()}renderDay(e,t,n=""){const s=U(this._events,e);return`\n      <div class="day ${e.toDateString()===(new Date).toDateString()?"today":""} ${n}">\n        <div class="header">\n          <span class="day-name">${Q[e.getDay()]}</span>\n          <span class="day-number">${t}</span>\n        </div>\n        <ul class="events">\n          ${s.map((e=>e.asMediumLengthHTML())).join("")}\n        </ul>\n      </div>\n    `}updateNowMarker(){const e=new Date,t=100*(100*e.getHours()+e.getMinutes())/2400,n=this.rootEl.querySelector(".day.today");if(n){const e=n.offsetHeight*t/100;this.rootEl.style.setProperty("--now-marker",`${e}px`)}setTimeout((()=>this.updateNowMarker()),1e3)}set date(e){this._date=e,this.render()}set events(e){this._events=e,this.render()}}class K extends G{constructor(e,t,n,s){super(),this.mode="month",this.rootEl=e,this._date=t,this._events=s,this.mode=n,this.render()}render(){this.rootEl.innerHTML="",this.toolbarEl=document.createElement("div"),this.toolbarEl.id="toolbar",this.rootEl.appendChild(this.toolbarEl),this.toolbar=new X(this.toolbarEl,this._date,this.mode),this.toolbar.addEventListener("prev",(()=>{const e="month"===this.mode?new Date(this._date.getFullYear(),this._date.getMonth()-1,1):new Date(this._date.getFullYear(),this._date.getMonth(),this._date.getDate()-7);this.date=e,this.dispatchEvent(new CustomEvent("date-changed",{detail:this._date}))})),this.toolbar.addEventListener("next",(()=>{const e="month"===this.mode?new Date(this._date.getFullYear(),this._date.getMonth()+1,1):new Date(this._date.getFullYear(),this._date.getMonth(),this._date.getDate()+7);this.date=e,this.dispatchEvent(new CustomEvent("date-changed",{detail:this._date}))})),this.toolbar.addEventListener("today",(()=>{this.date=new Date,this.dispatchEvent(new CustomEvent("date-changed",{detail:this._date}))})),this.toolbar.addEventListener("month-view",(()=>{this.mode="month",this.monthGridEl.style.display="grid",this.weekGridEl.style.display="none",this.dispatchEvent(new CustomEvent("mode-changed",{detail:this.mode}))})),this.toolbar.addEventListener("week-view",(()=>{this.mode="week",this.monthGridEl.style.display="none",this.weekGridEl.style.display="grid",this.dispatchEvent(new CustomEvent("mode-changed",{detail:this.mode}))})),this.monthGridEl=document.createElement("div"),this.monthGridEl.id="month-grid",this.rootEl.appendChild(this.monthGridEl),this.monthGrid=new q(this.monthGridEl,this._date,this._events),this.weekGridEl=document.createElement("div"),this.weekGridEl.id="week-grid",this.rootEl.appendChild(this.weekGridEl),this.weekGrid=new Z(this.weekGridEl,this._date,this._events),this.sidebarEl=document.createElement("div"),this.sidebarEl.id="sidebar",this.rootEl.appendChild(this.sidebarEl),this.sidebar=new z(this.sidebarEl,this._date,this._events),this.monthGrid.addEventListener("day-clicked",(e=>{const t=e.detail,n=U(this._events,t);this.sidebar.events=n})),this.weekGrid.addEventListener("day-clicked",(e=>{const t=e.detail,n=U(this._events,t);this.sidebar.events=n})),this.sidebar.events=U(this._events,new Date),"week"===this.mode?(this.monthGridEl.style.display="none",this.weekGridEl.style.display="grid"):(this.monthGridEl.style.display="grid",this.weekGridEl.style.display="none")}set date(e){console.log("Setting date to",e),this._date=e,this.monthGrid.date=e,this.weekGrid.date=e,this.toolbar.date=e,this.sidebar.events=U(this._events,this._date)}set events(e){this._events=e,this.monthGrid.events=e,this.weekGrid.events=e,this.sidebar.events=U(this._events,this._date)}}class ee{constructor(e,t,n){this.rsvp=!1,this.title=e,this.id=t,this.date=n}asOneLineHTML(e=void 0){const t=this.time?`<span class="time">${this.time}</span>`:"";return`\n      <li id="id-${this.id}" data-index-in-grid="${e}" class="event${this.multiDays?" multi-day":""}${this.rsvp?"":" unconfirmed"}" style="--event-color: ${this.color};">\n        <div>${t} <span class="title">${this.title}</span></div>\n      </li>\n    `}asMediumLengthHTML(){const e=this.time?`<span class="time">${this.time}</span>`:"";return`\n      <li id="id-${this.id}" class="event${this.multiDays?" multi-day":""}${this.rsvp?"":" unconfirmed"}" style="--event-color: ${this.color};">\n        <div>${e}</div>\n        <p class="title">${this.title}</p>\n        <p>${this.description}</p>\n      </li>\n    `}asFullHTML(){let e="";return this.multiDays?e=`From ${this.multiDays.start.toDateString()} to ${this.multiDays.end.toDateString()}`:(e=this.date.toDateString(),this.time&&(e+=`, at ${this.time}`),this.repeat&&(e+=`, ${this.repeat}`),this.duration&&(e+=` (${this.duration} minutes)`)),`\n      <li class="event${this.rsvp?"":" unconfirmed"}" style="--event-color: ${this.color};">\n        <div>\n          <h2>${this.title}</h2>\n          <p class="when">${e}</p>\n          ${this.location?`<p class="where">${this.location}</p>`:""}\n          <p class="what">${this.description}</p>\n        </div>\n      </li>\n    `}}var te=function(e,t,n,s){return new(n||(n=Promise))((function(i,o){function a(e){try{l(s.next(e))}catch(e){o(e)}}function r(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,r)}l((s=s.apply(e,t||[])).next())}))};class ne{constructor(e){this.events=e}start(){this.popupEl||(this.popupEl=document.createElement("div"),this.popupEl.className="popup"),addEventListener("mousemove",(e=>{this.popupEl.classList.remove("visible"),this.popupEl.remove();const t=e.target.closest("#month-grid .event, #week-grid .event");if(!t)return;const n=t.id;if(!n||!n.startsWith("id-"))return;let s=n.replace("id-","");const i=this.events.find((e=>e.id===s));if(!i)return void console.log("No event found for id",s);const o=parseInt(t.dataset.indexInGrid);this.popupEl.style.setProperty("--event-color",i.color),this.popupEl.classList.toggle("visible",!0),this.popupEl.classList.toggle("unconfirmed",!i.rsvp);let a="";i.multiDays?a=`From ${i.multiDays.start.toDateString()} to ${i.multiDays.end.toDateString()}`:(a=i.date.toDateString(),i.time&&(a+=`, at ${i.time}`),i.repeat&&(a+=`, ${i.repeat}`),i.duration&&(a+=` (${i.duration} minutes)`)),this.popupEl.innerHTML=`\n        <h2>${i.title}</h2>\n        <p class="when">${a}</p>\n        ${i.location?`<p class="where">${i.location}</p>`:""}\n        <p class="what">${i.description}</p>\n      `,document.body.appendChild(this.popupEl);const r=t.getBoundingClientRect(),l=r.top,c=r.right,d=r.left,h=r.width;this.popupEl.style.top=o>=28?l-this.popupEl.clientHeight+"px":`${l}px`,6===o||13===o||20===o||27===o||34===o?(this.popupEl.style.left=d-h+"px",this.popupEl.classList.toggle("left",!0)):(this.popupEl.style.left=`${c}px`,this.popupEl.classList.toggle("left",!1))}))}}class se{getStoredPrefs(){return e=this,t=void 0,s=function*(){yield new Promise((e=>setTimeout(e,250*Math.random())));const e=localStorage.getItem("slow-cal-mode"),t=localStorage.getItem("slow-cal-initDate");return{mode:e,initDate:t?new Date(t):void 0}},new((n=void 0)||(n=Promise))((function(i,o){function a(e){try{l(s.next(e))}catch(e){o(e)}}function r(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,r)}l((s=s.apply(e,t||[])).next())}));var e,t,n,s}set mode(e){console.log("Storing mode prefs"),localStorage.setItem("slow-cal-mode",e)}set initDate(e){console.log("Storing date prefs"),localStorage.setItem("slow-cal-initDate",e.toISOString())}}addEventListener("DOMContentLoaded",(()=>{return e=void 0,t=void 0,s=function*(){const e=new se,t=yield e.getStoredPrefs(),n=t.initDate||new Date,s=t.mode||"month",i=document.getElementById("app"),o=new K(i,n,s,[]),a=yield function(){return te(this,void 0,void 0,(function*(){const e=yield function(){return te(this,void 0,void 0,(function*(){console.log("Fetching calendar data ..."),yield new Promise((e=>setTimeout(e,500*Math.random())));const e=yield fetch(`./data.json?cacheBuster=${Date.now()}`);return yield e.json()}))}();return console.log("Processing events ..."),e.events.map((e=>function(e){const t=[new Date(e.startDate)];let n=null;if(e.repeat){const n=new Date(e.startDate),s=e.endDate?new Date(e.endDate):new Date(n.getTime()+15768e7);if("daily"===e.repeat){console.log("Expanding daily event ...");const e=(s.getTime()-n.getTime())/864e5;for(let s=1;s<=e;s++){const e=new Date(n.getTime()+24*s*60*60*1e3);0!==e.getDay()&&6!==e.getDay()&&t.push(e)}}else if("weekly"===e.repeat){console.log("Expanding weekly event ...");const e=(s.getTime()-n.getTime())/6048e5;for(let s=1;s<=e;s++){const e=new Date(n.getTime()+7*s*24*60*60*1e3);t.push(e)}}else if("monthly"===e.repeat){console.log("Expanding monthly event ...");const e=12*(s.getFullYear()-n.getFullYear())+(s.getMonth()-n.getMonth());for(let s=1;s<=e;s++){const e=new Date(n.getTime());e.setMonth(e.getMonth()+s),t.push(e)}}else if("yearly"===e.repeat){console.log("Expanding yearly event ...");const e=s.getFullYear()-n.getFullYear();for(let s=1;s<=e;s++){const e=new Date(n.getTime());e.setFullYear(e.getFullYear()+s),t.push(e)}}}else if(e.endDate){const s=new Date(e.startDate),i=new Date(e.endDate),o=(i.getTime()-s.getTime())/864e5;for(let e=1;e<=o;e++){const n=new Date(s.getTime()+24*e*60*60*1e3);t.push(n)}n={start:s,end:i}}return t.map(((t,s)=>{const i=e.id+(s>0?`-${s}`:""),o=new ee(e.title,i,t);return o.multiDays=n,o.color=e.color,o.time=e.startTime,o.duration=e.duration,o.repeat=e.repeat,o.location=e.location,o.description=e.description,o.rsvp=e.rsvp,o}))}(e))).flat()}))}();console.log("Refreshing calendar with events"),o.events=a,console.log("Initializing the popup util"),new ne(a).start(),o.addEventListener("mode-changed",(t=>{e.mode=t.detail})),o.addEventListener("date-changed",(t=>{e.initDate=t.detail}))},new((n=void 0)||(n=Promise))((function(i,o){function a(e){try{l(s.next(e))}catch(e){o(e)}}function r(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,r)}l((s=s.apply(e,t||[])).next())}));var e,t,n,s}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RSxFQUFVNEUsSUFBTS9HLEVBQVEsRUFBSSxJQUFJQSxJQUFVLElBQy9DaEYsRUFBUSxJQUFJeU0sR0FBY3RGLEVBQVV1RixNQUFPWCxFQUFJckUsR0FZckQsT0FWQTFILEVBQU1tSSxVQUFZQSxFQUVsQm5JLEVBQU00TSxNQUFRekYsRUFBVXlGLE1BQ3hCNU0sRUFBTWlJLEtBQU9kLEVBQVVtSixVQUN2QnRRLEVBQU1rTixTQUFXL0YsRUFBVStGLFNBQzNCbE4sRUFBTWlOLE9BQVM5RixFQUFVOEYsT0FDekJqTixFQUFNbU4sU0FBV2hHLEVBQVVnRyxTQUMzQm5OLEVBQU02TSxZQUFjMUYsRUFBVTBGLFlBQzlCN00sRUFBTTJNLEtBQU94RixFQUFVd0YsS0FFaEIzTSxDQUFLLEdBRWhCLENBT1d1USxDQUFrQ3ZRLEtBQ3hDd1EsTUFDTCxHLENEbkZ1QkMsR0FFckI3VCxRQUFRdU8sSUFBSSxtQ0FDWnFFLEVBQU0vSCxPQUFTQSxFQUVmN0ssUUFBUXVPLElBQUksK0JBQ0UsSUFBSWlDLEdBQVczRixHQUN2QnNGLFFBR055QyxFQUFNMUosaUJBQWlCLGdCQUFpQm9CLElBQ3RDaUksRUFBTW5FLEtBQU85RCxFQUFFMEMsTUFBTSxJQUl2QjRGLEVBQU0xSixpQkFBaUIsZ0JBQWlCb0IsSUFDdENpSSxFQUFNSCxTQUFXOUgsRUFBRTBDLE1BQU0sR0FFN0IsRSxZQTdCaUQsSyw2UUE2Qi9DLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zbG93LWNhbGVuZGFyLy4vbm9kZV9tb2R1bGVzL2V2ZW50LXRhcmdldC1zaGltL2luZGV4Lm1qcyIsIndlYnBhY2s6Ly9zbG93LWNhbGVuZGFyLy4vc3JjL3V0aWxzLnRzIiwid2VicGFjazovL3Nsb3ctY2FsZW5kYXIvLi9zcmMvTW9udGhHcmlkLnRzIiwid2VicGFjazovL3Nsb3ctY2FsZW5kYXIvLi9zcmMvVG9vbGJhci50cyIsIndlYnBhY2s6Ly9zbG93LWNhbGVuZGFyLy4vc3JjL1NpZGViYXIudHMiLCJ3ZWJwYWNrOi8vc2xvdy1jYWxlbmRhci8uL3NyYy9XZWVrR3JpZC50cyIsIndlYnBhY2s6Ly9zbG93LWNhbGVuZGFyLy4vc3JjL0FwcFVJLnRzIiwid2VicGFjazovL3Nsb3ctY2FsZW5kYXIvLi9zcmMvQ2FsZW5kYXJFdmVudC50cyIsIndlYnBhY2s6Ly9zbG93LWNhbGVuZGFyLy4vc3JjL0V2ZW50UG9wdXAudHMiLCJ3ZWJwYWNrOi8vc2xvdy1jYWxlbmRhci8uL3NyYy9TdG9yZS50cyIsIndlYnBhY2s6Ly9zbG93LWNhbGVuZGFyLy4vc3JjL2FwcC50cyIsIndlYnBhY2s6Ly9zbG93LWNhbGVuZGFyLy4vc3JjL2V2ZW50cy1mYWN0b3J5LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQXNzZXJ0IGEgY29uZGl0aW9uLlxuICogQHBhcmFtIGNvbmRpdGlvbiBUaGUgY29uZGl0aW9uIHRoYXQgaXQgc2hvdWxkIHNhdGlzZnkuXG4gKiBAcGFyYW0gbWVzc2FnZSBUaGUgZXJyb3IgbWVzc2FnZS5cbiAqIEBwYXJhbSBhcmdzIFRoZSBhcmd1bWVudHMgZm9yIHJlcGxhY2luZyBwbGFjZWhvbGRlcnMgaW4gdGhlIG1lc3NhZ2UuXG4gKi9cbmZ1bmN0aW9uIGFzc2VydFR5cGUoY29uZGl0aW9uLCBtZXNzYWdlLCAuLi5hcmdzKSB7XG4gICAgaWYgKCFjb25kaXRpb24pIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihmb3JtYXQobWVzc2FnZSwgYXJncykpO1xuICAgIH1cbn1cbi8qKlxuICogQ29udmVydCBhIHRleHQgYW5kIGFyZ3VtZW50cyB0byBvbmUgc3RyaW5nLlxuICogQHBhcmFtIG1lc3NhZ2UgVGhlIGZvcm1hdGluZyB0ZXh0XG4gKiBAcGFyYW0gYXJncyBUaGUgYXJndW1lbnRzLlxuICovXG5mdW5jdGlvbiBmb3JtYXQobWVzc2FnZSwgYXJncykge1xuICAgIGxldCBpID0gMDtcbiAgICByZXR1cm4gbWVzc2FnZS5yZXBsYWNlKC8lW29zXS9ndSwgKCkgPT4gYW55VG9TdHJpbmcoYXJnc1tpKytdKSk7XG59XG4vKipcbiAqIENvbnZlcnQgYSB2YWx1ZSB0byBhIHN0cmluZyByZXByZXNlbnRhdGlvbi5cbiAqIEBwYXJhbSB4IFRoZSB2YWx1ZSB0byBnZXQgdGhlIHN0cmluZyByZXByZXNlbnRhdGlvbi5cbiAqL1xuZnVuY3Rpb24gYW55VG9TdHJpbmcoeCkge1xuICAgIGlmICh0eXBlb2YgeCAhPT0gXCJvYmplY3RcIiB8fCB4ID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBTdHJpbmcoeCk7XG4gICAgfVxuICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoeCk7XG59XG5cbmxldCBjdXJyZW50RXJyb3JIYW5kbGVyO1xuLyoqXG4gKiBTZXQgdGhlIGVycm9yIGhhbmRsZXIuXG4gKiBAcGFyYW0gdmFsdWUgVGhlIGVycm9yIGhhbmRsZXIgdG8gc2V0LlxuICovXG5mdW5jdGlvbiBzZXRFcnJvckhhbmRsZXIodmFsdWUpIHtcbiAgICBhc3NlcnRUeXBlKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiIHx8IHZhbHVlID09PSB1bmRlZmluZWQsIFwiVGhlIGVycm9yIGhhbmRsZXIgbXVzdCBiZSBhIGZ1bmN0aW9uIG9yIHVuZGVmaW5lZCwgYnV0IGdvdCAlby5cIiwgdmFsdWUpO1xuICAgIGN1cnJlbnRFcnJvckhhbmRsZXIgPSB2YWx1ZTtcbn1cbi8qKlxuICogUHJpbnQgYSBlcnJvciBtZXNzYWdlLlxuICogQHBhcmFtIG1heWJlRXJyb3IgVGhlIGVycm9yIG9iamVjdC5cbiAqL1xuZnVuY3Rpb24gcmVwb3J0RXJyb3IobWF5YmVFcnJvcikge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGVycm9yID0gbWF5YmVFcnJvciBpbnN0YW5jZW9mIEVycm9yXG4gICAgICAgICAgICA/IG1heWJlRXJyb3JcbiAgICAgICAgICAgIDogbmV3IEVycm9yKGFueVRvU3RyaW5nKG1heWJlRXJyb3IpKTtcbiAgICAgICAgLy8gQ2FsbCB0aGUgdXNlci1kZWZpbmVkIGVycm9yIGhhbmRsZXIgaWYgZXhpc3RzLlxuICAgICAgICBpZiAoY3VycmVudEVycm9ySGFuZGxlcikge1xuICAgICAgICAgICAgY3VycmVudEVycm9ySGFuZGxlcihlcnJvcik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gRGlzcGF0Y2ggYW4gYGVycm9yYCBldmVudCBpZiB0aGlzIGlzIG9uIGEgYnJvd3Nlci5cbiAgICAgICAgaWYgKHR5cGVvZiBkaXNwYXRjaEV2ZW50ID09PSBcImZ1bmN0aW9uXCIgJiZcbiAgICAgICAgICAgIHR5cGVvZiBFcnJvckV2ZW50ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIGRpc3BhdGNoRXZlbnQobmV3IEVycm9yRXZlbnQoXCJlcnJvclwiLCB7IGVycm9yLCBtZXNzYWdlOiBlcnJvci5tZXNzYWdlIH0pKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBFbWl0IGFuIGB1bmNhdWdodEV4Y2VwdGlvbmAgZXZlbnQgaWYgdGhpcyBpcyBvbiBOb2RlLmpzLlxuICAgICAgICAvL2lzdGFuYnVsIGlnbm9yZSBlbHNlXG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBwcm9jZXNzICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgICAgICAgICB0eXBlb2YgcHJvY2Vzcy5lbWl0ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHByb2Nlc3MuZW1pdChcInVuY2F1Z2h0RXhjZXB0aW9uXCIsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBPdGhlcndpc2UsIHByaW50IHRoZSBlcnJvci5cbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgfVxuICAgIGNhdGNoIChfYSkge1xuICAgICAgICAvLyBpZ25vcmUuXG4gICAgfVxufVxuXG4vKipcbiAqIFRoZSBnbG9iYWwgb2JqZWN0LlxuICovXG4vL2lzdGFuYnVsIGlnbm9yZSBuZXh0XG5jb25zdCBHbG9iYWwgPSB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiXG4gICAgPyB3aW5kb3dcbiAgICA6IHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiXG4gICAgICAgID8gc2VsZlxuICAgICAgICA6IHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCJcbiAgICAgICAgICAgID8gZ2xvYmFsXG4gICAgICAgICAgICA6IHR5cGVvZiBnbG9iYWxUaGlzICE9PSBcInVuZGVmaW5lZFwiXG4gICAgICAgICAgICAgICAgPyBnbG9iYWxUaGlzXG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG5cbmxldCBjdXJyZW50V2FybkhhbmRsZXI7XG4vKipcbiAqIFNldCB0aGUgd2FybmluZyBoYW5kbGVyLlxuICogQHBhcmFtIHZhbHVlIFRoZSB3YXJuaW5nIGhhbmRsZXIgdG8gc2V0LlxuICovXG5mdW5jdGlvbiBzZXRXYXJuaW5nSGFuZGxlcih2YWx1ZSkge1xuICAgIGFzc2VydFR5cGUodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCIgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCwgXCJUaGUgd2FybmluZyBoYW5kbGVyIG11c3QgYmUgYSBmdW5jdGlvbiBvciB1bmRlZmluZWQsIGJ1dCBnb3QgJW8uXCIsIHZhbHVlKTtcbiAgICBjdXJyZW50V2FybkhhbmRsZXIgPSB2YWx1ZTtcbn1cbi8qKlxuICogVGhlIHdhcm5pbmcgaW5mb3JtYXRpb24uXG4gKi9cbmNsYXNzIFdhcm5pbmcge1xuICAgIGNvbnN0cnVjdG9yKGNvZGUsIG1lc3NhZ2UpIHtcbiAgICAgICAgdGhpcy5jb2RlID0gY29kZTtcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVwb3J0IHRoaXMgd2FybmluZy5cbiAgICAgKiBAcGFyYW0gYXJncyBUaGUgYXJndW1lbnRzIG9mIHRoZSB3YXJuaW5nLlxuICAgICAqL1xuICAgIHdhcm4oLi4uYXJncykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBDYWxsIHRoZSB1c2VyLWRlZmluZWQgd2FybmluZyBoYW5kbGVyIGlmIGV4aXN0cy5cbiAgICAgICAgICAgIGlmIChjdXJyZW50V2FybkhhbmRsZXIpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50V2FybkhhbmRsZXIoeyAuLi50aGlzLCBhcmdzIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIE90aGVyd2lzZSwgcHJpbnQgdGhlIHdhcm5pbmcuXG4gICAgICAgICAgICBjb25zdCBzdGFjayA9ICgoX2EgPSBuZXcgRXJyb3IoKS5zdGFjaykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogXCJcIikucmVwbGFjZSgvXig/Oi4rP1xcbil7Mn0vZ3UsIFwiXFxuXCIpO1xuICAgICAgICAgICAgY29uc29sZS53YXJuKHRoaXMubWVzc2FnZSwgLi4uYXJncywgc3RhY2spO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChfYikge1xuICAgICAgICAgICAgLy8gSWdub3JlLlxuICAgICAgICB9XG4gICAgfVxufVxuXG5jb25zdCBJbml0RXZlbnRXYXNDYWxsZWRXaGlsZURpc3BhdGNoaW5nID0gbmV3IFdhcm5pbmcoXCJXMDFcIiwgXCJVbmFibGUgdG8gaW5pdGlhbGl6ZSBldmVudCB1bmRlciBkaXNwYXRjaGluZy5cIik7XG5jb25zdCBGYWxzeVdhc0Fzc2lnbmVkVG9DYW5jZWxCdWJibGUgPSBuZXcgV2FybmluZyhcIlcwMlwiLCBcIkFzc2lnbmluZyBhbnkgZmFsc3kgdmFsdWUgdG8gJ2NhbmNlbEJ1YmJsZScgcHJvcGVydHkgaGFzIG5vIGVmZmVjdC5cIik7XG5jb25zdCBUcnV0aHlXYXNBc3NpZ25lZFRvUmV0dXJuVmFsdWUgPSBuZXcgV2FybmluZyhcIlcwM1wiLCBcIkFzc2lnbmluZyBhbnkgdHJ1dGh5IHZhbHVlIHRvICdyZXR1cm5WYWx1ZScgcHJvcGVydHkgaGFzIG5vIGVmZmVjdC5cIik7XG5jb25zdCBOb25DYW5jZWxhYmxlRXZlbnRXYXNDYW5jZWxlZCA9IG5ldyBXYXJuaW5nKFwiVzA0XCIsIFwiVW5hYmxlIHRvIHByZXZlbnREZWZhdWx0IG9uIG5vbi1jYW5jZWxhYmxlIGV2ZW50cy5cIik7XG5jb25zdCBDYW5jZWxlZEluUGFzc2l2ZUxpc3RlbmVyID0gbmV3IFdhcm5pbmcoXCJXMDVcIiwgXCJVbmFibGUgdG8gcHJldmVudERlZmF1bHQgaW5zaWRlIHBhc3NpdmUgZXZlbnQgbGlzdGVuZXIgaW52b2NhdGlvbi5cIik7XG5jb25zdCBFdmVudExpc3RlbmVyV2FzRHVwbGljYXRlZCA9IG5ldyBXYXJuaW5nKFwiVzA2XCIsIFwiQW4gZXZlbnQgbGlzdGVuZXIgd2Fzbid0IGFkZGVkIGJlY2F1c2UgaXQgaGFzIGJlZW4gYWRkZWQgYWxyZWFkeTogJW8sICVvXCIpO1xuY29uc3QgT3B0aW9uV2FzSWdub3JlZCA9IG5ldyBXYXJuaW5nKFwiVzA3XCIsIFwiVGhlICVvIG9wdGlvbiB2YWx1ZSB3YXMgYWJhbmRvbmVkIGJlY2F1c2UgdGhlIGV2ZW50IGxpc3RlbmVyIHdhc24ndCBhZGRlZCBhcyBkdXBsaWNhdGVkLlwiKTtcbmNvbnN0IEludmFsaWRFdmVudExpc3RlbmVyID0gbmV3IFdhcm5pbmcoXCJXMDhcIiwgXCJUaGUgJ2NhbGxiYWNrJyBhcmd1bWVudCBtdXN0IGJlIGEgZnVuY3Rpb24gb3IgYW4gb2JqZWN0IHRoYXQgaGFzICdoYW5kbGVFdmVudCcgbWV0aG9kOiAlb1wiKTtcbmNvbnN0IEludmFsaWRBdHRyaWJ1dGVIYW5kbGVyID0gbmV3IFdhcm5pbmcoXCJXMDlcIiwgXCJFdmVudCBhdHRyaWJ1dGUgaGFuZGxlciBtdXN0IGJlIGEgZnVuY3Rpb246ICVvXCIpO1xuXG4vKmVzbGludC1kaXNhYmxlIGNsYXNzLW1ldGhvZHMtdXNlLXRoaXMgKi9cbi8qKlxuICogQW4gaW1wbGVtZW50YXRpb24gb2YgYEV2ZW50YCBpbnRlcmZhY2UsIHRoYXQgd3JhcHMgYSBnaXZlbiBldmVudCBvYmplY3QuXG4gKiBgRXZlbnRUYXJnZXRgIHNoaW0gY2FuIGNvbnRyb2wgdGhlIGludGVybmFsIHN0YXRlIG9mIHRoaXMgYEV2ZW50YCBvYmplY3RzLlxuICogQHNlZSBodHRwczovL2RvbS5zcGVjLndoYXR3Zy5vcmcvI2V2ZW50XG4gKi9cbmNsYXNzIEV2ZW50IHtcbiAgICAvKipcbiAgICAgKiBAc2VlIGh0dHBzOi8vZG9tLnNwZWMud2hhdHdnLm9yZy8jZG9tLWV2ZW50LW5vbmVcbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0IE5PTkUoKSB7XG4gICAgICAgIHJldHVybiBOT05FO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAc2VlIGh0dHBzOi8vZG9tLnNwZWMud2hhdHdnLm9yZy8jZG9tLWV2ZW50LWNhcHR1cmluZ19waGFzZVxuICAgICAqL1xuICAgIHN0YXRpYyBnZXQgQ0FQVFVSSU5HX1BIQVNFKCkge1xuICAgICAgICByZXR1cm4gQ0FQVFVSSU5HX1BIQVNFO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAc2VlIGh0dHBzOi8vZG9tLnNwZWMud2hhdHdnLm9yZy8jZG9tLWV2ZW50LWF0X3RhcmdldFxuICAgICAqL1xuICAgIHN0YXRpYyBnZXQgQVRfVEFSR0VUKCkge1xuICAgICAgICByZXR1cm4gQVRfVEFSR0VUO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAc2VlIGh0dHBzOi8vZG9tLnNwZWMud2hhdHdnLm9yZy8jZG9tLWV2ZW50LWJ1YmJsaW5nX3BoYXNlXG4gICAgICovXG4gICAgc3RhdGljIGdldCBCVUJCTElOR19QSEFTRSgpIHtcbiAgICAgICAgcmV0dXJuIEJVQkJMSU5HX1BIQVNFO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplIHRoaXMgZXZlbnQgaW5zdGFuY2UuXG4gICAgICogQHBhcmFtIHR5cGUgVGhlIHR5cGUgb2YgdGhpcyBldmVudC5cbiAgICAgKiBAcGFyYW0gZXZlbnRJbml0RGljdCBPcHRpb25zIHRvIGluaXRpYWxpemUuXG4gICAgICogQHNlZSBodHRwczovL2RvbS5zcGVjLndoYXR3Zy5vcmcvI2RvbS1ldmVudC1ldmVudFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHR5cGUsIGV2ZW50SW5pdERpY3QpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaXNUcnVzdGVkXCIsIHtcbiAgICAgICAgICAgIHZhbHVlOiBmYWxzZSxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBvcHRzID0gZXZlbnRJbml0RGljdCAhPT0gbnVsbCAmJiBldmVudEluaXREaWN0ICE9PSB2b2lkIDAgPyBldmVudEluaXREaWN0IDoge307XG4gICAgICAgIGludGVybmFsRGF0YU1hcC5zZXQodGhpcywge1xuICAgICAgICAgICAgdHlwZTogU3RyaW5nKHR5cGUpLFxuICAgICAgICAgICAgYnViYmxlczogQm9vbGVhbihvcHRzLmJ1YmJsZXMpLFxuICAgICAgICAgICAgY2FuY2VsYWJsZTogQm9vbGVhbihvcHRzLmNhbmNlbGFibGUpLFxuICAgICAgICAgICAgY29tcG9zZWQ6IEJvb2xlYW4ob3B0cy5jb21wb3NlZCksXG4gICAgICAgICAgICB0YXJnZXQ6IG51bGwsXG4gICAgICAgICAgICBjdXJyZW50VGFyZ2V0OiBudWxsLFxuICAgICAgICAgICAgc3RvcFByb3BhZ2F0aW9uRmxhZzogZmFsc2UsXG4gICAgICAgICAgICBzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb25GbGFnOiBmYWxzZSxcbiAgICAgICAgICAgIGNhbmNlbGVkRmxhZzogZmFsc2UsXG4gICAgICAgICAgICBpblBhc3NpdmVMaXN0ZW5lckZsYWc6IGZhbHNlLFxuICAgICAgICAgICAgZGlzcGF0Y2hGbGFnOiBmYWxzZSxcbiAgICAgICAgICAgIHRpbWVTdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSB0eXBlIG9mIHRoaXMgZXZlbnQuXG4gICAgICogQHNlZSBodHRwczovL2RvbS5zcGVjLndoYXR3Zy5vcmcvI2RvbS1ldmVudC10eXBlXG4gICAgICovXG4gICAgZ2V0IHR5cGUoKSB7XG4gICAgICAgIHJldHVybiAkKHRoaXMpLnR5cGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBldmVudCB0YXJnZXQgb2YgdGhlIGN1cnJlbnQgZGlzcGF0Y2hpbmcuXG4gICAgICogQHNlZSBodHRwczovL2RvbS5zcGVjLndoYXR3Zy5vcmcvI2RvbS1ldmVudC10YXJnZXRcbiAgICAgKi9cbiAgICBnZXQgdGFyZ2V0KCkge1xuICAgICAgICByZXR1cm4gJCh0aGlzKS50YXJnZXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBldmVudCB0YXJnZXQgb2YgdGhlIGN1cnJlbnQgZGlzcGF0Y2hpbmcuXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIHRoZSBgdGFyZ2V0YCBwcm9wZXJ0eSBpbnN0ZWFkLlxuICAgICAqIEBzZWUgaHR0cHM6Ly9kb20uc3BlYy53aGF0d2cub3JnLyNkb20tZXZlbnQtc3JjZWxlbWVudFxuICAgICAqL1xuICAgIGdldCBzcmNFbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gJCh0aGlzKS50YXJnZXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBldmVudCB0YXJnZXQgb2YgdGhlIGN1cnJlbnQgZGlzcGF0Y2hpbmcuXG4gICAgICogQHNlZSBodHRwczovL2RvbS5zcGVjLndoYXR3Zy5vcmcvI2RvbS1ldmVudC1jdXJyZW50dGFyZ2V0XG4gICAgICovXG4gICAgZ2V0IGN1cnJlbnRUYXJnZXQoKSB7XG4gICAgICAgIHJldHVybiAkKHRoaXMpLmN1cnJlbnRUYXJnZXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBldmVudCB0YXJnZXQgb2YgdGhlIGN1cnJlbnQgZGlzcGF0Y2hpbmcuXG4gICAgICogVGhpcyBkb2Vzbid0IHN1cHBvcnQgbm9kZSB0cmVlLlxuICAgICAqIEBzZWUgaHR0cHM6Ly9kb20uc3BlYy53aGF0d2cub3JnLyNkb20tZXZlbnQtY29tcG9zZWRwYXRoXG4gICAgICovXG4gICAgY29tcG9zZWRQYXRoKCkge1xuICAgICAgICBjb25zdCBjdXJyZW50VGFyZ2V0ID0gJCh0aGlzKS5jdXJyZW50VGFyZ2V0O1xuICAgICAgICBpZiAoY3VycmVudFRhcmdldCkge1xuICAgICAgICAgICAgcmV0dXJuIFtjdXJyZW50VGFyZ2V0XTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBzZWUgaHR0cHM6Ly9kb20uc3BlYy53aGF0d2cub3JnLyNkb20tZXZlbnQtbm9uZVxuICAgICAqL1xuICAgIGdldCBOT05FKCkge1xuICAgICAgICByZXR1cm4gTk9ORTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHNlZSBodHRwczovL2RvbS5zcGVjLndoYXR3Zy5vcmcvI2RvbS1ldmVudC1jYXB0dXJpbmdfcGhhc2VcbiAgICAgKi9cbiAgICBnZXQgQ0FQVFVSSU5HX1BIQVNFKCkge1xuICAgICAgICByZXR1cm4gQ0FQVFVSSU5HX1BIQVNFO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAc2VlIGh0dHBzOi8vZG9tLnNwZWMud2hhdHdnLm9yZy8jZG9tLWV2ZW50LWF0X3RhcmdldFxuICAgICAqL1xuICAgIGdldCBBVF9UQVJHRVQoKSB7XG4gICAgICAgIHJldHVybiBBVF9UQVJHRVQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBzZWUgaHR0cHM6Ly9kb20uc3BlYy53aGF0d2cub3JnLyNkb20tZXZlbnQtYnViYmxpbmdfcGhhc2VcbiAgICAgKi9cbiAgICBnZXQgQlVCQkxJTkdfUEhBU0UoKSB7XG4gICAgICAgIHJldHVybiBCVUJCTElOR19QSEFTRTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgZXZlbnQgcGhhc2UuXG4gICAgICogQHNlZSBodHRwczovL2RvbS5zcGVjLndoYXR3Zy5vcmcvI2RvbS1ldmVudC1ldmVudHBoYXNlXG4gICAgICovXG4gICAgZ2V0IGV2ZW50UGhhc2UoKSB7XG4gICAgICAgIHJldHVybiAkKHRoaXMpLmRpc3BhdGNoRmxhZyA/IDIgOiAwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdG9wIGV2ZW50IGJ1YmJsaW5nLlxuICAgICAqIEJlY2F1c2UgdGhpcyBzaGltIGRvZXNuJ3Qgc3VwcG9ydCBub2RlIHRyZWUsIHRoaXMgbWVyZWx5IGNoYW5nZXMgdGhlIGBjYW5jZWxCdWJibGVgIHByb3BlcnR5IHZhbHVlLlxuICAgICAqIEBzZWUgaHR0cHM6Ly9kb20uc3BlYy53aGF0d2cub3JnLyNkb20tZXZlbnQtc3RvcHByb3BhZ2F0aW9uXG4gICAgICovXG4gICAgc3RvcFByb3BhZ2F0aW9uKCkge1xuICAgICAgICAkKHRoaXMpLnN0b3BQcm9wYWdhdGlvbkZsYWcgPSB0cnVlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBgdHJ1ZWAgaWYgZXZlbnQgYnViYmxpbmcgd2FzIHN0b3BwZWQuXG4gICAgICogQGRlcHJlY2F0ZWRcbiAgICAgKiBAc2VlIGh0dHBzOi8vZG9tLnNwZWMud2hhdHdnLm9yZy8jZG9tLWV2ZW50LWNhbmNlbGJ1YmJsZVxuICAgICAqL1xuICAgIGdldCBjYW5jZWxCdWJibGUoKSB7XG4gICAgICAgIHJldHVybiAkKHRoaXMpLnN0b3BQcm9wYWdhdGlvbkZsYWc7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0b3AgZXZlbnQgYnViYmxpbmcgaWYgYHRydWVgIGlzIHNldC5cbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgdGhlIGBzdG9wUHJvcGFnYXRpb24oKWAgbWV0aG9kIGluc3RlYWQuXG4gICAgICogQHNlZSBodHRwczovL2RvbS5zcGVjLndoYXR3Zy5vcmcvI2RvbS1ldmVudC1jYW5jZWxidWJibGVcbiAgICAgKi9cbiAgICBzZXQgY2FuY2VsQnViYmxlKHZhbHVlKSB7XG4gICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgJCh0aGlzKS5zdG9wUHJvcGFnYXRpb25GbGFnID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIEZhbHN5V2FzQXNzaWduZWRUb0NhbmNlbEJ1YmJsZS53YXJuKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RvcCBldmVudCBidWJibGluZyBhbmQgc3Vic2VxdWVudCBldmVudCBsaXN0ZW5lciBjYWxsaW5ncy5cbiAgICAgKiBAc2VlIGh0dHBzOi8vZG9tLnNwZWMud2hhdHdnLm9yZy8jZG9tLWV2ZW50LXN0b3BpbW1lZGlhdGVwcm9wYWdhdGlvblxuICAgICAqL1xuICAgIHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpIHtcbiAgICAgICAgY29uc3QgZGF0YSA9ICQodGhpcyk7XG4gICAgICAgIGRhdGEuc3RvcFByb3BhZ2F0aW9uRmxhZyA9IGRhdGEuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uRmxhZyA9IHRydWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGB0cnVlYCBpZiB0aGlzIGV2ZW50IHdpbGwgYnViYmxlLlxuICAgICAqIEBzZWUgaHR0cHM6Ly9kb20uc3BlYy53aGF0d2cub3JnLyNkb20tZXZlbnQtYnViYmxlc1xuICAgICAqL1xuICAgIGdldCBidWJibGVzKCkge1xuICAgICAgICByZXR1cm4gJCh0aGlzKS5idWJibGVzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBgdHJ1ZWAgaWYgdGhpcyBldmVudCBjYW4gYmUgY2FuY2VsZWQgYnkgdGhlIGBwcmV2ZW50RGVmYXVsdCgpYCBtZXRob2QuXG4gICAgICogQHNlZSBodHRwczovL2RvbS5zcGVjLndoYXR3Zy5vcmcvI2RvbS1ldmVudC1jYW5jZWxhYmxlXG4gICAgICovXG4gICAgZ2V0IGNhbmNlbGFibGUoKSB7XG4gICAgICAgIHJldHVybiAkKHRoaXMpLmNhbmNlbGFibGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGB0cnVlYCBpZiB0aGUgZGVmYXVsdCBiZWhhdmlvciB3aWxsIGFjdC5cbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgdGhlIGBkZWZhdWx0UHJldmVudGVkYCBwcm9lcHJ0eSBpbnN0ZWFkLlxuICAgICAqIEBzZWUgaHR0cHM6Ly9kb20uc3BlYy53aGF0d2cub3JnLyNkb20tZXZlbnQtcmV0dXJudmFsdWVcbiAgICAgKi9cbiAgICBnZXQgcmV0dXJuVmFsdWUoKSB7XG4gICAgICAgIHJldHVybiAhJCh0aGlzKS5jYW5jZWxlZEZsYWc7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbmNlbCB0aGUgZGVmYXVsdCBiZWhhdmlvciBpZiBgZmFsc2VgIGlzIHNldC5cbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgdGhlIGBwcmV2ZW50RGVmYXVsdCgpYCBtZXRob2QgaW5zdGVhZC5cbiAgICAgKiBAc2VlIGh0dHBzOi8vZG9tLnNwZWMud2hhdHdnLm9yZy8jZG9tLWV2ZW50LXJldHVybnZhbHVlXG4gICAgICovXG4gICAgc2V0IHJldHVyblZhbHVlKHZhbHVlKSB7XG4gICAgICAgIGlmICghdmFsdWUpIHtcbiAgICAgICAgICAgIHNldENhbmNlbEZsYWcoJCh0aGlzKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBUcnV0aHlXYXNBc3NpZ25lZFRvUmV0dXJuVmFsdWUud2FybigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbmNlbCB0aGUgZGVmYXVsdCBiZWhhdmlvci5cbiAgICAgKiBAc2VlIGh0dHBzOi8vZG9tLnNwZWMud2hhdHdnLm9yZy8jZG9tLWV2ZW50LXByZXZlbnRkZWZhdWx0XG4gICAgICovXG4gICAgcHJldmVudERlZmF1bHQoKSB7XG4gICAgICAgIHNldENhbmNlbEZsYWcoJCh0aGlzKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGB0cnVlYCBpZiB0aGUgZGVmYXVsdCBiZWhhdmlvciB3YXMgY2FuY2VsZWQuXG4gICAgICogQHNlZSBodHRwczovL2RvbS5zcGVjLndoYXR3Zy5vcmcvI2RvbS1ldmVudC1kZWZhdWx0cHJldmVudGVkXG4gICAgICovXG4gICAgZ2V0IGRlZmF1bHRQcmV2ZW50ZWQoKSB7XG4gICAgICAgIHJldHVybiAkKHRoaXMpLmNhbmNlbGVkRmxhZztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHNlZSBodHRwczovL2RvbS5zcGVjLndoYXR3Zy5vcmcvI2RvbS1ldmVudC1jb21wb3NlZFxuICAgICAqL1xuICAgIGdldCBjb21wb3NlZCgpIHtcbiAgICAgICAgcmV0dXJuICQodGhpcykuY29tcG9zZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBzZWUgaHR0cHM6Ly9kb20uc3BlYy53aGF0d2cub3JnLyNkb20tZXZlbnQtaXN0cnVzdGVkXG4gICAgICovXG4gICAgLy9pc3RhbmJ1bCBpZ25vcmUgbmV4dFxuICAgIGdldCBpc1RydXN0ZWQoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHNlZSBodHRwczovL2RvbS5zcGVjLndoYXR3Zy5vcmcvI2RvbS1ldmVudC10aW1lc3RhbXBcbiAgICAgKi9cbiAgICBnZXQgdGltZVN0YW1wKCkge1xuICAgICAgICByZXR1cm4gJCh0aGlzKS50aW1lU3RhbXA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIERvbid0IHVzZSB0aGlzIG1ldGhvZC4gVGhlIGNvbnN0cnVjdG9yIGRpZCBpbml0aWFsaXphdGlvbi5cbiAgICAgKi9cbiAgICBpbml0RXZlbnQodHlwZSwgYnViYmxlcyA9IGZhbHNlLCBjYW5jZWxhYmxlID0gZmFsc2UpIHtcbiAgICAgICAgY29uc3QgZGF0YSA9ICQodGhpcyk7XG4gICAgICAgIGlmIChkYXRhLmRpc3BhdGNoRmxhZykge1xuICAgICAgICAgICAgSW5pdEV2ZW50V2FzQ2FsbGVkV2hpbGVEaXNwYXRjaGluZy53YXJuKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaW50ZXJuYWxEYXRhTWFwLnNldCh0aGlzLCB7XG4gICAgICAgICAgICAuLi5kYXRhLFxuICAgICAgICAgICAgdHlwZTogU3RyaW5nKHR5cGUpLFxuICAgICAgICAgICAgYnViYmxlczogQm9vbGVhbihidWJibGVzKSxcbiAgICAgICAgICAgIGNhbmNlbGFibGU6IEJvb2xlYW4oY2FuY2VsYWJsZSksXG4gICAgICAgICAgICB0YXJnZXQ6IG51bGwsXG4gICAgICAgICAgICBjdXJyZW50VGFyZ2V0OiBudWxsLFxuICAgICAgICAgICAgc3RvcFByb3BhZ2F0aW9uRmxhZzogZmFsc2UsXG4gICAgICAgICAgICBzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb25GbGFnOiBmYWxzZSxcbiAgICAgICAgICAgIGNhbmNlbGVkRmxhZzogZmFsc2UsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBIZWxwZXJzXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuY29uc3QgTk9ORSA9IDA7XG5jb25zdCBDQVBUVVJJTkdfUEhBU0UgPSAxO1xuY29uc3QgQVRfVEFSR0VUID0gMjtcbmNvbnN0IEJVQkJMSU5HX1BIQVNFID0gMztcbi8qKlxuICogUHJpdmF0ZSBkYXRhIGZvciBldmVudCB3cmFwcGVycy5cbiAqL1xuY29uc3QgaW50ZXJuYWxEYXRhTWFwID0gbmV3IFdlYWtNYXAoKTtcbi8qKlxuICogR2V0IHByaXZhdGUgZGF0YS5cbiAqIEBwYXJhbSBldmVudCBUaGUgZXZlbnQgb2JqZWN0IHRvIGdldCBwcml2YXRlIGRhdGEuXG4gKiBAcGFyYW0gbmFtZSBUaGUgdmFyaWFibGUgbmFtZSB0byByZXBvcnQuXG4gKiBAcmV0dXJucyBUaGUgcHJpdmF0ZSBkYXRhIG9mIHRoZSBldmVudC5cbiAqL1xuZnVuY3Rpb24gJChldmVudCwgbmFtZSA9IFwidGhpc1wiKSB7XG4gICAgY29uc3QgcmV0diA9IGludGVybmFsRGF0YU1hcC5nZXQoZXZlbnQpO1xuICAgIGFzc2VydFR5cGUocmV0diAhPSBudWxsLCBcIiclcycgbXVzdCBiZSBhbiBvYmplY3QgdGhhdCBFdmVudCBjb25zdHJ1Y3RvciBjcmVhdGVkLCBidXQgZ290IGFub3RoZXIgb25lOiAlb1wiLCBuYW1lLCBldmVudCk7XG4gICAgcmV0dXJuIHJldHY7XG59XG4vKipcbiAqIGh0dHBzOi8vZG9tLnNwZWMud2hhdHdnLm9yZy8jc2V0LXRoZS1jYW5jZWxlZC1mbGFnXG4gKiBAcGFyYW0gZGF0YSBwcml2YXRlIGRhdGEuXG4gKi9cbmZ1bmN0aW9uIHNldENhbmNlbEZsYWcoZGF0YSkge1xuICAgIGlmIChkYXRhLmluUGFzc2l2ZUxpc3RlbmVyRmxhZykge1xuICAgICAgICBDYW5jZWxlZEluUGFzc2l2ZUxpc3RlbmVyLndhcm4oKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIWRhdGEuY2FuY2VsYWJsZSkge1xuICAgICAgICBOb25DYW5jZWxhYmxlRXZlbnRXYXNDYW5jZWxlZC53YXJuKCk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZGF0YS5jYW5jZWxlZEZsYWcgPSB0cnVlO1xufVxuLy8gU2V0IGVudW1lcmFibGVcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShFdmVudCwgXCJOT05FXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShFdmVudCwgXCJDQVBUVVJJTkdfUEhBU0VcIiwgeyBlbnVtZXJhYmxlOiB0cnVlIH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KEV2ZW50LCBcIkFUX1RBUkdFVFwiLCB7IGVudW1lcmFibGU6IHRydWUgfSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoRXZlbnQsIFwiQlVCQkxJTkdfUEhBU0VcIiwgeyBlbnVtZXJhYmxlOiB0cnVlIH0pO1xuY29uc3Qga2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKEV2ZW50LnByb3RvdHlwZSk7XG5mb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICBpZiAoa2V5c1tpXSA9PT0gXCJjb25zdHJ1Y3RvclwiKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRXZlbnQucHJvdG90eXBlLCBrZXlzW2ldLCB7IGVudW1lcmFibGU6IHRydWUgfSk7XG59XG4vLyBFbnN1cmUgYGV2ZW50IGluc3RhbmNlb2Ygd2luZG93LkV2ZW50YCBpcyBgdHJ1ZWAuXG5pZiAodHlwZW9mIEdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiB0eXBlb2YgR2xvYmFsLkV2ZW50ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKEV2ZW50LnByb3RvdHlwZSwgR2xvYmFsLkV2ZW50LnByb3RvdHlwZSk7XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgbmV3IEludmFsaWRTdGF0ZUVycm9yIGluc3RhbmNlLlxuICogQHBhcmFtIG1lc3NhZ2UgVGhlIGVycm9yIG1lc3NhZ2UuXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUludmFsaWRTdGF0ZUVycm9yKG1lc3NhZ2UpIHtcbiAgICBpZiAoR2xvYmFsLkRPTUV4Y2VwdGlvbikge1xuICAgICAgICByZXR1cm4gbmV3IEdsb2JhbC5ET01FeGNlcHRpb24obWVzc2FnZSwgXCJJbnZhbGlkU3RhdGVFcnJvclwiKTtcbiAgICB9XG4gICAgaWYgKERPTUV4Y2VwdGlvbiA9PSBudWxsKSB7XG4gICAgICAgIERPTUV4Y2VwdGlvbiA9IGNsYXNzIERPTUV4Y2VwdGlvbiBleHRlbmRzIEVycm9yIHtcbiAgICAgICAgICAgIGNvbnN0cnVjdG9yKG1zZykge1xuICAgICAgICAgICAgICAgIHN1cGVyKG1zZyk7XG4gICAgICAgICAgICAgICAgaWYgKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKSB7XG4gICAgICAgICAgICAgICAgICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIERPTUV4Y2VwdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNsYXNzLW1ldGhvZHMtdXNlLXRoaXNcbiAgICAgICAgICAgIGdldCBjb2RlKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAxMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjbGFzcy1tZXRob2RzLXVzZS10aGlzXG4gICAgICAgICAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJJbnZhbGlkU3RhdGVFcnJvclwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhET01FeGNlcHRpb24ucHJvdG90eXBlLCB7XG4gICAgICAgICAgICBjb2RlOiB7IGVudW1lcmFibGU6IHRydWUgfSxcbiAgICAgICAgICAgIG5hbWU6IHsgZW51bWVyYWJsZTogdHJ1ZSB9LFxuICAgICAgICB9KTtcbiAgICAgICAgZGVmaW5lRXJyb3JDb2RlUHJvcGVydGllcyhET01FeGNlcHRpb24pO1xuICAgICAgICBkZWZpbmVFcnJvckNvZGVQcm9wZXJ0aWVzKERPTUV4Y2VwdGlvbi5wcm90b3R5cGUpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IERPTUV4Y2VwdGlvbihtZXNzYWdlKTtcbn1cbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBIZWxwZXJzXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxubGV0IERPTUV4Y2VwdGlvbjtcbmNvbnN0IEVycm9yQ29kZU1hcCA9IHtcbiAgICBJTkRFWF9TSVpFX0VSUjogMSxcbiAgICBET01TVFJJTkdfU0laRV9FUlI6IDIsXG4gICAgSElFUkFSQ0hZX1JFUVVFU1RfRVJSOiAzLFxuICAgIFdST05HX0RPQ1VNRU5UX0VSUjogNCxcbiAgICBJTlZBTElEX0NIQVJBQ1RFUl9FUlI6IDUsXG4gICAgTk9fREFUQV9BTExPV0VEX0VSUjogNixcbiAgICBOT19NT0RJRklDQVRJT05fQUxMT1dFRF9FUlI6IDcsXG4gICAgTk9UX0ZPVU5EX0VSUjogOCxcbiAgICBOT1RfU1VQUE9SVEVEX0VSUjogOSxcbiAgICBJTlVTRV9BVFRSSUJVVEVfRVJSOiAxMCxcbiAgICBJTlZBTElEX1NUQVRFX0VSUjogMTEsXG4gICAgU1lOVEFYX0VSUjogMTIsXG4gICAgSU5WQUxJRF9NT0RJRklDQVRJT05fRVJSOiAxMyxcbiAgICBOQU1FU1BBQ0VfRVJSOiAxNCxcbiAgICBJTlZBTElEX0FDQ0VTU19FUlI6IDE1LFxuICAgIFZBTElEQVRJT05fRVJSOiAxNixcbiAgICBUWVBFX01JU01BVENIX0VSUjogMTcsXG4gICAgU0VDVVJJVFlfRVJSOiAxOCxcbiAgICBORVRXT1JLX0VSUjogMTksXG4gICAgQUJPUlRfRVJSOiAyMCxcbiAgICBVUkxfTUlTTUFUQ0hfRVJSOiAyMSxcbiAgICBRVU9UQV9FWENFRURFRF9FUlI6IDIyLFxuICAgIFRJTUVPVVRfRVJSOiAyMyxcbiAgICBJTlZBTElEX05PREVfVFlQRV9FUlI6IDI0LFxuICAgIERBVEFfQ0xPTkVfRVJSOiAyNSxcbn07XG5mdW5jdGlvbiBkZWZpbmVFcnJvckNvZGVQcm9wZXJ0aWVzKG9iaikge1xuICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhFcnJvckNvZGVNYXApO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSkge1xuICAgICAgICBjb25zdCBrZXkgPSBrZXlzW2ldO1xuICAgICAgICBjb25zdCB2YWx1ZSA9IEVycm9yQ29kZU1hcFtrZXldO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcbiAgICAgICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEFuIGltcGxlbWVudGF0aW9uIG9mIGBFdmVudGAgaW50ZXJmYWNlLCB0aGF0IHdyYXBzIGEgZ2l2ZW4gZXZlbnQgb2JqZWN0LlxuICogVGhpcyBjbGFzcyBjb250cm9scyB0aGUgaW50ZXJuYWwgc3RhdGUgb2YgYEV2ZW50YC5cbiAqIEBzZWUgaHR0cHM6Ly9kb20uc3BlYy53aGF0d2cub3JnLyNpbnRlcmZhY2UtZXZlbnRcbiAqL1xuY2xhc3MgRXZlbnRXcmFwcGVyIGV4dGVuZHMgRXZlbnQge1xuICAgIC8qKlxuICAgICAqIFdyYXAgYSBnaXZlbiBldmVudCBvYmplY3QgdG8gY29udHJvbCBzdGF0ZXMuXG4gICAgICogQHBhcmFtIGV2ZW50IFRoZSBldmVudC1saWtlIG9iamVjdCB0byB3cmFwLlxuICAgICAqL1xuICAgIHN0YXRpYyB3cmFwKGV2ZW50KSB7XG4gICAgICAgIHJldHVybiBuZXcgKGdldFdyYXBwZXJDbGFzc09mKGV2ZW50KSkoZXZlbnQpO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihldmVudCkge1xuICAgICAgICBzdXBlcihldmVudC50eXBlLCB7XG4gICAgICAgICAgICBidWJibGVzOiBldmVudC5idWJibGVzLFxuICAgICAgICAgICAgY2FuY2VsYWJsZTogZXZlbnQuY2FuY2VsYWJsZSxcbiAgICAgICAgICAgIGNvbXBvc2VkOiBldmVudC5jb21wb3NlZCxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChldmVudC5jYW5jZWxCdWJibGUpIHtcbiAgICAgICAgICAgIHN1cGVyLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChldmVudC5kZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICAgICAgICBzdXBlci5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgICAgIGludGVybmFsRGF0YU1hcCQxLnNldCh0aGlzLCB7IG9yaWdpbmFsOiBldmVudCB9KTtcbiAgICAgICAgLy8gRGVmaW5lIGFjY2Vzc29yc1xuICAgICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoZXZlbnQpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGNvbnN0IGtleSA9IGtleXNbaV07XG4gICAgICAgICAgICBpZiAoIShrZXkgaW4gdGhpcykpIHtcbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywga2V5LCBkZWZpbmVSZWRpcmVjdERlc2NyaXB0b3IoZXZlbnQsIGtleSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHN0b3BQcm9wYWdhdGlvbigpIHtcbiAgICAgICAgc3VwZXIuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIGNvbnN0IHsgb3JpZ2luYWwgfSA9ICQkMSh0aGlzKTtcbiAgICAgICAgaWYgKFwic3RvcFByb3BhZ2F0aW9uXCIgaW4gb3JpZ2luYWwpIHtcbiAgICAgICAgICAgIG9yaWdpbmFsLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBjYW5jZWxCdWJibGUoKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5jYW5jZWxCdWJibGU7XG4gICAgfVxuICAgIHNldCBjYW5jZWxCdWJibGUodmFsdWUpIHtcbiAgICAgICAgc3VwZXIuY2FuY2VsQnViYmxlID0gdmFsdWU7XG4gICAgICAgIGNvbnN0IHsgb3JpZ2luYWwgfSA9ICQkMSh0aGlzKTtcbiAgICAgICAgaWYgKFwiY2FuY2VsQnViYmxlXCIgaW4gb3JpZ2luYWwpIHtcbiAgICAgICAgICAgIG9yaWdpbmFsLmNhbmNlbEJ1YmJsZSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpIHtcbiAgICAgICAgc3VwZXIuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG4gICAgICAgIGNvbnN0IHsgb3JpZ2luYWwgfSA9ICQkMSh0aGlzKTtcbiAgICAgICAgaWYgKFwic3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uXCIgaW4gb3JpZ2luYWwpIHtcbiAgICAgICAgICAgIG9yaWdpbmFsLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCByZXR1cm5WYWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLnJldHVyblZhbHVlO1xuICAgIH1cbiAgICBzZXQgcmV0dXJuVmFsdWUodmFsdWUpIHtcbiAgICAgICAgc3VwZXIucmV0dXJuVmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgY29uc3QgeyBvcmlnaW5hbCB9ID0gJCQxKHRoaXMpO1xuICAgICAgICBpZiAoXCJyZXR1cm5WYWx1ZVwiIGluIG9yaWdpbmFsKSB7XG4gICAgICAgICAgICBvcmlnaW5hbC5yZXR1cm5WYWx1ZSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHByZXZlbnREZWZhdWx0KCkge1xuICAgICAgICBzdXBlci5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBjb25zdCB7IG9yaWdpbmFsIH0gPSAkJDEodGhpcyk7XG4gICAgICAgIGlmIChcInByZXZlbnREZWZhdWx0XCIgaW4gb3JpZ2luYWwpIHtcbiAgICAgICAgICAgIG9yaWdpbmFsLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IHRpbWVTdGFtcCgpIHtcbiAgICAgICAgY29uc3QgeyBvcmlnaW5hbCB9ID0gJCQxKHRoaXMpO1xuICAgICAgICBpZiAoXCJ0aW1lU3RhbXBcIiBpbiBvcmlnaW5hbCkge1xuICAgICAgICAgICAgcmV0dXJuIG9yaWdpbmFsLnRpbWVTdGFtcDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3VwZXIudGltZVN0YW1wO1xuICAgIH1cbn1cbi8qKlxuICogUHJpdmF0ZSBkYXRhIGZvciBldmVudCB3cmFwcGVycy5cbiAqL1xuY29uc3QgaW50ZXJuYWxEYXRhTWFwJDEgPSBuZXcgV2Vha01hcCgpO1xuLyoqXG4gKiBHZXQgcHJpdmF0ZSBkYXRhLlxuICogQHBhcmFtIGV2ZW50IFRoZSBldmVudCBvYmplY3QgdG8gZ2V0IHByaXZhdGUgZGF0YS5cbiAqIEByZXR1cm5zIFRoZSBwcml2YXRlIGRhdGEgb2YgdGhlIGV2ZW50LlxuICovXG5mdW5jdGlvbiAkJDEoZXZlbnQpIHtcbiAgICBjb25zdCByZXR2ID0gaW50ZXJuYWxEYXRhTWFwJDEuZ2V0KGV2ZW50KTtcbiAgICBhc3NlcnRUeXBlKHJldHYgIT0gbnVsbCwgXCIndGhpcycgaXMgZXhwZWN0ZWQgYW4gRXZlbnQgb2JqZWN0LCBidXQgZ290XCIsIGV2ZW50KTtcbiAgICByZXR1cm4gcmV0djtcbn1cbi8qKlxuICogQ2FjaGUgZm9yIHdyYXBwZXIgY2xhc3Nlcy5cbiAqIEB0eXBlIHtXZWFrTWFwPE9iamVjdCwgRnVuY3Rpb24+fVxuICogQHByaXZhdGVcbiAqL1xuY29uc3Qgd3JhcHBlckNsYXNzQ2FjaGUgPSBuZXcgV2Vha01hcCgpO1xuLy8gTWFrZSBhc3NvY2lhdGlvbiBmb3Igd3JhcHBlcnMuXG53cmFwcGVyQ2xhc3NDYWNoZS5zZXQoT2JqZWN0LnByb3RvdHlwZSwgRXZlbnRXcmFwcGVyKTtcbmlmICh0eXBlb2YgR2xvYmFsICE9PSBcInVuZGVmaW5lZFwiICYmIHR5cGVvZiBHbG9iYWwuRXZlbnQgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICB3cmFwcGVyQ2xhc3NDYWNoZS5zZXQoR2xvYmFsLkV2ZW50LnByb3RvdHlwZSwgRXZlbnRXcmFwcGVyKTtcbn1cbi8qKlxuICogR2V0IHRoZSB3cmFwcGVyIGNsYXNzIG9mIGEgZ2l2ZW4gcHJvdG90eXBlLlxuICogQHBhcmFtIG9yaWdpbmFsRXZlbnQgVGhlIGV2ZW50IG9iamVjdCB0byB3cmFwLlxuICovXG5mdW5jdGlvbiBnZXRXcmFwcGVyQ2xhc3NPZihvcmlnaW5hbEV2ZW50KSB7XG4gICAgY29uc3QgcHJvdG90eXBlID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9yaWdpbmFsRXZlbnQpO1xuICAgIGlmIChwcm90b3R5cGUgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gRXZlbnRXcmFwcGVyO1xuICAgIH1cbiAgICBsZXQgd3JhcHBlciA9IHdyYXBwZXJDbGFzc0NhY2hlLmdldChwcm90b3R5cGUpO1xuICAgIGlmICh3cmFwcGVyID09IG51bGwpIHtcbiAgICAgICAgd3JhcHBlciA9IGRlZmluZVdyYXBwZXIoZ2V0V3JhcHBlckNsYXNzT2YocHJvdG90eXBlKSwgcHJvdG90eXBlKTtcbiAgICAgICAgd3JhcHBlckNsYXNzQ2FjaGUuc2V0KHByb3RvdHlwZSwgd3JhcHBlcik7XG4gICAgfVxuICAgIHJldHVybiB3cmFwcGVyO1xufVxuLyoqXG4gKiBEZWZpbmUgbmV3IHdyYXBwZXIgY2xhc3MuXG4gKiBAcGFyYW0gQmFzZUV2ZW50V3JhcHBlciBUaGUgYmFzZSB3cmFwcGVyIGNsYXNzLlxuICogQHBhcmFtIG9yaWdpbmFsUHJvdG90eXBlIFRoZSBwcm90b3R5cGUgb2YgdGhlIG9yaWdpbmFsIGV2ZW50LlxuICovXG5mdW5jdGlvbiBkZWZpbmVXcmFwcGVyKEJhc2VFdmVudFdyYXBwZXIsIG9yaWdpbmFsUHJvdG90eXBlKSB7XG4gICAgY2xhc3MgQ3VzdG9tRXZlbnRXcmFwcGVyIGV4dGVuZHMgQmFzZUV2ZW50V3JhcHBlciB7XG4gICAgfVxuICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhvcmlnaW5hbFByb3RvdHlwZSk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDdXN0b21FdmVudFdyYXBwZXIucHJvdG90eXBlLCBrZXlzW2ldLCBkZWZpbmVSZWRpcmVjdERlc2NyaXB0b3Iob3JpZ2luYWxQcm90b3R5cGUsIGtleXNbaV0pKTtcbiAgICB9XG4gICAgcmV0dXJuIEN1c3RvbUV2ZW50V3JhcHBlcjtcbn1cbi8qKlxuICogR2V0IHRoZSBwcm9wZXJ0eSBkZXNjcmlwdG9yIHRvIHJlZGlyZWN0IGEgZ2l2ZW4gcHJvcGVydHkuXG4gKi9cbmZ1bmN0aW9uIGRlZmluZVJlZGlyZWN0RGVzY3JpcHRvcihvYmosIGtleSkge1xuICAgIGNvbnN0IGQgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KTtcbiAgICByZXR1cm4ge1xuICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICBjb25zdCBvcmlnaW5hbCA9ICQkMSh0aGlzKS5vcmlnaW5hbDtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gb3JpZ2luYWxba2V5XTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZS5iaW5kKG9yaWdpbmFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0KHZhbHVlKSB7XG4gICAgICAgICAgICBjb25zdCBvcmlnaW5hbCA9ICQkMSh0aGlzKS5vcmlnaW5hbDtcbiAgICAgICAgICAgIG9yaWdpbmFsW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgY29uZmlndXJhYmxlOiBkLmNvbmZpZ3VyYWJsZSxcbiAgICAgICAgZW51bWVyYWJsZTogZC5lbnVtZXJhYmxlLFxuICAgIH07XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgbmV3IGxpc3RlbmVyLlxuICogQHBhcmFtIGNhbGxiYWNrIFRoZSBjYWxsYmFjayBmdW5jdGlvbi5cbiAqIEBwYXJhbSBjYXB0dXJlIFRoZSBjYXB0dXJlIGZsYWcuXG4gKiBAcGFyYW0gcGFzc2l2ZSBUaGUgcGFzc2l2ZSBmbGFnLlxuICogQHBhcmFtIG9uY2UgVGhlIG9uY2UgZmxhZy5cbiAqIEBwYXJhbSBzaWduYWwgVGhlIGFib3J0IHNpZ25hbC5cbiAqIEBwYXJhbSBzaWduYWxMaXN0ZW5lciBUaGUgYWJvcnQgZXZlbnQgbGlzdGVuZXIgZm9yIHRoZSBhYm9ydCBzaWduYWwuXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUxpc3RlbmVyKGNhbGxiYWNrLCBjYXB0dXJlLCBwYXNzaXZlLCBvbmNlLCBzaWduYWwsIHNpZ25hbExpc3RlbmVyKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY2FsbGJhY2ssXG4gICAgICAgIGZsYWdzOiAoY2FwdHVyZSA/IDEgLyogQ2FwdHVyZSAqLyA6IDApIHxcbiAgICAgICAgICAgIChwYXNzaXZlID8gMiAvKiBQYXNzaXZlICovIDogMCkgfFxuICAgICAgICAgICAgKG9uY2UgPyA0IC8qIE9uY2UgKi8gOiAwKSxcbiAgICAgICAgc2lnbmFsLFxuICAgICAgICBzaWduYWxMaXN0ZW5lcixcbiAgICB9O1xufVxuLyoqXG4gKiBTZXQgdGhlIGByZW1vdmVkYCBmbGFnIHRvIHRoZSBnaXZlbiBsaXN0ZW5lci5cbiAqIEBwYXJhbSBsaXN0ZW5lciBUaGUgbGlzdGVuZXIgdG8gY2hlY2suXG4gKi9cbmZ1bmN0aW9uIHNldFJlbW92ZWQobGlzdGVuZXIpIHtcbiAgICBsaXN0ZW5lci5mbGFncyB8PSA4IC8qIFJlbW92ZWQgKi87XG59XG4vKipcbiAqIENoZWNrIGlmIHRoZSBnaXZlbiBsaXN0ZW5lciBoYXMgdGhlIGBjYXB0dXJlYCBmbGFnIG9yIG5vdC5cbiAqIEBwYXJhbSBsaXN0ZW5lciBUaGUgbGlzdGVuZXIgdG8gY2hlY2suXG4gKi9cbmZ1bmN0aW9uIGlzQ2FwdHVyZShsaXN0ZW5lcikge1xuICAgIHJldHVybiAobGlzdGVuZXIuZmxhZ3MgJiAxIC8qIENhcHR1cmUgKi8pID09PSAxIC8qIENhcHR1cmUgKi87XG59XG4vKipcbiAqIENoZWNrIGlmIHRoZSBnaXZlbiBsaXN0ZW5lciBoYXMgdGhlIGBwYXNzaXZlYCBmbGFnIG9yIG5vdC5cbiAqIEBwYXJhbSBsaXN0ZW5lciBUaGUgbGlzdGVuZXIgdG8gY2hlY2suXG4gKi9cbmZ1bmN0aW9uIGlzUGFzc2l2ZShsaXN0ZW5lcikge1xuICAgIHJldHVybiAobGlzdGVuZXIuZmxhZ3MgJiAyIC8qIFBhc3NpdmUgKi8pID09PSAyIC8qIFBhc3NpdmUgKi87XG59XG4vKipcbiAqIENoZWNrIGlmIHRoZSBnaXZlbiBsaXN0ZW5lciBoYXMgdGhlIGBvbmNlYCBmbGFnIG9yIG5vdC5cbiAqIEBwYXJhbSBsaXN0ZW5lciBUaGUgbGlzdGVuZXIgdG8gY2hlY2suXG4gKi9cbmZ1bmN0aW9uIGlzT25jZShsaXN0ZW5lcikge1xuICAgIHJldHVybiAobGlzdGVuZXIuZmxhZ3MgJiA0IC8qIE9uY2UgKi8pID09PSA0IC8qIE9uY2UgKi87XG59XG4vKipcbiAqIENoZWNrIGlmIHRoZSBnaXZlbiBsaXN0ZW5lciBoYXMgdGhlIGByZW1vdmVkYCBmbGFnIG9yIG5vdC5cbiAqIEBwYXJhbSBsaXN0ZW5lciBUaGUgbGlzdGVuZXIgdG8gY2hlY2suXG4gKi9cbmZ1bmN0aW9uIGlzUmVtb3ZlZChsaXN0ZW5lcikge1xuICAgIHJldHVybiAobGlzdGVuZXIuZmxhZ3MgJiA4IC8qIFJlbW92ZWQgKi8pID09PSA4IC8qIFJlbW92ZWQgKi87XG59XG4vKipcbiAqIENhbGwgYW4gZXZlbnQgbGlzdGVuZXIuXG4gKiBAcGFyYW0gbGlzdGVuZXIgVGhlIGxpc3RlbmVyIHRvIGNhbGwuXG4gKiBAcGFyYW0gdGFyZ2V0IFRoZSBldmVudCB0YXJnZXQgb2JqZWN0IGZvciBgdGhpc0FyZ2AuXG4gKiBAcGFyYW0gZXZlbnQgVGhlIGV2ZW50IG9iamVjdCBmb3IgdGhlIGZpcnN0IGFyZ3VtZW50LlxuICogQHBhcmFtIGF0dHJpYnV0ZSBgdHJ1ZWAgaWYgdGhpcyBjYWxsYmFjayBpcyBhbiBldmVudCBhdHRyaWJ1dGUgaGFuZGxlci5cbiAqL1xuZnVuY3Rpb24gaW52b2tlQ2FsbGJhY2soeyBjYWxsYmFjayB9LCB0YXJnZXQsIGV2ZW50KSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICBjYWxsYmFjay5jYWxsKHRhcmdldCwgZXZlbnQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBjYWxsYmFjay5oYW5kbGVFdmVudCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICBjYWxsYmFjay5oYW5kbGVFdmVudChldmVudCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2F0Y2ggKHRocm93bkVycm9yKSB7XG4gICAgICAgIHJlcG9ydEVycm9yKHRocm93bkVycm9yKTtcbiAgICB9XG59XG5cbi8qKlxuICogRmluZCB0aGUgaW5kZXggb2YgZ2l2ZW4gbGlzdGVuZXIuXG4gKiBUaGlzIHJldHVybnMgYC0xYCBpZiBub3QgZm91bmQuXG4gKiBAcGFyYW0gbGlzdCBUaGUgbGlzdGVuZXIgbGlzdC5cbiAqIEBwYXJhbSBjYWxsYmFjayBUaGUgY2FsbGJhY2sgZnVuY3Rpb24gdG8gZmluZC5cbiAqIEBwYXJhbSBjYXB0dXJlIFRoZSBjYXB0dXJlIGZsYWcgdG8gZmluZC5cbiAqL1xuZnVuY3Rpb24gZmluZEluZGV4T2ZMaXN0ZW5lcih7IGxpc3RlbmVycyB9LCBjYWxsYmFjaywgY2FwdHVyZSkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGlzdGVuZXJzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGlmIChsaXN0ZW5lcnNbaV0uY2FsbGJhY2sgPT09IGNhbGxiYWNrICYmXG4gICAgICAgICAgICBpc0NhcHR1cmUobGlzdGVuZXJzW2ldKSA9PT0gY2FwdHVyZSkge1xuICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIC0xO1xufVxuLyoqXG4gKiBBZGQgdGhlIGdpdmVuIGxpc3RlbmVyLlxuICogRG9lcyBjb3B5LW9uLXdyaXRlIGlmIG5lZWRlZC5cbiAqIEBwYXJhbSBsaXN0IFRoZSBsaXN0ZW5lciBsaXN0LlxuICogQHBhcmFtIGNhbGxiYWNrIFRoZSBjYWxsYmFjayBmdW5jdGlvbi5cbiAqIEBwYXJhbSBjYXB0dXJlIFRoZSBjYXB0dXJlIGZsYWcuXG4gKiBAcGFyYW0gcGFzc2l2ZSBUaGUgcGFzc2l2ZSBmbGFnLlxuICogQHBhcmFtIG9uY2UgVGhlIG9uY2UgZmxhZy5cbiAqIEBwYXJhbSBzaWduYWwgVGhlIGFib3J0IHNpZ25hbC5cbiAqL1xuZnVuY3Rpb24gYWRkTGlzdGVuZXIobGlzdCwgY2FsbGJhY2ssIGNhcHR1cmUsIHBhc3NpdmUsIG9uY2UsIHNpZ25hbCkge1xuICAgIGxldCBzaWduYWxMaXN0ZW5lcjtcbiAgICBpZiAoc2lnbmFsKSB7XG4gICAgICAgIHNpZ25hbExpc3RlbmVyID0gcmVtb3ZlTGlzdGVuZXIuYmluZChudWxsLCBsaXN0LCBjYWxsYmFjaywgY2FwdHVyZSk7XG4gICAgICAgIHNpZ25hbC5hZGRFdmVudExpc3RlbmVyKFwiYWJvcnRcIiwgc2lnbmFsTGlzdGVuZXIpO1xuICAgIH1cbiAgICBjb25zdCBsaXN0ZW5lciA9IGNyZWF0ZUxpc3RlbmVyKGNhbGxiYWNrLCBjYXB0dXJlLCBwYXNzaXZlLCBvbmNlLCBzaWduYWwsIHNpZ25hbExpc3RlbmVyKTtcbiAgICBpZiAobGlzdC5jb3cpIHtcbiAgICAgICAgbGlzdC5jb3cgPSBmYWxzZTtcbiAgICAgICAgbGlzdC5saXN0ZW5lcnMgPSBbLi4ubGlzdC5saXN0ZW5lcnMsIGxpc3RlbmVyXTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGxpc3QubGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xuICAgIH1cbiAgICByZXR1cm4gbGlzdGVuZXI7XG59XG4vKipcbiAqIFJlbW92ZSBhIGxpc3RlbmVyLlxuICogQHBhcmFtIGxpc3QgVGhlIGxpc3RlbmVyIGxpc3QuXG4gKiBAcGFyYW0gY2FsbGJhY2sgVGhlIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIGZpbmQuXG4gKiBAcGFyYW0gY2FwdHVyZSBUaGUgY2FwdHVyZSBmbGFnIHRvIGZpbmQuXG4gKiBAcmV0dXJucyBgdHJ1ZWAgaWYgaXQgbXV0YXRlZCB0aGUgbGlzdCBkaXJlY3RseS5cbiAqL1xuZnVuY3Rpb24gcmVtb3ZlTGlzdGVuZXIobGlzdCwgY2FsbGJhY2ssIGNhcHR1cmUpIHtcbiAgICBjb25zdCBpbmRleCA9IGZpbmRJbmRleE9mTGlzdGVuZXIobGlzdCwgY2FsbGJhY2ssIGNhcHR1cmUpO1xuICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgcmV0dXJuIHJlbW92ZUxpc3RlbmVyQXQobGlzdCwgaW5kZXgpO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG4vKipcbiAqIFJlbW92ZSBhIGxpc3RlbmVyLlxuICogQHBhcmFtIGxpc3QgVGhlIGxpc3RlbmVyIGxpc3QuXG4gKiBAcGFyYW0gaW5kZXggVGhlIGluZGV4IG9mIHRoZSB0YXJnZXQgbGlzdGVuZXIuXG4gKiBAcGFyYW0gZGlzYWJsZUNvdyBEaXNhYmxlIGNvcHktb24td3JpdGUgaWYgdHJ1ZS5cbiAqIEByZXR1cm5zIGB0cnVlYCBpZiBpdCBtdXRhdGVkIHRoZSBgbGlzdGVuZXJzYCBhcnJheSBkaXJlY3RseS5cbiAqL1xuZnVuY3Rpb24gcmVtb3ZlTGlzdGVuZXJBdChsaXN0LCBpbmRleCwgZGlzYWJsZUNvdyA9IGZhbHNlKSB7XG4gICAgY29uc3QgbGlzdGVuZXIgPSBsaXN0Lmxpc3RlbmVyc1tpbmRleF07XG4gICAgLy8gU2V0IHRoZSByZW1vdmVkIGZsYWcuXG4gICAgc2V0UmVtb3ZlZChsaXN0ZW5lcik7XG4gICAgLy8gRGlzcG9zZSB0aGUgYWJvcnQgc2lnbmFsIGxpc3RlbmVyIGlmIGV4aXN0cy5cbiAgICBpZiAobGlzdGVuZXIuc2lnbmFsKSB7XG4gICAgICAgIGxpc3RlbmVyLnNpZ25hbC5yZW1vdmVFdmVudExpc3RlbmVyKFwiYWJvcnRcIiwgbGlzdGVuZXIuc2lnbmFsTGlzdGVuZXIpO1xuICAgIH1cbiAgICAvLyBSZW1vdmUgaXQgZnJvbSB0aGUgYXJyYXkuXG4gICAgaWYgKGxpc3QuY293ICYmICFkaXNhYmxlQ293KSB7XG4gICAgICAgIGxpc3QuY293ID0gZmFsc2U7XG4gICAgICAgIGxpc3QubGlzdGVuZXJzID0gbGlzdC5saXN0ZW5lcnMuZmlsdGVyKChfLCBpKSA9PiBpICE9PSBpbmRleCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgbGlzdC5saXN0ZW5lcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgYExpc3RlbmVyTGlzdE1hcGAgb2JqZWN0LlxuICovXG5mdW5jdGlvbiBjcmVhdGVMaXN0ZW5lckxpc3RNYXAoKSB7XG4gICAgcmV0dXJuIE9iamVjdC5jcmVhdGUobnVsbCk7XG59XG4vKipcbiAqIEdldCB0aGUgbGlzdGVuZXIgbGlzdCBvZiB0aGUgZ2l2ZW4gdHlwZS5cbiAqIElmIHRoZSBsaXN0ZW5lciBsaXN0IGhhcyBub3QgYmVlbiBpbml0aWFsaXplZCwgaW5pdGlhbGl6ZSBhbmQgcmV0dXJuIGl0LlxuICogQHBhcmFtIGxpc3RlbmVyTWFwIFRoZSBsaXN0ZW5lciBsaXN0IG1hcC5cbiAqIEBwYXJhbSB0eXBlIFRoZSBldmVudCB0eXBlIHRvIGdldC5cbiAqL1xuZnVuY3Rpb24gZW5zdXJlTGlzdGVuZXJMaXN0KGxpc3RlbmVyTWFwLCB0eXBlKSB7XG4gICAgdmFyIF9hO1xuICAgIHJldHVybiAoKF9hID0gbGlzdGVuZXJNYXBbdHlwZV0pICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IChsaXN0ZW5lck1hcFt0eXBlXSA9IHtcbiAgICAgICAgYXR0ckNhbGxiYWNrOiB1bmRlZmluZWQsXG4gICAgICAgIGF0dHJMaXN0ZW5lcjogdW5kZWZpbmVkLFxuICAgICAgICBjb3c6IGZhbHNlLFxuICAgICAgICBsaXN0ZW5lcnM6IFtdLFxuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgYEV2ZW50VGFyZ2V0YCBpbnRlcmZhY2UuXG4gKiBAc2VlIGh0dHBzOi8vZG9tLnNwZWMud2hhdHdnLm9yZy8jZXZlbnR0YXJnZXRcbiAqL1xuY2xhc3MgRXZlbnRUYXJnZXQge1xuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgdGhpcyBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgaW50ZXJuYWxEYXRhTWFwJDIuc2V0KHRoaXMsIGNyZWF0ZUxpc3RlbmVyTGlzdE1hcCgpKTtcbiAgICB9XG4gICAgLy8gSW1wbGVtZW50YXRpb25cbiAgICBhZGRFdmVudExpc3RlbmVyKHR5cGUwLCBjYWxsYmFjazAsIG9wdGlvbnMwKSB7XG4gICAgICAgIGNvbnN0IGxpc3RlbmVyTWFwID0gJCQyKHRoaXMpO1xuICAgICAgICBjb25zdCB7IGNhbGxiYWNrLCBjYXB0dXJlLCBvbmNlLCBwYXNzaXZlLCBzaWduYWwsIHR5cGUsIH0gPSBub3JtYWxpemVBZGRPcHRpb25zKHR5cGUwLCBjYWxsYmFjazAsIG9wdGlvbnMwKTtcbiAgICAgICAgaWYgKGNhbGxiYWNrID09IG51bGwgfHwgKHNpZ25hbCA9PT0gbnVsbCB8fCBzaWduYWwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNpZ25hbC5hYm9ydGVkKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxpc3QgPSBlbnN1cmVMaXN0ZW5lckxpc3QobGlzdGVuZXJNYXAsIHR5cGUpO1xuICAgICAgICAvLyBGaW5kIGV4aXN0aW5nIGxpc3RlbmVyLlxuICAgICAgICBjb25zdCBpID0gZmluZEluZGV4T2ZMaXN0ZW5lcihsaXN0LCBjYWxsYmFjaywgY2FwdHVyZSk7XG4gICAgICAgIGlmIChpICE9PSAtMSkge1xuICAgICAgICAgICAgd2FybkR1cGxpY2F0ZShsaXN0Lmxpc3RlbmVyc1tpXSwgcGFzc2l2ZSwgb25jZSwgc2lnbmFsKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBBZGQgdGhlIG5ldyBsaXN0ZW5lci5cbiAgICAgICAgYWRkTGlzdGVuZXIobGlzdCwgY2FsbGJhY2ssIGNhcHR1cmUsIHBhc3NpdmUsIG9uY2UsIHNpZ25hbCk7XG4gICAgfVxuICAgIC8vIEltcGxlbWVudGF0aW9uXG4gICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlMCwgY2FsbGJhY2swLCBvcHRpb25zMCkge1xuICAgICAgICBjb25zdCBsaXN0ZW5lck1hcCA9ICQkMih0aGlzKTtcbiAgICAgICAgY29uc3QgeyBjYWxsYmFjaywgY2FwdHVyZSwgdHlwZSB9ID0gbm9ybWFsaXplT3B0aW9ucyh0eXBlMCwgY2FsbGJhY2swLCBvcHRpb25zMCk7XG4gICAgICAgIGNvbnN0IGxpc3QgPSBsaXN0ZW5lck1hcFt0eXBlXTtcbiAgICAgICAgaWYgKGNhbGxiYWNrICE9IG51bGwgJiYgbGlzdCkge1xuICAgICAgICAgICAgcmVtb3ZlTGlzdGVuZXIobGlzdCwgY2FsbGJhY2ssIGNhcHR1cmUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIEltcGxlbWVudGF0aW9uXG4gICAgZGlzcGF0Y2hFdmVudChlKSB7XG4gICAgICAgIGNvbnN0IGxpc3QgPSAkJDIodGhpcylbU3RyaW5nKGUudHlwZSldO1xuICAgICAgICBpZiAobGlzdCA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBldmVudCA9IGUgaW5zdGFuY2VvZiBFdmVudCA/IGUgOiBFdmVudFdyYXBwZXIud3JhcChlKTtcbiAgICAgICAgY29uc3QgZXZlbnREYXRhID0gJChldmVudCwgXCJldmVudFwiKTtcbiAgICAgICAgaWYgKGV2ZW50RGF0YS5kaXNwYXRjaEZsYWcpIHtcbiAgICAgICAgICAgIHRocm93IGNyZWF0ZUludmFsaWRTdGF0ZUVycm9yKFwiVGhpcyBldmVudCBoYXMgYmVlbiBpbiBkaXNwYXRjaGluZy5cIik7XG4gICAgICAgIH1cbiAgICAgICAgZXZlbnREYXRhLmRpc3BhdGNoRmxhZyA9IHRydWU7XG4gICAgICAgIGV2ZW50RGF0YS50YXJnZXQgPSBldmVudERhdGEuY3VycmVudFRhcmdldCA9IHRoaXM7XG4gICAgICAgIGlmICghZXZlbnREYXRhLnN0b3BQcm9wYWdhdGlvbkZsYWcpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgY293LCBsaXN0ZW5lcnMgfSA9IGxpc3Q7XG4gICAgICAgICAgICAvLyBTZXQgY29weS1vbi13cml0ZSBmbGFnLlxuICAgICAgICAgICAgbGlzdC5jb3cgPSB0cnVlO1xuICAgICAgICAgICAgLy8gQ2FsbCBsaXN0ZW5lcnMuXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpc3RlbmVycy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxpc3RlbmVyID0gbGlzdGVuZXJzW2ldO1xuICAgICAgICAgICAgICAgIC8vIFNraXAgaWYgcmVtb3ZlZC5cbiAgICAgICAgICAgICAgICBpZiAoaXNSZW1vdmVkKGxpc3RlbmVyKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHRoaXMgbGlzdGVuZXIgaWYgaGFzIHRoZSBgb25jZWAgZmxhZy5cbiAgICAgICAgICAgICAgICBpZiAoaXNPbmNlKGxpc3RlbmVyKSAmJiByZW1vdmVMaXN0ZW5lckF0KGxpc3QsIGksICFjb3cpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEJlY2F1c2UgdGhpcyBsaXN0ZW5lciB3YXMgcmVtb3ZlZCwgdGhlIG5leHQgaW5kZXggaXMgdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vIHNhbWUgYXMgdGhlIGN1cnJlbnQgdmFsdWUuXG4gICAgICAgICAgICAgICAgICAgIGkgLT0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gQ2FsbCB0aGlzIGxpc3RlbmVyIHdpdGggdGhlIGBwYXNzaXZlYCBmbGFnLlxuICAgICAgICAgICAgICAgIGV2ZW50RGF0YS5pblBhc3NpdmVMaXN0ZW5lckZsYWcgPSBpc1Bhc3NpdmUobGlzdGVuZXIpO1xuICAgICAgICAgICAgICAgIGludm9rZUNhbGxiYWNrKGxpc3RlbmVyLCB0aGlzLCBldmVudCk7XG4gICAgICAgICAgICAgICAgZXZlbnREYXRhLmluUGFzc2l2ZUxpc3RlbmVyRmxhZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIC8vIFN0b3AgaWYgdGhlIGBldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKWAgbWV0aG9kIHdhcyBjYWxsZWQuXG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50RGF0YS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb25GbGFnKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFJlc3RvcmUgY29weS1vbi13cml0ZSBmbGFnLlxuICAgICAgICAgICAgaWYgKCFjb3cpIHtcbiAgICAgICAgICAgICAgICBsaXN0LmNvdyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGV2ZW50RGF0YS50YXJnZXQgPSBudWxsO1xuICAgICAgICBldmVudERhdGEuY3VycmVudFRhcmdldCA9IG51bGw7XG4gICAgICAgIGV2ZW50RGF0YS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb25GbGFnID0gZmFsc2U7XG4gICAgICAgIGV2ZW50RGF0YS5zdG9wUHJvcGFnYXRpb25GbGFnID0gZmFsc2U7XG4gICAgICAgIGV2ZW50RGF0YS5kaXNwYXRjaEZsYWcgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuICFldmVudERhdGEuY2FuY2VsZWRGbGFnO1xuICAgIH1cbn1cbi8qKlxuICogSW50ZXJuYWwgZGF0YS5cbiAqL1xuY29uc3QgaW50ZXJuYWxEYXRhTWFwJDIgPSBuZXcgV2Vha01hcCgpO1xuLyoqXG4gKiBHZXQgcHJpdmF0ZSBkYXRhLlxuICogQHBhcmFtIHRhcmdldCBUaGUgZXZlbnQgdGFyZ2V0IG9iamVjdCB0byBnZXQgcHJpdmF0ZSBkYXRhLlxuICogQHBhcmFtIG5hbWUgVGhlIHZhcmlhYmxlIG5hbWUgdG8gcmVwb3J0LlxuICogQHJldHVybnMgVGhlIHByaXZhdGUgZGF0YSBvZiB0aGUgZXZlbnQuXG4gKi9cbmZ1bmN0aW9uICQkMih0YXJnZXQsIG5hbWUgPSBcInRoaXNcIikge1xuICAgIGNvbnN0IHJldHYgPSBpbnRlcm5hbERhdGFNYXAkMi5nZXQodGFyZ2V0KTtcbiAgICBhc3NlcnRUeXBlKHJldHYgIT0gbnVsbCwgXCInJXMnIG11c3QgYmUgYW4gb2JqZWN0IHRoYXQgRXZlbnRUYXJnZXQgY29uc3RydWN0b3IgY3JlYXRlZCwgYnV0IGdvdCBhbm90aGVyIG9uZTogJW9cIiwgbmFtZSwgdGFyZ2V0KTtcbiAgICByZXR1cm4gcmV0djtcbn1cbi8qKlxuICogTm9ybWFsaXplIG9wdGlvbnMuXG4gKiBAcGFyYW0gb3B0aW9ucyBUaGUgb3B0aW9ucyB0byBub3JtYWxpemUuXG4gKi9cbmZ1bmN0aW9uIG5vcm1hbGl6ZUFkZE9wdGlvbnModHlwZSwgY2FsbGJhY2ssIG9wdGlvbnMpIHtcbiAgICB2YXIgX2E7XG4gICAgYXNzZXJ0Q2FsbGJhY2soY2FsbGJhY2spO1xuICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gXCJvYmplY3RcIiAmJiBvcHRpb25zICE9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBTdHJpbmcodHlwZSksXG4gICAgICAgICAgICBjYWxsYmFjazogY2FsbGJhY2sgIT09IG51bGwgJiYgY2FsbGJhY2sgIT09IHZvaWQgMCA/IGNhbGxiYWNrIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgY2FwdHVyZTogQm9vbGVhbihvcHRpb25zLmNhcHR1cmUpLFxuICAgICAgICAgICAgcGFzc2l2ZTogQm9vbGVhbihvcHRpb25zLnBhc3NpdmUpLFxuICAgICAgICAgICAgb25jZTogQm9vbGVhbihvcHRpb25zLm9uY2UpLFxuICAgICAgICAgICAgc2lnbmFsOiAoX2EgPSBvcHRpb25zLnNpZ25hbCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogdW5kZWZpbmVkLFxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBTdHJpbmcodHlwZSksXG4gICAgICAgIGNhbGxiYWNrOiBjYWxsYmFjayAhPT0gbnVsbCAmJiBjYWxsYmFjayAhPT0gdm9pZCAwID8gY2FsbGJhY2sgOiB1bmRlZmluZWQsXG4gICAgICAgIGNhcHR1cmU6IEJvb2xlYW4ob3B0aW9ucyksXG4gICAgICAgIHBhc3NpdmU6IGZhbHNlLFxuICAgICAgICBvbmNlOiBmYWxzZSxcbiAgICAgICAgc2lnbmFsOiB1bmRlZmluZWQsXG4gICAgfTtcbn1cbi8qKlxuICogTm9ybWFsaXplIG9wdGlvbnMuXG4gKiBAcGFyYW0gb3B0aW9ucyBUaGUgb3B0aW9ucyB0byBub3JtYWxpemUuXG4gKi9cbmZ1bmN0aW9uIG5vcm1hbGl6ZU9wdGlvbnModHlwZSwgY2FsbGJhY2ssIG9wdGlvbnMpIHtcbiAgICBhc3NlcnRDYWxsYmFjayhjYWxsYmFjayk7XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSBcIm9iamVjdFwiICYmIG9wdGlvbnMgIT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IFN0cmluZyh0eXBlKSxcbiAgICAgICAgICAgIGNhbGxiYWNrOiBjYWxsYmFjayAhPT0gbnVsbCAmJiBjYWxsYmFjayAhPT0gdm9pZCAwID8gY2FsbGJhY2sgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBjYXB0dXJlOiBCb29sZWFuKG9wdGlvbnMuY2FwdHVyZSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IFN0cmluZyh0eXBlKSxcbiAgICAgICAgY2FsbGJhY2s6IGNhbGxiYWNrICE9PSBudWxsICYmIGNhbGxiYWNrICE9PSB2b2lkIDAgPyBjYWxsYmFjayA6IHVuZGVmaW5lZCxcbiAgICAgICAgY2FwdHVyZTogQm9vbGVhbihvcHRpb25zKSxcbiAgICB9O1xufVxuLyoqXG4gKiBBc3NlcnQgdGhlIHR5cGUgb2YgJ2NhbGxiYWNrJyBhcmd1bWVudC5cbiAqIEBwYXJhbSBjYWxsYmFjayBUaGUgY2FsbGJhY2sgdG8gY2hlY2suXG4gKi9cbmZ1bmN0aW9uIGFzc2VydENhbGxiYWNrKGNhbGxiYWNrKSB7XG4gICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gXCJmdW5jdGlvblwiIHx8XG4gICAgICAgICh0eXBlb2YgY2FsbGJhY2sgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgICAgIGNhbGxiYWNrICE9PSBudWxsICYmXG4gICAgICAgICAgICB0eXBlb2YgY2FsbGJhY2suaGFuZGxlRXZlbnQgPT09IFwiZnVuY3Rpb25cIikpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoY2FsbGJhY2sgPT0gbnVsbCB8fCB0eXBlb2YgY2FsbGJhY2sgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgSW52YWxpZEV2ZW50TGlzdGVuZXIud2FybihjYWxsYmFjayk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihmb3JtYXQoSW52YWxpZEV2ZW50TGlzdGVuZXIubWVzc2FnZSwgW2NhbGxiYWNrXSkpO1xufVxuLyoqXG4gKiBQcmludCB3YXJuaW5nIGZvciBkdXBsaWNhdGVkLlxuICogQHBhcmFtIGxpc3RlbmVyIFRoZSBjdXJyZW50IGxpc3RlbmVyIHRoYXQgaXMgZHVwbGljYXRlZC5cbiAqIEBwYXJhbSBwYXNzaXZlIFRoZSBwYXNzaXZlIGZsYWcgb2YgdGhlIG5ldyBkdXBsaWNhdGVkIGxpc3RlbmVyLlxuICogQHBhcmFtIG9uY2UgVGhlIG9uY2UgZmxhZyBvZiB0aGUgbmV3IGR1cGxpY2F0ZWQgbGlzdGVuZXIuXG4gKiBAcGFyYW0gc2lnbmFsIFRoZSBzaWduYWwgb2JqZWN0IG9mIHRoZSBuZXcgZHVwbGljYXRlZCBsaXN0ZW5lci5cbiAqL1xuZnVuY3Rpb24gd2FybkR1cGxpY2F0ZShsaXN0ZW5lciwgcGFzc2l2ZSwgb25jZSwgc2lnbmFsKSB7XG4gICAgRXZlbnRMaXN0ZW5lcldhc0R1cGxpY2F0ZWQud2Fybihpc0NhcHR1cmUobGlzdGVuZXIpID8gXCJjYXB0dXJlXCIgOiBcImJ1YmJsZVwiLCBsaXN0ZW5lci5jYWxsYmFjayk7XG4gICAgaWYgKGlzUGFzc2l2ZShsaXN0ZW5lcikgIT09IHBhc3NpdmUpIHtcbiAgICAgICAgT3B0aW9uV2FzSWdub3JlZC53YXJuKFwicGFzc2l2ZVwiKTtcbiAgICB9XG4gICAgaWYgKGlzT25jZShsaXN0ZW5lcikgIT09IG9uY2UpIHtcbiAgICAgICAgT3B0aW9uV2FzSWdub3JlZC53YXJuKFwib25jZVwiKTtcbiAgICB9XG4gICAgaWYgKGxpc3RlbmVyLnNpZ25hbCAhPT0gc2lnbmFsKSB7XG4gICAgICAgIE9wdGlvbldhc0lnbm9yZWQud2FybihcInNpZ25hbFwiKTtcbiAgICB9XG59XG4vLyBTZXQgZW51bWVyYWJsZVxuY29uc3Qga2V5cyQxID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoRXZlbnRUYXJnZXQucHJvdG90eXBlKTtcbmZvciAobGV0IGkgPSAwOyBpIDwga2V5cyQxLmxlbmd0aDsgKytpKSB7XG4gICAgaWYgKGtleXMkMVtpXSA9PT0gXCJjb25zdHJ1Y3RvclwiKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRXZlbnRUYXJnZXQucHJvdG90eXBlLCBrZXlzJDFbaV0sIHsgZW51bWVyYWJsZTogdHJ1ZSB9KTtcbn1cbi8vIEVuc3VyZSBgZXZlbnRUYXJnZXQgaW5zdGFuY2VvZiB3aW5kb3cuRXZlbnRUYXJnZXRgIGlzIGB0cnVlYC5cbmlmICh0eXBlb2YgR2xvYmFsICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgdHlwZW9mIEdsb2JhbC5FdmVudFRhcmdldCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihFdmVudFRhcmdldC5wcm90b3R5cGUsIEdsb2JhbC5FdmVudFRhcmdldC5wcm90b3R5cGUpO1xufVxuXG4vKipcbiAqIEdldCB0aGUgY3VycmVudCB2YWx1ZSBvZiBhIGdpdmVuIGV2ZW50IGF0dHJpYnV0ZS5cbiAqIEBwYXJhbSB0YXJnZXQgVGhlIGBFdmVudFRhcmdldGAgb2JqZWN0IHRvIGdldC5cbiAqIEBwYXJhbSB0eXBlIFRoZSBldmVudCB0eXBlLlxuICovXG5mdW5jdGlvbiBnZXRFdmVudEF0dHJpYnV0ZVZhbHVlKHRhcmdldCwgdHlwZSkge1xuICAgIHZhciBfYSwgX2I7XG4gICAgY29uc3QgbGlzdE1hcCA9ICQkMih0YXJnZXQsIFwidGFyZ2V0XCIpO1xuICAgIHJldHVybiAoX2IgPSAoX2EgPSBsaXN0TWFwW3R5cGVdKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuYXR0ckNhbGxiYWNrKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBudWxsO1xufVxuLyoqXG4gKiBTZXQgYW4gZXZlbnQgbGlzdGVuZXIgdG8gYSBnaXZlbiBldmVudCBhdHRyaWJ1dGUuXG4gKiBAcGFyYW0gdGFyZ2V0IFRoZSBgRXZlbnRUYXJnZXRgIG9iamVjdCB0byBzZXQuXG4gKiBAcGFyYW0gdHlwZSBUaGUgZXZlbnQgdHlwZS5cbiAqIEBwYXJhbSBjYWxsYmFjayBUaGUgZXZlbnQgbGlzdGVuZXIuXG4gKi9cbmZ1bmN0aW9uIHNldEV2ZW50QXR0cmlidXRlVmFsdWUodGFyZ2V0LCB0eXBlLCBjYWxsYmFjaykge1xuICAgIGlmIChjYWxsYmFjayAhPSBudWxsICYmIHR5cGVvZiBjYWxsYmFjayAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIEludmFsaWRBdHRyaWJ1dGVIYW5kbGVyLndhcm4oY2FsbGJhY2spO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSBcImZ1bmN0aW9uXCIgfHxcbiAgICAgICAgKHR5cGVvZiBjYWxsYmFjayA9PT0gXCJvYmplY3RcIiAmJiBjYWxsYmFjayAhPT0gbnVsbCkpIHtcbiAgICAgICAgdXBzZXJ0RXZlbnRBdHRyaWJ1dGVMaXN0ZW5lcih0YXJnZXQsIHR5cGUsIGNhbGxiYWNrKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJlbW92ZUV2ZW50QXR0cmlidXRlTGlzdGVuZXIodGFyZ2V0LCB0eXBlKTtcbiAgICB9XG59XG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gSGVscGVyc1xuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogVXBkYXRlIG9yIGluc2VydCB0aGUgZ2l2ZW4gZXZlbnQgYXR0cmlidXRlIGhhbmRsZXIuXG4gKiBAcGFyYW0gdGFyZ2V0IFRoZSBgRXZlbnRUYXJnZXRgIG9iamVjdCB0byBzZXQuXG4gKiBAcGFyYW0gdHlwZSBUaGUgZXZlbnQgdHlwZS5cbiAqIEBwYXJhbSBjYWxsYmFjayBUaGUgZXZlbnQgbGlzdGVuZXIuXG4gKi9cbmZ1bmN0aW9uIHVwc2VydEV2ZW50QXR0cmlidXRlTGlzdGVuZXIodGFyZ2V0LCB0eXBlLCBjYWxsYmFjaykge1xuICAgIGNvbnN0IGxpc3QgPSBlbnN1cmVMaXN0ZW5lckxpc3QoJCQyKHRhcmdldCwgXCJ0YXJnZXRcIiksIFN0cmluZyh0eXBlKSk7XG4gICAgbGlzdC5hdHRyQ2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICBpZiAobGlzdC5hdHRyTGlzdGVuZXIgPT0gbnVsbCkge1xuICAgICAgICBsaXN0LmF0dHJMaXN0ZW5lciA9IGFkZExpc3RlbmVyKGxpc3QsIGRlZmluZUV2ZW50QXR0cmlidXRlQ2FsbGJhY2sobGlzdCksIGZhbHNlLCBmYWxzZSwgZmFsc2UsIHVuZGVmaW5lZCk7XG4gICAgfVxufVxuLyoqXG4gKiBSZW1vdmUgdGhlIGdpdmVuIGV2ZW50IGF0dHJpYnV0ZSBoYW5kbGVyLlxuICogQHBhcmFtIHRhcmdldCBUaGUgYEV2ZW50VGFyZ2V0YCBvYmplY3QgdG8gcmVtb3ZlLlxuICogQHBhcmFtIHR5cGUgVGhlIGV2ZW50IHR5cGUuXG4gKiBAcGFyYW0gY2FsbGJhY2sgVGhlIGV2ZW50IGxpc3RlbmVyLlxuICovXG5mdW5jdGlvbiByZW1vdmVFdmVudEF0dHJpYnV0ZUxpc3RlbmVyKHRhcmdldCwgdHlwZSkge1xuICAgIGNvbnN0IGxpc3RNYXAgPSAkJDIodGFyZ2V0LCBcInRhcmdldFwiKTtcbiAgICBjb25zdCBsaXN0ID0gbGlzdE1hcFtTdHJpbmcodHlwZSldO1xuICAgIGlmIChsaXN0ICYmIGxpc3QuYXR0ckxpc3RlbmVyKSB7XG4gICAgICAgIHJlbW92ZUxpc3RlbmVyKGxpc3QsIGxpc3QuYXR0ckxpc3RlbmVyLmNhbGxiYWNrLCBmYWxzZSk7XG4gICAgICAgIGxpc3QuYXR0ckNhbGxiYWNrID0gbGlzdC5hdHRyTGlzdGVuZXIgPSB1bmRlZmluZWQ7XG4gICAgfVxufVxuLyoqXG4gKiBEZWZpbmUgdGhlIGNhbGxiYWNrIGZ1bmN0aW9uIGZvciB0aGUgZ2l2ZW4gbGlzdGVuZXIgbGlzdCBvYmplY3QuXG4gKiBJdCBjYWxscyBgYXR0ckNhbGxiYWNrYCBwcm9wZXJ0eSBpZiB0aGUgcHJvcGVydHkgdmFsdWUgaXMgYSBmdW5jdGlvbi5cbiAqIEBwYXJhbSBsaXN0IFRoZSBgTGlzdGVuZXJMaXN0YCBvYmplY3QuXG4gKi9cbmZ1bmN0aW9uIGRlZmluZUV2ZW50QXR0cmlidXRlQ2FsbGJhY2sobGlzdCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgY29uc3QgY2FsbGJhY2sgPSBsaXN0LmF0dHJDYWxsYmFjaztcbiAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICBjYWxsYmFjay5jYWxsKHRoaXMsIGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH07XG59XG5cbi8qKlxuICogRGVmaW5lIGFuIGBFdmVudFRhcmdldGAgY2xhc3MgdGhhdCBoYXMgZXZlbnQgYXR0aWJ1dGVzLlxuICogQHBhcmFtIHR5cGVzIFRoZSB0eXBlcyB0byBkZWZpbmUgZXZlbnQgYXR0cmlidXRlcy5cbiAqIEBkZXByZWNhdGVkIFVzZSBgZ2V0RXZlbnRBdHRyaWJ1dGVWYWx1ZWAvYHNldEV2ZW50QXR0cmlidXRlVmFsdWVgIHBhaXIgb24geW91ciBkZXJpdmVkIGNsYXNzIGluc3RlYWQgYmVjYXVzZSBvZiBzdGF0aWMgYW5hbHlzaXMgZnJpZW5kbHkuXG4gKi9cbmZ1bmN0aW9uIGRlZmluZUN1c3RvbUV2ZW50VGFyZ2V0KC4uLnR5cGVzKSB7XG4gICAgY2xhc3MgQ3VzdG9tRXZlbnRUYXJnZXQgZXh0ZW5kcyBFdmVudFRhcmdldCB7XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdHlwZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgZGVmaW5lRXZlbnRBdHRyaWJ1dGUoQ3VzdG9tRXZlbnRUYXJnZXQucHJvdG90eXBlLCB0eXBlc1tpXSk7XG4gICAgfVxuICAgIHJldHVybiBDdXN0b21FdmVudFRhcmdldDtcbn1cbi8qKlxuICogRGVmaW5lIGFuIGV2ZW50IGF0dHJpYnV0ZS5cbiAqIEBwYXJhbSB0YXJnZXQgVGhlIGBFdmVudFRhcmdldGAgb2JqZWN0IHRvIGRlZmluZSBhbiBldmVudCBhdHRyaWJ1dGUuXG4gKiBAcGFyYW0gdHlwZSBUaGUgZXZlbnQgdHlwZSB0byBkZWZpbmUuXG4gKiBAcGFyYW0gX2V2ZW50Q2xhc3MgVW51c2VkLCBidXQgdG8gaW5mZXIgYEV2ZW50YCBjbGFzcyB0eXBlLlxuICogQGRlcHJlY2F0ZWQgVXNlIGBnZXRFdmVudEF0dHJpYnV0ZVZhbHVlYC9gc2V0RXZlbnRBdHRyaWJ1dGVWYWx1ZWAgcGFpciBvbiB5b3VyIGRlcml2ZWQgY2xhc3MgaW5zdGVhZCBiZWNhdXNlIG9mIHN0YXRpYyBhbmFseXNpcyBmcmllbmRseS5cbiAqL1xuZnVuY3Rpb24gZGVmaW5lRXZlbnRBdHRyaWJ1dGUodGFyZ2V0LCB0eXBlLCBfZXZlbnRDbGFzcykge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGBvbiR7dHlwZX1gLCB7XG4gICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiBnZXRFdmVudEF0dHJpYnV0ZVZhbHVlKHRoaXMsIHR5cGUpO1xuICAgICAgICB9LFxuICAgICAgICBzZXQodmFsdWUpIHtcbiAgICAgICAgICAgIHNldEV2ZW50QXR0cmlidXRlVmFsdWUodGhpcywgdHlwZSwgdmFsdWUpO1xuICAgICAgICB9LFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgfSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IEV2ZW50VGFyZ2V0O1xuZXhwb3J0IHsgRXZlbnQsIEV2ZW50VGFyZ2V0LCBkZWZpbmVDdXN0b21FdmVudFRhcmdldCwgZGVmaW5lRXZlbnRBdHRyaWJ1dGUsIGdldEV2ZW50QXR0cmlidXRlVmFsdWUsIHNldEVycm9ySGFuZGxlciwgc2V0RXZlbnRBdHRyaWJ1dGVWYWx1ZSwgc2V0V2FybmluZ0hhbmRsZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXBcbiIsImltcG9ydCB7IENhbGVuZGFyRXZlbnQgfSBmcm9tIFwiLi9DYWxlbmRhckV2ZW50XCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RXZlbnRzRm9yRGF5KGV2ZW50czogQ2FsZW5kYXJFdmVudFtdLCBkYXRlOiBEYXRlKTogQ2FsZW5kYXJFdmVudFtdIHtcclxuICByZXR1cm4gZXZlbnRzLmZpbHRlcihldmVudCA9PiB7XHJcbiAgICByZXR1cm4gZXZlbnQuZGF0ZS5nZXRGdWxsWWVhcigpID09PSBkYXRlLmdldEZ1bGxZZWFyKCkgJiZcclxuICAgICAgZXZlbnQuZGF0ZS5nZXRNb250aCgpID09PSBkYXRlLmdldE1vbnRoKCkgJiZcclxuICAgICAgZXZlbnQuZGF0ZS5nZXREYXRlKCkgPT09IGRhdGUuZ2V0RGF0ZSgpO1xyXG4gIH0pLnNvcnQoKGEsIGIpID0+IHtcclxuICAgIC8vIElmIG9uZSBoYXMgbm8gdGltZSBwcm9wZXJ0eSwgaXQgc2hvdWxkIGJlIGZpcnN0LlxyXG4gICAgLy8gSWYgYm90aCBoYXZlIG5vIHRpbWUsIG5vIHNvcnRpbmcgaXMgbmVlZGVkLlxyXG4gICAgaWYgKCFhLnRpbWUgJiYgISFiLnRpbWUpIHtcclxuICAgICAgcmV0dXJuIC0xO1xyXG4gICAgfSBlbHNlIGlmICghIWEudGltZSAmJiAhYi50aW1lKSB7XHJcbiAgICAgIHJldHVybiAxO1xyXG4gICAgfSBlbHNlIGlmICghYS50aW1lICYmICFiLnRpbWUpIHtcclxuICAgICAgcmV0dXJuIDA7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU29ydCB0aGUgZXZlbnRzIGJ5IHRpbWUuIFRpbWVzIGFyZSBzdHJpbmdzIGluIDI0XHJcbiAgICAvLyBmb3JtYXRzLCBzbyBqdXN0IHJlbW92ZSB0aGUgbGVhZGluZyAwLCBpZiBhbnksIGFuZFxyXG4gICAgLy8gdGhlIGNvbG9uLCBhbmQgY29tcGFyZSB0aGUgbnVtYmVycy5cclxuICAgIGNvbnN0IGFUaW1lID0gcGFyc2VJbnQoYS50aW1lLnJlcGxhY2UoL14wLywgJycpLnJlcGxhY2UoJzonLCAnJykpO1xyXG4gICAgY29uc3QgYlRpbWUgPSBwYXJzZUludChiLnRpbWUucmVwbGFjZSgvXjAvLCAnJykucmVwbGFjZSgnOicsICcnKSk7XHJcbiAgICByZXR1cm4gYVRpbWUgLSBiVGltZTtcclxuICB9KS5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAvLyBTb3J0IHRoZSBldmVudHMgdGhhdCBhcmUgbXVsdGktZGF5cyBmaXJzdC5cclxuICAgIGlmICghIWEubXVsdGlEYXlzICYmICFiLm11bHRpRGF5cykge1xyXG4gICAgICByZXR1cm4gLTE7XHJcbiAgICB9IGVsc2UgaWYgKCFhLm11bHRpRGF5cyAmJiAhIWIubXVsdGlEYXlzKSB7XHJcbiAgICAgIHJldHVybiAxO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59XHJcbiIsImltcG9ydCB7IEV2ZW50VGFyZ2V0LCBFdmVudCB9IGZyb20gXCJldmVudC10YXJnZXQtc2hpbVwiO1xyXG5pbXBvcnQgeyBDYWxlbmRhckV2ZW50IH0gZnJvbSBcIi4vQ2FsZW5kYXJFdmVudFwiO1xyXG5pbXBvcnQgeyBnZXRFdmVudHNGb3JEYXkgfSBmcm9tIFwiLi91dGlsc1wiO1xyXG5cclxuY29uc3QgREFZUyA9IFsnU3VuZGF5JywgJ01vbmRheScsICdUdWVzZGF5JywgJ1dlZG5lc2RheScsICdUaHVyc2RheScsICdGcmlkYXknLCAnU2F0dXJkYXknXTtcclxuXHJcbmV4cG9ydCBjbGFzcyBNb250aEdyaWQgZXh0ZW5kcyBFdmVudFRhcmdldCB7XHJcbiAgcHJpdmF0ZSByb290RWw6IEhUTUxFbGVtZW50O1xyXG4gIHByaXZhdGUgX2RhdGU6IERhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gIHByaXZhdGUgX2V2ZW50czogQ2FsZW5kYXJFdmVudFtdO1xyXG5cclxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGVsOiBIVE1MRWxlbWVudCwgZGF0ZTogRGF0ZSwgZXZlbnRzOiBDYWxlbmRhckV2ZW50W10pIHtcclxuICAgIHN1cGVyKCk7XHJcblxyXG4gICAgdGhpcy5yb290RWwgPSBlbDtcclxuICAgIHRoaXMuX2RhdGUgPSBkYXRlO1xyXG4gICAgdGhpcy5fZXZlbnRzID0gZXZlbnRzO1xyXG5cclxuICAgIHRoaXMucmVuZGVyKCk7XHJcbiAgfVxyXG4gIFxyXG4gIHJlbmRlcigpIHtcclxuICAgIHRoaXMucm9vdEVsLmlubmVySFRNTCA9ICcnO1xyXG5cclxuICAgIGNvbnN0IG1vbnRoID0gdGhpcy5fZGF0ZS5nZXRNb250aCgpO1xyXG4gICAgY29uc3QgeWVhciA9IHRoaXMuX2RhdGUuZ2V0RnVsbFllYXIoKTtcclxuICBcclxuICAgIGNvbnN0IGZpcnN0RGF5ID0gbmV3IERhdGUoeWVhciwgbW9udGgsIDEpO1xyXG4gICAgY29uc3QgbGFzdERheSA9IG5ldyBEYXRlKHllYXIsIG1vbnRoICsgMSwgMCk7XHJcbiAgXHJcbiAgICBjb25zdCBmaXJzdFdlZWtkYXkgPSBmaXJzdERheS5nZXREYXkoKTtcclxuICAgIGNvbnN0IGxhc3RXZWVrZGF5ID0gbGFzdERheS5nZXREYXkoKTtcclxuICAgIGNvbnN0IGRheXNJbk1vbnRoID0gbGFzdERheS5nZXREYXRlKCk7XHJcbiAgICBjb25zdCBkYXlzSW5MYXN0TW9udGggPSBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgMCkuZ2V0RGF0ZSgpO1xyXG4gICAgY29uc3QgZGF5czoge2RhdGU6IERhdGUsIGh0bWw6IHN0cmluZ31bXSA9IFtdO1xyXG4gIFxyXG4gICAgbGV0IGluZGV4SW5HcmlkID0gMDtcclxuXHJcbiAgICAvLyBEYXlzIGZyb20gbGFzdCBtb250aFxyXG4gICAgZm9yIChsZXQgaSA9IGRheXNJbkxhc3RNb250aCAtIGZpcnN0V2Vla2RheSArIDE7IGkgPD0gZGF5c0luTGFzdE1vbnRoOyBpKyspIHtcclxuICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHllYXIsIG1vbnRoIC0gMSwgaSk7XHJcbiAgICAgIGRheXMucHVzaCh7ZGF0ZSwgaHRtbDogdGhpcy5yZW5kZXJEYXkoZGF0ZSwgaSwgaW5kZXhJbkdyaWQsICdwcmV2LW1vbnRoJyl9KTtcclxuICAgICAgaW5kZXhJbkdyaWQrKztcclxuICAgIH1cclxuICBcclxuICAgIC8vIERheXMgZnJvbSB0aGlzIG1vbnRoXHJcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBkYXlzSW5Nb250aDsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgaSk7XHJcbiAgICAgIGRheXMucHVzaCh7ZGF0ZSwgaHRtbDogdGhpcy5yZW5kZXJEYXkoZGF0ZSwgaSwgaW5kZXhJbkdyaWQpfSk7XHJcbiAgICAgIGluZGV4SW5HcmlkKys7XHJcbiAgICB9XHJcbiAgXHJcbiAgICAvLyBEYXlzIGZyb20gbmV4dCBtb250aFxyXG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gNyAtIGxhc3RXZWVrZGF5IC0gMTsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSh5ZWFyLCBtb250aCArIDEsIGkpO1xyXG4gICAgICBkYXlzLnB1c2goe2RhdGUsIGh0bWw6IHRoaXMucmVuZGVyRGF5KGRhdGUsIGksIGluZGV4SW5HcmlkLCAnbmV4dC1tb250aCcpfSk7XHJcbiAgICAgIGluZGV4SW5HcmlkKys7XHJcbiAgICB9XHJcblxyXG4gICAgZm9yIChjb25zdCB7ZGF0ZSwgaHRtbH0gb2YgZGF5cykge1xyXG4gICAgICB0aGlzLnJvb3RFbC5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIGh0bWwpO1xyXG4gICAgICBjb25zdCBkYXlFbCA9IHRoaXMucm9vdEVsLmxhc3RFbGVtZW50Q2hpbGQgYXMgSFRNTEVsZW1lbnQ7XHJcblxyXG4gICAgICBkYXlFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlOiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ2RheS1jbGlja2VkJywge2RldGFpbDogZGF0ZX0pKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy51cGRhdGVOb3dNYXJrZXIoKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckRheShkYXRlOiBEYXRlLCBkYXlOdW1iZXI6IG51bWJlciwgaW5kZXhJbkdyaWQ6IG51bWJlciwgY2xhc3NOYW1lOiBzdHJpbmcgPSAnJyk6IHN0cmluZyB7XHJcbiAgICBjb25zdCBldmVudHMgPSBnZXRFdmVudHNGb3JEYXkodGhpcy5fZXZlbnRzLCBkYXRlKTtcclxuICAgIGNvbnN0IGlzVG9kYXkgPSBkYXRlLnRvRGF0ZVN0cmluZygpID09PSBuZXcgRGF0ZSgpLnRvRGF0ZVN0cmluZygpO1xyXG5cclxuICAgIHJldHVybiBgXHJcbiAgICAgIDxkaXYgY2xhc3M9XCJkYXkgJHtpc1RvZGF5ID8gJ3RvZGF5JyA6ICcnfSAke2NsYXNzTmFtZX1cIj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiaGVhZGVyXCI+XHJcbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImRheS1uYW1lXCI+JHtEQVlTW2RhdGUuZ2V0RGF5KCldfTwvc3Bhbj5cclxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZGF5LW51bWJlclwiPiR7ZGF5TnVtYmVyfTwvc3Bhbj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8dWwgY2xhc3M9XCJldmVudHNcIj5cclxuICAgICAgICAgICR7ZXZlbnRzLm1hcChldmVudCA9PiBldmVudC5hc09uZUxpbmVIVE1MKGluZGV4SW5HcmlkKSkuam9pbignJyl9XHJcbiAgICAgICAgPC91bD5cclxuICAgICAgPC9kaXY+XHJcbiAgICBgO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlTm93TWFya2VyKCkge1xyXG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcclxuICAgIGNvbnN0IHRpbWUgPSBub3cuZ2V0SG91cnMoKSAqIDEwMCArIG5vdy5nZXRNaW51dGVzKCk7XHJcbiAgICBjb25zdCByYXRpbyA9IHRpbWUgKiAxMDAgLyAyNDAwO1xyXG5cclxuICAgIC8vIEZvcmNpbmcgYSBzeW5jIHJlZmxvdyBoZXJlIGJ5IHF1ZXJ5aW5nIHRoZSBvZmZzZXRIZWlnaHQgb2YgdGhlIGRheSBjZWxsLlxyXG4gICAgLy8gQ291bGQganVzdCBzZXQgdGhlICUgdmFsdWUgZGlyZWN0bHkgaW5zdGVhZC5cclxuICAgIGNvbnN0IGRheUVsID0gdGhpcy5yb290RWwucXVlcnlTZWxlY3RvcignLmRheS50b2RheScpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgaWYgKGRheUVsKSB7XHJcbiAgICAgIGNvbnN0IHB4SGVpZ2h0ID0gZGF5RWwub2Zmc2V0SGVpZ2h0O1xyXG4gICAgICBjb25zdCBtYXJrZXJIZWlnaHQgPSBweEhlaWdodCAqIHJhdGlvIC8gMTAwO1xyXG5cclxuICAgICAgdGhpcy5yb290RWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tbm93LW1hcmtlcicsIGAke21hcmtlckhlaWdodH1weGApO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy51cGRhdGVOb3dNYXJrZXIoKSwgMTAwMCk7XHJcbiAgfVxyXG5cclxuICBzZXQgZGF0ZShkYXRlOiBEYXRlKSB7XHJcbiAgICB0aGlzLl9kYXRlID0gZGF0ZTtcclxuICAgIHRoaXMucmVuZGVyKCk7XHJcbiAgfVxyXG5cclxuICBzZXQgZXZlbnRzKGV2ZW50czogQ2FsZW5kYXJFdmVudFtdKSB7XHJcbiAgICB0aGlzLl9ldmVudHMgPSBldmVudHM7XHJcbiAgICB0aGlzLnJlbmRlcigpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBFdmVudFRhcmdldCwgRXZlbnQgfSBmcm9tIFwiZXZlbnQtdGFyZ2V0LXNoaW1cIjtcclxuXHJcbmNvbnN0IE1PTlRIUyA9IFtcclxuICAnSmFudWFyeScsICdGZWJydWFyeScsICdNYXJjaCcsICdBcHJpbCcsICdNYXknLCAnSnVuZScsICdKdWx5JywgJ0F1Z3VzdCcsXHJcbiAgJ1NlcHRlbWJlcicsICdPY3RvYmVyJywgJ05vdmVtYmVyJywnRGVjZW1iZXInXHJcbl07XHJcblxyXG5leHBvcnQgY2xhc3MgVG9vbGJhciBleHRlbmRzIEV2ZW50VGFyZ2V0IHtcclxuICBwcml2YXRlIHJvb3RFbDogSFRNTEVsZW1lbnQ7XHJcbiAgcHJpdmF0ZSBfZGF0ZTogRGF0ZTtcclxuICBwcml2YXRlIHNlbGVjdGVkTW9kZTogc3RyaW5nID0gXCJtb250aFwiO1xyXG5cclxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGVsOiBIVE1MRWxlbWVudCwgZGF0ZTogRGF0ZSwgbW9kZTogc3RyaW5nKSB7XHJcbiAgICBzdXBlcigpO1xyXG5cclxuICAgIHRoaXMucm9vdEVsID0gZWw7XHJcbiAgICB0aGlzLl9kYXRlID0gZGF0ZTtcclxuICAgIHRoaXMuc2VsZWN0ZWRNb2RlID0gbW9kZTtcclxuXHJcbiAgICB0aGlzLnJlbmRlcigpO1xyXG4gIH1cclxuXHJcbiAgZm9ybWF0TW9udGhZZWFyKCkge1xyXG4gICAgY29uc3QgbW9udGggPSB0aGlzLl9kYXRlLmdldE1vbnRoKCk7XHJcbiAgICBjb25zdCB5ZWFyID0gdGhpcy5fZGF0ZS5nZXRGdWxsWWVhcigpO1xyXG4gICAgcmV0dXJuIGAke01PTlRIU1ttb250aF19ICR7eWVhcn1gO1xyXG4gIH1cclxuICBcclxuICByZW5kZXIoKSB7XHJcbiAgICB0aGlzLnJvb3RFbC5pbm5lckhUTUwgPSBgXHJcbiAgICAgIDxidXR0b24gaWQ9XCJwcmV2LW1vbnRoXCI+UHJldjwvYnV0dG9uPlxyXG4gICAgICA8YnV0dG9uIGlkPVwidG9kYXlcIiBjbGFzcz1cInByaW1hcnlcIj5Ub2RheTwvYnV0dG9uPlxyXG4gICAgICA8YnV0dG9uIGlkPVwibmV4dC1tb250aFwiPk5leHQ8L2J1dHRvbj5cclxuICAgICAgPHNwYW4gaWQ9XCJtb250aC15ZWFyXCI+JHt0aGlzLmZvcm1hdE1vbnRoWWVhcigpfTwvc3Bhbj5cclxuICAgICAgPGlucHV0IHR5cGU9XCJyYWRpb1wiIG5hbWU9XCJ2aWV3XCIgaWQ9XCJtb250aC12aWV3XCIgJHt0aGlzLnNlbGVjdGVkTW9kZSA9PT0gXCJtb250aFwiID8gXCJjaGVja2VkXCIgOiBcIlwifT5cclxuICAgICAgPGxhYmVsIGZvcj1cIm1vbnRoLXZpZXdcIj5Nb250aDwvbGFiZWw+XHJcbiAgICAgIDxpbnB1dCB0eXBlPVwicmFkaW9cIiBuYW1lPVwidmlld1wiIGlkPVwid2Vlay12aWV3XCIgJHt0aGlzLnNlbGVjdGVkTW9kZSA9PT0gXCJ3ZWVrXCIgPyBcImNoZWNrZWRcIiA6IFwiXCJ9PlxyXG4gICAgICA8bGFiZWwgZm9yPVwid2Vlay12aWV3XCI+V2VlazwvbGFiZWw+ICAgICAgXHJcbiAgICBgO1xyXG5cclxuICAgIHRoaXMucm9vdEVsLnF1ZXJ5U2VsZWN0b3IoJyNwcmV2LW1vbnRoJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGBQcmV2ICR7dGhpcy5zZWxlY3RlZE1vZGV9IGNsaWNrZWRgKTtcclxuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgncHJldicpKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMucm9vdEVsLnF1ZXJ5U2VsZWN0b3IoJyNuZXh0LW1vbnRoJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGBOZXh0ICR7dGhpcy5zZWxlY3RlZE1vZGV9IGNsaWNrZWRgKTtcclxuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnbmV4dCcpKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMucm9vdEVsLnF1ZXJ5U2VsZWN0b3IoJyN0b2RheScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhcIlRvZGF5IGNsaWNrZWRcIik7XHJcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ3RvZGF5JykpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5yb290RWwucXVlcnlTZWxlY3RvcignI21vbnRoLXZpZXcnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coXCJNb250aCB2aWV3IGNsaWNrZWRcIik7XHJcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ21vbnRoLXZpZXcnKSk7XHJcbiAgICAgIHRoaXMuc2VsZWN0ZWRNb2RlID0gXCJtb250aFwiO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIHRoaXMucm9vdEVsLnF1ZXJ5U2VsZWN0b3IoJyN3ZWVrLXZpZXcnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coXCJXZWVrIHZpZXcgY2xpY2tlZFwiKTtcclxuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnd2Vlay12aWV3JykpO1xyXG4gICAgICB0aGlzLnNlbGVjdGVkTW9kZSA9IFwid2Vla1wiO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzZXQgZGF0ZShkYXRlOiBEYXRlKSB7XHJcbiAgICB0aGlzLl9kYXRlID0gZGF0ZTtcclxuICAgIHRoaXMucmVuZGVyKCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IENhbGVuZGFyRXZlbnQgfSBmcm9tIFwiLi9DYWxlbmRhckV2ZW50XCI7XHJcblxyXG5leHBvcnQgY2xhc3MgU2lkZWJhciB7XHJcbiAgcHJpdmF0ZSByb290RWw6IEhUTUxFbGVtZW50O1xyXG4gIHByaXZhdGUgX2V2ZW50czogQ2FsZW5kYXJFdmVudFtdID0gW107XHJcbiAgcHJpdmF0ZSBfZGF0ZTogRGF0ZSA9IG5ldyBEYXRlKCk7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgZWw6IEhUTUxFbGVtZW50LCBkYXRlOiBEYXRlLCBldmVudHM6IENhbGVuZGFyRXZlbnRbXSkge1xyXG4gICAgdGhpcy5yb290RWwgPSBlbDtcclxuICAgIHRoaXMuX2RhdGUgPSBkYXRlO1xyXG4gICAgdGhpcy5fZXZlbnRzID0gZXZlbnRzO1xyXG5cclxuICAgIHRoaXMucmVuZGVyKCk7XHJcbiAgfVxyXG4gIFxyXG4gIHJlbmRlcigpIHtcclxuICAgIHRoaXMucm9vdEVsLmlubmVySFRNTCA9IGBcclxuICAgICAgPGgyPkNsaWNrIGEgZGF5IHRvIHZpZXcgZXZlbnRzPC9oMj5cclxuICAgIGA7XHJcblxyXG4gICAgaWYgKCF0aGlzLl9ldmVudHMubGVuZ3RoKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnJvb3RFbC5pbm5lckhUTUwgPSAnJztcclxuXHJcbiAgICBjb25zdCB1bCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7XHJcbiAgICB1bC5jbGFzc05hbWUgPSAnZXZlbnRzJztcclxuICAgIHRoaXMucm9vdEVsLmFwcGVuZENoaWxkKHVsKTtcclxuXHJcbiAgICBmb3IgKGNvbnN0IGV2ZW50IG9mIHRoaXMuX2V2ZW50cykge1xyXG4gICAgICB1bC5pbm5lckhUTUwgKz0gZXZlbnQuYXNGdWxsSFRNTCgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0IGV2ZW50cyhldmVudHM6IENhbGVuZGFyRXZlbnRbXSkge1xyXG4gICAgdGhpcy5fZXZlbnRzID0gZXZlbnRzO1xyXG4gICAgdGhpcy5yZW5kZXIoKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgRXZlbnRUYXJnZXQsIEV2ZW50IH0gZnJvbSBcImV2ZW50LXRhcmdldC1zaGltXCI7XHJcbmltcG9ydCB7IENhbGVuZGFyRXZlbnQgfSBmcm9tIFwiLi9DYWxlbmRhckV2ZW50XCI7XHJcbmltcG9ydCB7IGdldEV2ZW50c0ZvckRheSB9IGZyb20gXCIuL3V0aWxzXCI7XHJcblxyXG5jb25zdCBEQVlTID0gWydTdW5kYXknLCAnTW9uZGF5JywgJ1R1ZXNkYXknLCAnV2VkbmVzZGF5JywgJ1RodXJzZGF5JywgJ0ZyaWRheScsICdTYXR1cmRheSddO1xyXG5cclxuZXhwb3J0IGNsYXNzIFdlZWtHcmlkIGV4dGVuZHMgRXZlbnRUYXJnZXQge1xyXG4gIHByaXZhdGUgcm9vdEVsOiBIVE1MRWxlbWVudDtcclxuICBwcml2YXRlIF9kYXRlOiBEYXRlID0gbmV3IERhdGUoKTtcclxuICBwcml2YXRlIF9ldmVudHM6IENhbGVuZGFyRXZlbnRbXTtcclxuXHJcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBlbDogSFRNTEVsZW1lbnQsIGRhdGU6IERhdGUsIGV2ZW50czogQ2FsZW5kYXJFdmVudFtdKSB7XHJcbiAgICBzdXBlcigpO1xyXG5cclxuICAgIHRoaXMucm9vdEVsID0gZWw7XHJcbiAgICB0aGlzLl9kYXRlID0gZGF0ZTtcclxuICAgIHRoaXMuX2V2ZW50cyA9IGV2ZW50cztcclxuXHJcbiAgICB0aGlzLnJlbmRlcigpO1xyXG4gIH1cclxuICBcclxuICByZW5kZXIoKSB7XHJcbiAgICB0aGlzLnJvb3RFbC5pbm5lckhUTUwgPSAnJztcclxuXHJcbiAgICAvLyBGaW5kIHRoZSBkYXRlcyB0aGF0IG1ha2UgdGhlIHdlZWsgYXJvdW5kIHRoaXMuX2RhdGUuXHJcbiAgICBjb25zdCBtb250aCA9IHRoaXMuX2RhdGUuZ2V0TW9udGgoKTtcclxuICAgIGNvbnN0IHllYXIgPSB0aGlzLl9kYXRlLmdldEZ1bGxZZWFyKCk7XHJcbiAgICBjb25zdCBkYXRlID0gdGhpcy5fZGF0ZS5nZXREYXRlKCk7XHJcbiAgICBjb25zdCBkYXkgPSB0aGlzLl9kYXRlLmdldERheSgpO1xyXG5cclxuICAgIGNvbnN0IGZpcnN0RGF5ID0gbmV3IERhdGUoeWVhciwgbW9udGgsIGRhdGUgLSBkYXkpO1xyXG5cclxuICAgIC8vIEl0ZXJhdGUgb3ZlciB0aGUgZGF0ZXMgYW5kIHJlbmRlciB0aGUgZGF5cy5cclxuICAgIGNvbnN0IGRheXM6IHtkYXRlOiBEYXRlLCBodG1sOiBzdHJpbmd9W10gPSBbXTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNzsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgZmlyc3REYXkuZ2V0RGF0ZSgpICsgaSk7XHJcbiAgICAgIHRoaXMucm9vdEVsLmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgdGhpcy5yZW5kZXJEYXkoZGF0ZSwgZGF0ZS5nZXREYXRlKCkpKTtcclxuXHJcbiAgICAgIGNvbnN0IGRheUVsID0gdGhpcy5yb290RWwubGFzdEVsZW1lbnRDaGlsZCBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgZGF5RWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZTogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdkYXktY2xpY2tlZCcsIHtkZXRhaWw6IGRhdGV9KSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMudXBkYXRlTm93TWFya2VyKCk7XHJcbiAgfVxyXG5cclxuICByZW5kZXJEYXkoZGF0ZTogRGF0ZSwgZGF5TnVtYmVyOiBudW1iZXIsIGNsYXNzTmFtZTogc3RyaW5nID0gJycpOiBzdHJpbmcge1xyXG4gICAgY29uc3QgZXZlbnRzID0gZ2V0RXZlbnRzRm9yRGF5KHRoaXMuX2V2ZW50cywgZGF0ZSk7XHJcbiAgICBjb25zdCBpc1RvZGF5ID0gZGF0ZS50b0RhdGVTdHJpbmcoKSA9PT0gbmV3IERhdGUoKS50b0RhdGVTdHJpbmcoKTtcclxuXHJcbiAgICByZXR1cm4gYFxyXG4gICAgICA8ZGl2IGNsYXNzPVwiZGF5ICR7aXNUb2RheSA/ICd0b2RheScgOiAnJ30gJHtjbGFzc05hbWV9XCI+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImhlYWRlclwiPlxyXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJkYXktbmFtZVwiPiR7REFZU1tkYXRlLmdldERheSgpXX08L3NwYW4+XHJcbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImRheS1udW1iZXJcIj4ke2RheU51bWJlcn08L3NwYW4+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPHVsIGNsYXNzPVwiZXZlbnRzXCI+XHJcbiAgICAgICAgICAke2V2ZW50cy5tYXAoZXZlbnQgPT4gZXZlbnQuYXNNZWRpdW1MZW5ndGhIVE1MKCkpLmpvaW4oJycpfVxyXG4gICAgICAgIDwvdWw+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgYDtcclxuICB9XHJcblxyXG4gIHVwZGF0ZU5vd01hcmtlcigpIHtcclxuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XHJcbiAgICBjb25zdCB0aW1lID0gbm93LmdldEhvdXJzKCkgKiAxMDAgKyBub3cuZ2V0TWludXRlcygpO1xyXG4gICAgY29uc3QgcmF0aW8gPSB0aW1lICogMTAwIC8gMjQwMDtcclxuXHJcbiAgICAvLyBGb3JjaW5nIGEgc3luYyByZWZsb3cgaGVyZSBieSBxdWVyeWluZyB0aGUgb2Zmc2V0SGVpZ2h0IG9mIHRoZSBkYXkgY2VsbC5cclxuICAgIC8vIENvdWxkIGp1c3Qgc2V0IHRoZSAlIHZhbHVlIGRpcmVjdGx5IGluc3RlYWQuXHJcbiAgICBjb25zdCBkYXlFbCA9IHRoaXMucm9vdEVsLnF1ZXJ5U2VsZWN0b3IoJy5kYXkudG9kYXknKSBhcyBIVE1MRWxlbWVudDtcclxuICAgIGlmIChkYXlFbCkge1xyXG4gICAgICBjb25zdCBweEhlaWdodCA9IGRheUVsLm9mZnNldEhlaWdodDtcclxuICAgICAgY29uc3QgbWFya2VySGVpZ2h0ID0gcHhIZWlnaHQgKiByYXRpbyAvIDEwMDtcclxuXHJcbiAgICAgIHRoaXMucm9vdEVsLnN0eWxlLnNldFByb3BlcnR5KCctLW5vdy1tYXJrZXInLCBgJHttYXJrZXJIZWlnaHR9cHhgKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMudXBkYXRlTm93TWFya2VyKCksIDEwMDApO1xyXG4gIH1cclxuXHJcbiAgc2V0IGRhdGUoZGF0ZTogRGF0ZSkge1xyXG4gICAgdGhpcy5fZGF0ZSA9IGRhdGU7XHJcbiAgICB0aGlzLnJlbmRlcigpO1xyXG4gIH1cclxuXHJcbiAgc2V0IGV2ZW50cyhldmVudHM6IENhbGVuZGFyRXZlbnRbXSkge1xyXG4gICAgdGhpcy5fZXZlbnRzID0gZXZlbnRzO1xyXG4gICAgdGhpcy5yZW5kZXIoKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgRXZlbnRUYXJnZXQsIEV2ZW50IH0gZnJvbSBcImV2ZW50LXRhcmdldC1zaGltXCI7XHJcbmltcG9ydCB7IENhbGVuZGFyRXZlbnQgfSBmcm9tIFwiLi9DYWxlbmRhckV2ZW50XCI7XHJcbmltcG9ydCB7IE1vbnRoR3JpZCB9IGZyb20gXCIuL01vbnRoR3JpZFwiO1xyXG5pbXBvcnQgeyBUb29sYmFyIH0gZnJvbSBcIi4vVG9vbGJhclwiO1xyXG5pbXBvcnQgeyBTaWRlYmFyIH0gZnJvbSBcIi4vU2lkZWJhclwiO1xyXG5pbXBvcnQgeyBnZXRFdmVudHNGb3JEYXkgfSBmcm9tIFwiLi91dGlsc1wiO1xyXG5pbXBvcnQgeyBXZWVrR3JpZCB9IGZyb20gXCIuL1dlZWtHcmlkXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQXBwVUkgZXh0ZW5kcyBFdmVudFRhcmdldCB7XHJcbiAgcHJpdmF0ZSByb290RWw6IEhUTUxFbGVtZW50O1xyXG5cclxuICBwcml2YXRlIG1vbnRoR3JpZEVsOiBIVE1MRWxlbWVudDtcclxuICBwdWJsaWMgbW9udGhHcmlkOiBNb250aEdyaWQ7XHJcblxyXG4gIHByaXZhdGUgd2Vla0dyaWRFbDogSFRNTEVsZW1lbnQ7XHJcbiAgcHVibGljIHdlZWtHcmlkOiBXZWVrR3JpZDtcclxuXHJcbiAgcHJpdmF0ZSB0b29sYmFyRWw6IEhUTUxFbGVtZW50O1xyXG4gIHByaXZhdGUgdG9vbGJhcjogVG9vbGJhcjtcclxuXHJcbiAgcHJpdmF0ZSBzaWRlYmFyRWw6IEhUTUxFbGVtZW50O1xyXG4gIHByaXZhdGUgc2lkZWJhcjogU2lkZWJhcjtcclxuXHJcbiAgcHJpdmF0ZSBfZGF0ZTogRGF0ZTtcclxuICBwcml2YXRlIF9ldmVudHM6IENhbGVuZGFyRXZlbnRbXTtcclxuXHJcbiAgcHJpdmF0ZSBtb2RlOiBzdHJpbmcgPSBcIm1vbnRoXCI7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGVsOiBIVE1MRWxlbWVudCwgZGF0ZTogRGF0ZSwgbW9kZTogc3RyaW5nLCBldmVudHM6IENhbGVuZGFyRXZlbnRbXSkge1xyXG4gICAgc3VwZXIoKTtcclxuXHJcbiAgICB0aGlzLnJvb3RFbCA9IGVsO1xyXG4gICAgdGhpcy5fZGF0ZSA9IGRhdGU7XHJcbiAgICB0aGlzLl9ldmVudHMgPSBldmVudHM7XHJcbiAgICB0aGlzLm1vZGUgPSBtb2RlO1xyXG5cclxuICAgIHRoaXMucmVuZGVyKCk7XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICB0aGlzLnJvb3RFbC5pbm5lckhUTUwgPSAnJztcclxuXHJcbiAgICAvLyBDcmVhdGUgYW4gZWxlbWVudCBmb3IgdGhlIHRvb2xiYXIuXHJcbiAgICB0aGlzLnRvb2xiYXJFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgdGhpcy50b29sYmFyRWwuaWQgPSAndG9vbGJhcic7XHJcbiAgICB0aGlzLnJvb3RFbC5hcHBlbmRDaGlsZCh0aGlzLnRvb2xiYXJFbCk7XHJcblxyXG4gICAgLy8gSW5pdCB0aGUgdG9vbGJhciBjb21wb25lbnQgaW4gaXQuXHJcbiAgICB0aGlzLnRvb2xiYXIgPSBuZXcgVG9vbGJhcih0aGlzLnRvb2xiYXJFbCwgdGhpcy5fZGF0ZSwgdGhpcy5tb2RlKTtcclxuXHJcbiAgICB0aGlzLnRvb2xiYXIuYWRkRXZlbnRMaXN0ZW5lcigncHJldicsICgpID0+IHtcclxuICAgICAgY29uc3QgbmV3RGF0ZSA9IHRoaXMubW9kZSA9PT0gXCJtb250aFwiXHJcbiAgICAgICAgPyBuZXcgRGF0ZSh0aGlzLl9kYXRlLmdldEZ1bGxZZWFyKCksIHRoaXMuX2RhdGUuZ2V0TW9udGgoKSAtIDEsIDEpXHJcbiAgICAgICAgOiBuZXcgRGF0ZSh0aGlzLl9kYXRlLmdldEZ1bGxZZWFyKCksIHRoaXMuX2RhdGUuZ2V0TW9udGgoKSwgdGhpcy5fZGF0ZS5nZXREYXRlKCkgLSA3KTtcclxuICAgICAgdGhpcy5kYXRlID0gbmV3RGF0ZTtcclxuXHJcbiAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnZGF0ZS1jaGFuZ2VkJywge2RldGFpbDogdGhpcy5fZGF0ZX0pKTtcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICB0aGlzLnRvb2xiYXIuYWRkRXZlbnRMaXN0ZW5lcignbmV4dCcsICgpID0+IHtcclxuICAgICAgY29uc3QgbmV3RGF0ZSA9IHRoaXMubW9kZSA9PT0gXCJtb250aFwiXHJcbiAgICAgICAgPyBuZXcgRGF0ZSh0aGlzLl9kYXRlLmdldEZ1bGxZZWFyKCksIHRoaXMuX2RhdGUuZ2V0TW9udGgoKSArIDEsIDEpXHJcbiAgICAgICAgOiBuZXcgRGF0ZSh0aGlzLl9kYXRlLmdldEZ1bGxZZWFyKCksIHRoaXMuX2RhdGUuZ2V0TW9udGgoKSwgdGhpcy5fZGF0ZS5nZXREYXRlKCkgKyA3KTtcclxuICAgICAgdGhpcy5kYXRlID0gbmV3RGF0ZTtcclxuXHJcbiAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnZGF0ZS1jaGFuZ2VkJywge2RldGFpbDogdGhpcy5fZGF0ZX0pKTtcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICB0aGlzLnRvb2xiYXIuYWRkRXZlbnRMaXN0ZW5lcigndG9kYXknLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuZGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ2RhdGUtY2hhbmdlZCcsIHtkZXRhaWw6IHRoaXMuX2RhdGV9KSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLnRvb2xiYXIuYWRkRXZlbnRMaXN0ZW5lcignbW9udGgtdmlldycsICgpID0+IHtcclxuICAgICAgdGhpcy5tb2RlID0gXCJtb250aFwiO1xyXG4gICAgICB0aGlzLm1vbnRoR3JpZEVsLnN0eWxlLmRpc3BsYXkgPSAnZ3JpZCc7XHJcbiAgICAgIHRoaXMud2Vla0dyaWRFbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG5cclxuICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdtb2RlLWNoYW5nZWQnLCB7ZGV0YWlsOiB0aGlzLm1vZGV9KSk7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgdGhpcy50b29sYmFyLmFkZEV2ZW50TGlzdGVuZXIoJ3dlZWstdmlldycsICgpID0+IHtcclxuICAgICAgdGhpcy5tb2RlID0gXCJ3ZWVrXCI7XHJcbiAgICAgIHRoaXMubW9udGhHcmlkRWwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgdGhpcy53ZWVrR3JpZEVsLnN0eWxlLmRpc3BsYXkgPSAnZ3JpZCc7XHJcblxyXG4gICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ21vZGUtY2hhbmdlZCcsIHtkZXRhaWw6IHRoaXMubW9kZX0pKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIENyZWF0ZSBhbiBlbGVtZW50IGZvciB0aGUgbW9udGggZ3JpZC5cclxuICAgIHRoaXMubW9udGhHcmlkRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIHRoaXMubW9udGhHcmlkRWwuaWQgPSAnbW9udGgtZ3JpZCc7XHJcbiAgICB0aGlzLnJvb3RFbC5hcHBlbmRDaGlsZCh0aGlzLm1vbnRoR3JpZEVsKTtcclxuXHJcbiAgICAvLyBJbml0IHRoZSBtb250aCBncmlkIGNvbXBvbmVudCBpbiBpdC5cclxuICAgIHRoaXMubW9udGhHcmlkID0gbmV3IE1vbnRoR3JpZCh0aGlzLm1vbnRoR3JpZEVsLCB0aGlzLl9kYXRlLCB0aGlzLl9ldmVudHMpO1xyXG5cclxuICAgIC8vIENyZWF0ZSBhbiBlbGVtZW50IGZvciB0aGUgd2VlayBncmlkLlxyXG4gICAgdGhpcy53ZWVrR3JpZEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICB0aGlzLndlZWtHcmlkRWwuaWQgPSAnd2Vlay1ncmlkJztcclxuICAgIHRoaXMucm9vdEVsLmFwcGVuZENoaWxkKHRoaXMud2Vla0dyaWRFbCk7XHJcblxyXG4gICAgLy8gSW5pdCB0aGUgd2VlayBncmlkIGNvbXBvbmVudCBpbiBpdC5cclxuICAgIHRoaXMud2Vla0dyaWQgPSBuZXcgV2Vla0dyaWQodGhpcy53ZWVrR3JpZEVsLCB0aGlzLl9kYXRlLCB0aGlzLl9ldmVudHMpO1xyXG5cclxuICAgIC8vIENyZWF0ZSBhbiBlbGVtZW50IGZvciB0aGUgc2lkZWJhci5cclxuICAgIHRoaXMuc2lkZWJhckVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICB0aGlzLnNpZGViYXJFbC5pZCA9ICdzaWRlYmFyJztcclxuICAgIHRoaXMucm9vdEVsLmFwcGVuZENoaWxkKHRoaXMuc2lkZWJhckVsKTtcclxuXHJcbiAgICAvLyBJbml0IHRoZSBzaWRlYmFyIGNvbXBvbmVudCBpbiBpdC5cclxuICAgIHRoaXMuc2lkZWJhciA9IG5ldyBTaWRlYmFyKHRoaXMuc2lkZWJhckVsLCB0aGlzLl9kYXRlLCB0aGlzLl9ldmVudHMpO1xyXG5cclxuICAgIC8vIExpc3RlbiBmb3IgZGF5LWNsaWNrZWQgZXZlbnRzIGZyb20gdGhlIG1vbnRoIGFuZCB3ZWVrIGdyaWRzIHRvIHNob3cgdGhlIGZ1bGxcclxuICAgIC8vIGxpc3QgaW4gdGhlIHNpZGViYXIuXHJcbiAgICAvLyBAdHMtaWdub3JlXHJcbiAgICB0aGlzLm1vbnRoR3JpZC5hZGRFdmVudExpc3RlbmVyKCdkYXktY2xpY2tlZCcsIChlOiBDdXN0b21FdmVudCkgPT4ge1xyXG4gICAgICBjb25zdCBkYXRlID0gZS5kZXRhaWw7XHJcbiAgICAgIGNvbnN0IGV2ZW50cyA9IGdldEV2ZW50c0ZvckRheSh0aGlzLl9ldmVudHMsIGRhdGUpO1xyXG4gICAgICB0aGlzLnNpZGViYXIuZXZlbnRzID0gZXZlbnRzO1xyXG4gICAgfSk7XHJcbiAgICAvLyBAdHMtaWdub3JlXHJcbiAgICB0aGlzLndlZWtHcmlkLmFkZEV2ZW50TGlzdGVuZXIoJ2RheS1jbGlja2VkJywgKGU6IEN1c3RvbUV2ZW50KSA9PiB7XHJcbiAgICAgIGNvbnN0IGRhdGUgPSBlLmRldGFpbDtcclxuICAgICAgY29uc3QgZXZlbnRzID0gZ2V0RXZlbnRzRm9yRGF5KHRoaXMuX2V2ZW50cywgZGF0ZSk7XHJcbiAgICAgIHRoaXMuc2lkZWJhci5ldmVudHMgPSBldmVudHM7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBTdGFydCB3aXRoIHRvZGF5LlxyXG4gICAgdGhpcy5zaWRlYmFyLmV2ZW50cyA9IGdldEV2ZW50c0ZvckRheSh0aGlzLl9ldmVudHMsIG5ldyBEYXRlKCkpO1xyXG5cclxuICAgIC8vIFNob3cvaGlkZSB0aGUgcmlnaHQgbW9kZVxyXG4gICAgaWYgKHRoaXMubW9kZSA9PT0gXCJ3ZWVrXCIpIHtcclxuICAgICAgdGhpcy5tb250aEdyaWRFbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICB0aGlzLndlZWtHcmlkRWwuc3R5bGUuZGlzcGxheSA9ICdncmlkJztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMubW9udGhHcmlkRWwuc3R5bGUuZGlzcGxheSA9ICdncmlkJztcclxuICAgICAgdGhpcy53ZWVrR3JpZEVsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXQgZGF0ZShkYXRlOiBEYXRlKSB7XHJcbiAgICBjb25zb2xlLmxvZyhcIlNldHRpbmcgZGF0ZSB0b1wiLCBkYXRlKTtcclxuICAgIHRoaXMuX2RhdGUgPSBkYXRlO1xyXG4gICAgdGhpcy5tb250aEdyaWQuZGF0ZSA9IGRhdGU7XHJcbiAgICB0aGlzLndlZWtHcmlkLmRhdGUgPSBkYXRlO1xyXG4gICAgdGhpcy50b29sYmFyLmRhdGUgPSBkYXRlO1xyXG4gICAgdGhpcy5zaWRlYmFyLmV2ZW50cyA9IGdldEV2ZW50c0ZvckRheSh0aGlzLl9ldmVudHMsIHRoaXMuX2RhdGUpO1xyXG4gIH1cclxuXHJcbiAgc2V0IGV2ZW50cyhldmVudHM6IENhbGVuZGFyRXZlbnRbXSkge1xyXG4gICAgdGhpcy5fZXZlbnRzID0gZXZlbnRzO1xyXG4gICAgdGhpcy5tb250aEdyaWQuZXZlbnRzID0gZXZlbnRzO1xyXG4gICAgdGhpcy53ZWVrR3JpZC5ldmVudHMgPSBldmVudHM7XHJcbiAgICB0aGlzLnNpZGViYXIuZXZlbnRzID0gZ2V0RXZlbnRzRm9yRGF5KHRoaXMuX2V2ZW50cywgdGhpcy5fZGF0ZSk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBDYWxlbmRhckV2ZW50IHtcclxuICB0aXRsZTogc3RyaW5nO1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgZGF0ZTogRGF0ZTtcclxuICB0aW1lOiBzdHJpbmd8dW5kZWZpbmVkO1xyXG4gIGR1cmF0aW9uOiBudW1iZXJ8dW5kZWZpbmVkO1xyXG4gIHJlcGVhdDogc3RyaW5nfHVuZGVmaW5lZDtcclxuICBkZXNjcmlwdGlvbjogc3RyaW5nfHVuZGVmaW5lZDtcclxuICBjb2xvcjogc3RyaW5nfHVuZGVmaW5lZDtcclxuICBsb2NhdGlvbjogc3RyaW5nfHVuZGVmaW5lZDtcclxuICBtdWx0aURheXM6IHtzdGFydDogRGF0ZSwgZW5kOiBEYXRlfXxudWxsO1xyXG4gIHJzdnA6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgY29uc3RydWN0b3IodGl0bGU6IHN0cmluZywgaWQ6IHN0cmluZywgZGF0ZTogRGF0ZSkge1xyXG4gICAgdGhpcy50aXRsZSA9IHRpdGxlO1xyXG4gICAgdGhpcy5pZCA9IGlkO1xyXG4gICAgdGhpcy5kYXRlID0gZGF0ZTtcclxuICB9XHJcblxyXG4gIGFzT25lTGluZUhUTUwoaW5kZXhJbkdyaWQ6IG51bWJlcnx1bmRlZmluZWQgPSB1bmRlZmluZWQpOiBzdHJpbmcge1xyXG4gICAgY29uc3QgdGltZSA9IHRoaXMudGltZSA/IGA8c3BhbiBjbGFzcz1cInRpbWVcIj4ke3RoaXMudGltZX08L3NwYW4+YCA6ICcnO1xyXG5cclxuICAgIHJldHVybiBgXHJcbiAgICAgIDxsaSBpZD1cImlkLSR7dGhpcy5pZH1cIiBkYXRhLWluZGV4LWluLWdyaWQ9XCIke2luZGV4SW5HcmlkfVwiIGNsYXNzPVwiZXZlbnQkeyEhdGhpcy5tdWx0aURheXMgPyBcIiBtdWx0aS1kYXlcIiA6IFwiXCJ9JHt0aGlzLnJzdnAgPyBcIlwiIDogXCIgdW5jb25maXJtZWRcIn1cIiBzdHlsZT1cIi0tZXZlbnQtY29sb3I6ICR7dGhpcy5jb2xvcn07XCI+XHJcbiAgICAgICAgPGRpdj4ke3RpbWV9IDxzcGFuIGNsYXNzPVwidGl0bGVcIj4ke3RoaXMudGl0bGV9PC9zcGFuPjwvZGl2PlxyXG4gICAgICA8L2xpPlxyXG4gICAgYDtcclxuICB9XHJcblxyXG4gIGFzTWVkaXVtTGVuZ3RoSFRNTCgpOiBzdHJpbmcge1xyXG4gICAgY29uc3QgdGltZSA9IHRoaXMudGltZSA/IGA8c3BhbiBjbGFzcz1cInRpbWVcIj4ke3RoaXMudGltZX08L3NwYW4+YCA6ICcnO1xyXG5cclxuICAgIHJldHVybiBgXHJcbiAgICAgIDxsaSBpZD1cImlkLSR7dGhpcy5pZH1cIiBjbGFzcz1cImV2ZW50JHshIXRoaXMubXVsdGlEYXlzID8gXCIgbXVsdGktZGF5XCIgOiBcIlwifSR7dGhpcy5yc3ZwID8gXCJcIiA6IFwiIHVuY29uZmlybWVkXCJ9XCIgc3R5bGU9XCItLWV2ZW50LWNvbG9yOiAke3RoaXMuY29sb3J9O1wiPlxyXG4gICAgICAgIDxkaXY+JHt0aW1lfTwvZGl2PlxyXG4gICAgICAgIDxwIGNsYXNzPVwidGl0bGVcIj4ke3RoaXMudGl0bGV9PC9wPlxyXG4gICAgICAgIDxwPiR7dGhpcy5kZXNjcmlwdGlvbn08L3A+XHJcbiAgICAgIDwvbGk+XHJcbiAgICBgO1xyXG4gIH1cclxuXHJcbiAgYXNGdWxsSFRNTCgpOiBzdHJpbmcge1xyXG4gICAgbGV0IHdoZW4gPSBcIlwiO1xyXG4gICAgICBcclxuICAgIGlmICghdGhpcy5tdWx0aURheXMpIHtcclxuICAgICAgd2hlbiA9IHRoaXMuZGF0ZS50b0RhdGVTdHJpbmcoKTtcclxuICAgICAgaWYgKHRoaXMudGltZSkge1xyXG4gICAgICAgIHdoZW4gKz0gYCwgYXQgJHt0aGlzLnRpbWV9YDtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5yZXBlYXQpIHtcclxuICAgICAgICB3aGVuICs9IGAsICR7dGhpcy5yZXBlYXR9YDtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5kdXJhdGlvbikge1xyXG4gICAgICAgIHdoZW4gKz0gYCAoJHt0aGlzLmR1cmF0aW9ufSBtaW51dGVzKWA7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHdoZW4gPSBgRnJvbSAke3RoaXMubXVsdGlEYXlzLnN0YXJ0LnRvRGF0ZVN0cmluZygpfSB0byAke3RoaXMubXVsdGlEYXlzLmVuZC50b0RhdGVTdHJpbmcoKX1gO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBgXHJcbiAgICAgIDxsaSBjbGFzcz1cImV2ZW50JHt0aGlzLnJzdnAgPyBcIlwiIDogXCIgdW5jb25maXJtZWRcIn1cIiBzdHlsZT1cIi0tZXZlbnQtY29sb3I6ICR7dGhpcy5jb2xvcn07XCI+XHJcbiAgICAgICAgPGRpdj5cclxuICAgICAgICAgIDxoMj4ke3RoaXMudGl0bGV9PC9oMj5cclxuICAgICAgICAgIDxwIGNsYXNzPVwid2hlblwiPiR7d2hlbn08L3A+XHJcbiAgICAgICAgICAke3RoaXMubG9jYXRpb24gPyBgPHAgY2xhc3M9XCJ3aGVyZVwiPiR7dGhpcy5sb2NhdGlvbn08L3A+YCA6IFwiXCJ9XHJcbiAgICAgICAgICA8cCBjbGFzcz1cIndoYXRcIj4ke3RoaXMuZGVzY3JpcHRpb259PC9wPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2xpPlxyXG4gICAgYDtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgQ2FsZW5kYXJFdmVudCB9IGZyb20gXCIuL0NhbGVuZGFyRXZlbnRcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBFdmVudFBvcHVwIHtcclxuICBwcml2YXRlIHBvcHVwRWw6IEhUTUxFbGVtZW50fHVuZGVmaW5lZDtcclxuXHJcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBldmVudHM6IENhbGVuZGFyRXZlbnRbXSkge31cclxuXHJcbiAgc3RhcnQoKSB7XHJcbiAgICBpZiAoIXRoaXMucG9wdXBFbCkge1xyXG4gICAgICB0aGlzLnBvcHVwRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICB0aGlzLnBvcHVwRWwuY2xhc3NOYW1lID0gXCJwb3B1cFwiO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBhZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIChlOiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgIHRoaXMucG9wdXBFbC5jbGFzc0xpc3QucmVtb3ZlKFwidmlzaWJsZVwiKTtcclxuICAgICAgdGhpcy5wb3B1cEVsLnJlbW92ZSgpO1xyXG5cclxuICAgICAgY29uc3QgZXZlbnRFbCA9IChlLnRhcmdldCBhcyBIVE1MRWxlbWVudCkuY2xvc2VzdChcIiNtb250aC1ncmlkIC5ldmVudCwgI3dlZWstZ3JpZCAuZXZlbnRcIikgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgIGlmICghZXZlbnRFbCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgaWQgPSBldmVudEVsLmlkO1xyXG5cclxuICAgICAgaWYgKCFpZCB8fCAhaWQuc3RhcnRzV2l0aChcImlkLVwiKSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgbGV0IGV2ZW50SWQgPSBpZC5yZXBsYWNlKFwiaWQtXCIsIFwiXCIpO1xyXG5cclxuICAgICAgY29uc3QgZXZlbnQgPSB0aGlzLmV2ZW50cy5maW5kKGV2ZW50ID0+IGV2ZW50LmlkID09PSBldmVudElkKTsgICAgICBcclxuICAgICAgaWYgKCFldmVudCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiTm8gZXZlbnQgZm91bmQgZm9yIGlkXCIsIGV2ZW50SWQpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgZXZlbnRJbmRleEluR3JpZCA9IHBhcnNlSW50KGV2ZW50RWwuZGF0YXNldC5pbmRleEluR3JpZCEpO1xyXG5cclxuICAgICAgdGhpcy5wb3B1cEVsLnN0eWxlLnNldFByb3BlcnR5KFwiLS1ldmVudC1jb2xvclwiLCBldmVudC5jb2xvcik7XHJcbiAgICAgIHRoaXMucG9wdXBFbC5jbGFzc0xpc3QudG9nZ2xlKFwidmlzaWJsZVwiLCB0cnVlKTtcclxuICAgICAgdGhpcy5wb3B1cEVsLmNsYXNzTGlzdC50b2dnbGUoXCJ1bmNvbmZpcm1lZFwiLCAhZXZlbnQucnN2cCk7XHJcblxyXG4gICAgICBsZXQgd2hlbiA9IFwiXCI7XHJcbiAgICAgIFxyXG4gICAgICBpZiAoIWV2ZW50Lm11bHRpRGF5cykge1xyXG4gICAgICAgIHdoZW4gPSBldmVudC5kYXRlLnRvRGF0ZVN0cmluZygpO1xyXG4gICAgICAgIGlmIChldmVudC50aW1lKSB7XHJcbiAgICAgICAgICB3aGVuICs9IGAsIGF0ICR7ZXZlbnQudGltZX1gO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZXZlbnQucmVwZWF0KSB7XHJcbiAgICAgICAgICB3aGVuICs9IGAsICR7ZXZlbnQucmVwZWF0fWA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChldmVudC5kdXJhdGlvbikge1xyXG4gICAgICAgICAgd2hlbiArPSBgICgke2V2ZW50LmR1cmF0aW9ufSBtaW51dGVzKWA7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHdoZW4gPSBgRnJvbSAke2V2ZW50Lm11bHRpRGF5cy5zdGFydC50b0RhdGVTdHJpbmcoKX0gdG8gJHtldmVudC5tdWx0aURheXMuZW5kLnRvRGF0ZVN0cmluZygpfWA7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRoaXMucG9wdXBFbC5pbm5lckhUTUwgPSBgXHJcbiAgICAgICAgPGgyPiR7ZXZlbnQudGl0bGV9PC9oMj5cclxuICAgICAgICA8cCBjbGFzcz1cIndoZW5cIj4ke3doZW59PC9wPlxyXG4gICAgICAgICR7ZXZlbnQubG9jYXRpb24gPyBgPHAgY2xhc3M9XCJ3aGVyZVwiPiR7ZXZlbnQubG9jYXRpb259PC9wPmAgOiBcIlwifVxyXG4gICAgICAgIDxwIGNsYXNzPVwid2hhdFwiPiR7ZXZlbnQuZGVzY3JpcHRpb259PC9wPlxyXG4gICAgICBgO1xyXG5cclxuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLnBvcHVwRWwpO1xyXG5cclxuICAgICAgLy8gR2V0IHRoZSBjb29yZGluYXRlcyBvZiB0aGUgZXZlbnQgZWxlbWVudC5cclxuICAgICAgY29uc3QgcmVjdCA9IGV2ZW50RWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgIGNvbnN0IHRvcCA9IHJlY3QudG9wO1xyXG4gICAgICBjb25zdCByaWdodCA9IHJlY3QucmlnaHQ7XHJcbiAgICAgIGNvbnN0IGxlZnQgPSByZWN0LmxlZnQ7XHJcbiAgICAgIGNvbnN0IHdpZHRoID0gcmVjdC53aWR0aDtcclxuXHJcbiAgICAgIGlmIChldmVudEluZGV4SW5HcmlkID49IDI4KSB7XHJcbiAgICAgICAgLy8gVGhlIGV2ZW50IGlzIGluIHRoZSBsYXN0IDIgcm93cy4gU2hvdyB0aGUgcG9wdXAgYWJvdmUgaXQuXHJcbiAgICAgICAgdGhpcy5wb3B1cEVsLnN0eWxlLnRvcCA9IGAke3RvcCAtIHRoaXMucG9wdXBFbC5jbGllbnRIZWlnaHR9cHhgO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMucG9wdXBFbC5zdHlsZS50b3AgPSBgJHt0b3B9cHhgO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoZXZlbnRJbmRleEluR3JpZCA9PT0gNiB8fCBldmVudEluZGV4SW5HcmlkID09PSAxMyB8fCBldmVudEluZGV4SW5HcmlkID09PSAyMCB8fCBldmVudEluZGV4SW5HcmlkID09PSAyNyB8fCBldmVudEluZGV4SW5HcmlkID09PSAzNCkge1xyXG4gICAgICAgIC8vIFRoZSBldmVudCBpcyBsYXN0IGluIGEgcm93LCBzbyB3ZSB3YW50IHRvIHNob3cgdGhlIHBvcHVwIHRvIHRoZSBsZWZ0IG9mIGl0LlxyXG4gICAgICAgIHRoaXMucG9wdXBFbC5zdHlsZS5sZWZ0ID0gYCR7bGVmdCAtIHdpZHRofXB4YDtcclxuICAgICAgICB0aGlzLnBvcHVwRWwuY2xhc3NMaXN0LnRvZ2dsZShcImxlZnRcIiwgdHJ1ZSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5wb3B1cEVsLnN0eWxlLmxlZnQgPSBgJHtyaWdodH1weGA7XHJcbiAgICAgICAgdGhpcy5wb3B1cEVsLmNsYXNzTGlzdC50b2dnbGUoXCJsZWZ0XCIsIGZhbHNlKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBTdG9yZSB7XHJcbiAgYXN5bmMgZ2V0U3RvcmVkUHJlZnMoKTogUHJvbWlzZTx7bW9kZTogc3RyaW5nLCBpbml0RGF0ZTogRGF0ZXx1bmRlZmluZWR9PiB7XHJcbiAgICAvLyBGYWtlIHNvbWUgcmFuZG9tIHRpbWUgKHVwIHRvIDI1MG1zKSB0byBzaW11bGF0ZSBhbiBBUEkgY2FsbC5cclxuICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBNYXRoLnJhbmRvbSgpICogMjUwKSk7XHJcblxyXG4gICAgY29uc3QgbW9kZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzbG93LWNhbC1tb2RlJyk7XHJcbiAgICBjb25zdCBpbml0RGF0ZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzbG93LWNhbC1pbml0RGF0ZScpO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIG1vZGUsXHJcbiAgICAgIGluaXREYXRlOiBpbml0RGF0ZSA/IG5ldyBEYXRlKGluaXREYXRlKSA6IHVuZGVmaW5lZFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHNldCBtb2RlKG1vZGU6IHN0cmluZykge1xyXG4gICAgY29uc29sZS5sb2coXCJTdG9yaW5nIG1vZGUgcHJlZnNcIik7XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnc2xvdy1jYWwtbW9kZScsIG1vZGUpO1xyXG4gIH1cclxuXHJcbiAgc2V0IGluaXREYXRlKGRhdGU6IERhdGUpIHtcclxuICAgIGNvbnNvbGUubG9nKFwiU3RvcmluZyBkYXRlIHByZWZzXCIpO1xyXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Nsb3ctY2FsLWluaXREYXRlJywgZGF0ZS50b0lTT1N0cmluZygpKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgQXBwVUkgfSBmcm9tIFwiLi9BcHBVSVwiO1xyXG5pbXBvcnQgeyBnZXRBbGxFdmVudHMgfSBmcm9tIFwiLi9ldmVudHMtZmFjdG9yeVwiO1xyXG5pbXBvcnQgeyBFdmVudFBvcHVwIH0gZnJvbSBcIi4vRXZlbnRQb3B1cFwiO1xyXG5pbXBvcnQgeyBTdG9yZSB9IGZyb20gXCIuL1N0b3JlXCI7XHJcblxyXG5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBhc3luYyAoKSA9PiB7XHJcbiAgY29uc3Qgc3RvcmUgPSBuZXcgU3RvcmUoKTtcclxuICBjb25zdCBwcmVmcyA9IGF3YWl0IHN0b3JlLmdldFN0b3JlZFByZWZzKCk7XHJcblxyXG4gIC8vIFRoaXMgaXMgd2hhdCB0aGUgY2FsZW5kYXIgd2lsbCBiZSBjZW50ZXJlZCBhcm91bmQgb24gbG9hZC5cclxuICBjb25zdCBpbml0RGF0ZSA9IHByZWZzLmluaXREYXRlIHx8IG5ldyBEYXRlKCk7XHJcbiAgY29uc3QgaW5pdE1vZGUgPSBwcmVmcy5tb2RlIHx8IFwibW9udGhcIjtcclxuXHJcbiAgY29uc3QgYXBwRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXBwJyk7XHJcbiAgY29uc3QgYXBwVUkgPSBuZXcgQXBwVUkoYXBwRWwhLCBpbml0RGF0ZSwgaW5pdE1vZGUsIFtdKTtcclxuXHJcbiAgY29uc3QgZXZlbnRzID0gYXdhaXQgZ2V0QWxsRXZlbnRzKClcclxuXHJcbiAgY29uc29sZS5sb2coXCJSZWZyZXNoaW5nIGNhbGVuZGFyIHdpdGggZXZlbnRzXCIpO1xyXG4gIGFwcFVJLmV2ZW50cyA9IGV2ZW50cztcclxuXHJcbiAgY29uc29sZS5sb2coXCJJbml0aWFsaXppbmcgdGhlIHBvcHVwIHV0aWxcIik7XHJcbiAgY29uc3QgcG9wdXAgPSBuZXcgRXZlbnRQb3B1cChldmVudHMpO1xyXG4gIHBvcHVwLnN0YXJ0KCk7XHJcblxyXG4gIC8vIEB0cy1pZ25vcmVcclxuICBhcHBVSS5hZGRFdmVudExpc3RlbmVyKFwibW9kZS1jaGFuZ2VkXCIsIChlOiBDdXN0b21FdmVudCkgPT4ge1xyXG4gICAgc3RvcmUubW9kZSA9IGUuZGV0YWlsO1xyXG4gIH0pO1xyXG5cclxuICAvLyBAdHMtaWdub3JlXHJcbiAgYXBwVUkuYWRkRXZlbnRMaXN0ZW5lcihcImRhdGUtY2hhbmdlZFwiLCAoZTogQ3VzdG9tRXZlbnQpID0+IHtcclxuICAgIHN0b3JlLmluaXREYXRlID0gZS5kZXRhaWw7XHJcbiAgfSk7XHJcbn0pO1xyXG4iLCJpbXBvcnQgeyBDYWxlbmRhckV2ZW50IH0gZnJvbSBcIi4vQ2FsZW5kYXJFdmVudFwiO1xyXG5cclxuYXN5bmMgZnVuY3Rpb24gZmV0Y2hEYXRhKCkge1xyXG4gIC8vIFNpbXVsYXRlIGEgc2xvd2VyIEFQSSBlbmRwb2ludCBjYWxsLlxyXG4gIGNvbnNvbGUubG9nKFwiRmV0Y2hpbmcgY2FsZW5kYXIgZGF0YSAuLi5cIik7XHJcbiAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIE1hdGgucmFuZG9tKCkgKiA1MDApKTtcclxuICAvLyBBZGRpbmcgYSBjYWNoZSBidXN0ZXIgdG8gdGhlIFVSTCB0byBmb3JjZSBhIHJlbG9hZCBvZiB0aGUgZGF0YS5cclxuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAuL2RhdGEuanNvbj9jYWNoZUJ1c3Rlcj0ke0RhdGUubm93KCl9YCk7XHJcbiAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlT25lT3JNdWx0aXBsZUV2ZW50c0Zyb21EYXRhKGV2ZW50RGF0YTogYW55KTogQ2FsZW5kYXJFdmVudFtdIHsgIFxyXG4gIGNvbnN0IGRhdGVzOiBEYXRlW10gPSBbbmV3IERhdGUoZXZlbnREYXRhLnN0YXJ0RGF0ZSldO1xyXG4gIGxldCBtdWx0aURheXM6IHtzdGFydDogRGF0ZSwgZW5kOiBEYXRlfXxudWxsID0gbnVsbDtcclxuXHJcbiAgaWYgKGV2ZW50RGF0YS5yZXBlYXQpIHtcclxuICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKGV2ZW50RGF0YS5zdGFydERhdGUpO1xyXG5cclxuICAgIC8vIElmIHRoaXMgZXZlbnQgaXMgcmVwZWF0ZWQsIGl0IG11c3QgaGF2ZSBhbiBlbmQgZGF0ZS5cclxuICAgIGNvbnN0IGVuZERhdGUgPSBldmVudERhdGEuZW5kRGF0ZVxyXG4gICAgICAvLyBFaXRoZXIgdGhlIGVuZCBkYXRlIGlzIHNwZWNpZmllZC5cclxuICAgICAgPyBuZXcgRGF0ZShldmVudERhdGEuZW5kRGF0ZSlcclxuICAgICAgLy8gT3IgaXQncyA1IHllYXIgYWZ0ZXIgdGhlIHN0YXJ0IGRhdGUuXHJcbiAgICAgIDogbmV3IERhdGUoc3RhcnREYXRlLmdldFRpbWUoKSArIDUgKiAzNjUgKiAyNCAqIDYwICogNjAgKiAxMDAwKTtcclxuXHJcbiAgICBpZiAoZXZlbnREYXRhLnJlcGVhdCA9PT0gXCJkYWlseVwiKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiRXhwYW5kaW5nIGRhaWx5IGV2ZW50IC4uLlwiKTtcclxuICAgICAgY29uc3QgZGF5cyA9IChlbmREYXRlLmdldFRpbWUoKSAtIHN0YXJ0RGF0ZS5nZXRUaW1lKCkpIC8gKDEwMDAgKiA2MCAqIDYwICogMjQpO1xyXG4gICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBkYXlzOyBpKyspIHtcclxuICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoc3RhcnREYXRlLmdldFRpbWUoKSArIGkgKiAyNCAqIDYwICogNjAgKiAxMDAwKTtcclxuICAgICAgICAvLyBJZiBkYXRlIGlzIG9uIGEgd2VlayBlbmQsIHNraXAgaXQuXHJcbiAgICAgICAgaWYgKGRhdGUuZ2V0RGF5KCkgPT09IDAgfHwgZGF0ZS5nZXREYXkoKSA9PT0gNikge1xyXG4gICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkYXRlcy5wdXNoKGRhdGUpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKGV2ZW50RGF0YS5yZXBlYXQgPT09IFwid2Vla2x5XCIpIHtcclxuICAgICAgY29uc29sZS5sb2coXCJFeHBhbmRpbmcgd2Vla2x5IGV2ZW50IC4uLlwiKTtcclxuICAgICAgY29uc3Qgd2Vla3MgPSAoZW5kRGF0ZS5nZXRUaW1lKCkgLSBzdGFydERhdGUuZ2V0VGltZSgpKSAvICgxMDAwICogNjAgKiA2MCAqIDI0ICogNyk7XHJcbiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IHdlZWtzOyBpKyspIHtcclxuICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoc3RhcnREYXRlLmdldFRpbWUoKSArIGkgKiA3ICogMjQgKiA2MCAqIDYwICogMTAwMCk7XHJcbiAgICAgICAgZGF0ZXMucHVzaChkYXRlKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmIChldmVudERhdGEucmVwZWF0ID09PSBcIm1vbnRobHlcIikge1xyXG4gICAgICBjb25zb2xlLmxvZyhcIkV4cGFuZGluZyBtb250aGx5IGV2ZW50IC4uLlwiKTtcclxuICAgICAgY29uc3QgbW9udGhzID0gKGVuZERhdGUuZ2V0RnVsbFllYXIoKSAtIHN0YXJ0RGF0ZS5nZXRGdWxsWWVhcigpKSAqIDEyICsgKGVuZERhdGUuZ2V0TW9udGgoKSAtIHN0YXJ0RGF0ZS5nZXRNb250aCgpKTtcclxuICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gbW9udGhzOyBpKyspIHtcclxuICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoc3RhcnREYXRlLmdldFRpbWUoKSk7XHJcbiAgICAgICAgZGF0ZS5zZXRNb250aChkYXRlLmdldE1vbnRoKCkgKyBpKTtcclxuICAgICAgICBkYXRlcy5wdXNoKGRhdGUpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKGV2ZW50RGF0YS5yZXBlYXQgPT09IFwieWVhcmx5XCIpIHtcclxuICAgICAgY29uc29sZS5sb2coXCJFeHBhbmRpbmcgeWVhcmx5IGV2ZW50IC4uLlwiKTtcclxuICAgICAgY29uc3QgeWVhcnMgPSBlbmREYXRlLmdldEZ1bGxZZWFyKCkgLSBzdGFydERhdGUuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0geWVhcnM7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShzdGFydERhdGUuZ2V0VGltZSgpKTtcclxuICAgICAgICBkYXRlLnNldEZ1bGxZZWFyKGRhdGUuZ2V0RnVsbFllYXIoKSArIGkpO1xyXG4gICAgICAgIGRhdGVzLnB1c2goZGF0ZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9IGVsc2UgaWYgKGV2ZW50RGF0YS5lbmREYXRlKSB7XHJcbiAgICAvLyBJZiB0aGlzIGV2ZW50IGhhcyBhIHN0YXJ0IGFuZCBlbmQgZGF0ZSwgYnV0IGlzbid0IHJlcGVhdGVkLlxyXG4gICAgY29uc3Qgc3RhcnREYXRlID0gbmV3IERhdGUoZXZlbnREYXRhLnN0YXJ0RGF0ZSk7XHJcbiAgICBjb25zdCBlbmREYXRlID0gbmV3IERhdGUoZXZlbnREYXRhLmVuZERhdGUpO1xyXG4gICAgY29uc3QgZGF5cyA9IChlbmREYXRlLmdldFRpbWUoKSAtIHN0YXJ0RGF0ZS5nZXRUaW1lKCkpIC8gKDEwMDAgKiA2MCAqIDYwICogMjQpO1xyXG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gZGF5czsgaSsrKSB7XHJcbiAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShzdGFydERhdGUuZ2V0VGltZSgpICsgaSAqIDI0ICogNjAgKiA2MCAqIDEwMDApO1xyXG4gICAgICBkYXRlcy5wdXNoKGRhdGUpO1xyXG4gICAgfVxyXG4gICAgbXVsdGlEYXlzID0ge3N0YXJ0OiBzdGFydERhdGUsIGVuZDogZW5kRGF0ZX07XHJcbiAgfVxyXG5cclxuXHJcbiAgcmV0dXJuIGRhdGVzLm1hcCgoZGF0ZSwgaW5kZXgpID0+IHtcclxuICAgIGNvbnN0IGlkID0gZXZlbnREYXRhLmlkICsgKGluZGV4ID4gMCA/IGAtJHtpbmRleH1gIDogXCJcIik7XHJcbiAgICBjb25zdCBldmVudCA9IG5ldyBDYWxlbmRhckV2ZW50KGV2ZW50RGF0YS50aXRsZSwgaWQsIGRhdGUpO1xyXG5cclxuICAgIGV2ZW50Lm11bHRpRGF5cyA9IG11bHRpRGF5cztcclxuXHJcbiAgICBldmVudC5jb2xvciA9IGV2ZW50RGF0YS5jb2xvcjtcclxuICAgIGV2ZW50LnRpbWUgPSBldmVudERhdGEuc3RhcnRUaW1lO1xyXG4gICAgZXZlbnQuZHVyYXRpb24gPSBldmVudERhdGEuZHVyYXRpb247XHJcbiAgICBldmVudC5yZXBlYXQgPSBldmVudERhdGEucmVwZWF0O1xyXG4gICAgZXZlbnQubG9jYXRpb24gPSBldmVudERhdGEubG9jYXRpb247XHJcbiAgICBldmVudC5kZXNjcmlwdGlvbiA9IGV2ZW50RGF0YS5kZXNjcmlwdGlvbjtcclxuICAgIGV2ZW50LnJzdnAgPSBldmVudERhdGEucnN2cDtcclxuXHJcbiAgICByZXR1cm4gZXZlbnQ7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBbGxFdmVudHMoKTogUHJvbWlzZTxDYWxlbmRhckV2ZW50W10+IHtcclxuICBjb25zdCBkYXRhID0gYXdhaXQgZmV0Y2hEYXRhKCk7XHJcblxyXG4gIGNvbnNvbGUubG9nKFwiUHJvY2Vzc2luZyBldmVudHMgLi4uXCIpO1xyXG4gIHJldHVybiBkYXRhLmV2ZW50cy5tYXAoKGV2ZW50OiBhbnkpID0+IHtcclxuICAgIHJldHVybiBjcmVhdGVPbmVPck11bHRpcGxlRXZlbnRzRnJvbURhdGEoZXZlbnQpO1xyXG4gIH0pLmZsYXQoKTtcclxufVxyXG4iXSwibmFtZXMiOlsiYXNzZXJ0VHlwZSIsImNvbmRpdGlvbiIsIm1lc3NhZ2UiLCJhcmdzIiwiVHlwZUVycm9yIiwiZm9ybWF0IiwiaSIsInJlcGxhY2UiLCJhbnlUb1N0cmluZyIsIngiLCJTdHJpbmciLCJPYmplY3QiLCJwcm90b3R5cGUiLCJ0b1N0cmluZyIsImNhbGwiLCJHbG9iYWwiLCJ3aW5kb3ciLCJzZWxmIiwiZ2xvYmFsIiwiZ2xvYmFsVGhpcyIsInVuZGVmaW5lZCIsImN1cnJlbnRXYXJuSGFuZGxlciIsIldhcm5pbmciLCJjb25zdHJ1Y3RvciIsImNvZGUiLCJ0aGlzIiwid2FybiIsIl9hIiwic3RhY2siLCJFcnJvciIsImNvbnNvbGUiLCJfYiIsIkluaXRFdmVudFdhc0NhbGxlZFdoaWxlRGlzcGF0Y2hpbmciLCJGYWxzeVdhc0Fzc2lnbmVkVG9DYW5jZWxCdWJibGUiLCJUcnV0aHlXYXNBc3NpZ25lZFRvUmV0dXJuVmFsdWUiLCJOb25DYW5jZWxhYmxlRXZlbnRXYXNDYW5jZWxlZCIsIkNhbmNlbGVkSW5QYXNzaXZlTGlzdGVuZXIiLCJFdmVudExpc3RlbmVyV2FzRHVwbGljYXRlZCIsIk9wdGlvbldhc0lnbm9yZWQiLCJJbnZhbGlkRXZlbnRMaXN0ZW5lciIsIkV2ZW50IiwiTk9ORSIsIkNBUFRVUklOR19QSEFTRSIsIkFUX1RBUkdFVCIsIkJVQkJMSU5HX1BIQVNFIiwidHlwZSIsImV2ZW50SW5pdERpY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwiZW51bWVyYWJsZSIsIm9wdHMiLCJpbnRlcm5hbERhdGFNYXAiLCJzZXQiLCJidWJibGVzIiwiQm9vbGVhbiIsImNhbmNlbGFibGUiLCJjb21wb3NlZCIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJzdG9wUHJvcGFnYXRpb25GbGFnIiwic3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uRmxhZyIsImNhbmNlbGVkRmxhZyIsImluUGFzc2l2ZUxpc3RlbmVyRmxhZyIsImRpc3BhdGNoRmxhZyIsInRpbWVTdGFtcCIsIkRhdGUiLCJub3ciLCIkIiwic3JjRWxlbWVudCIsImNvbXBvc2VkUGF0aCIsImV2ZW50UGhhc2UiLCJzdG9wUHJvcGFnYXRpb24iLCJjYW5jZWxCdWJibGUiLCJzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24iLCJkYXRhIiwicmV0dXJuVmFsdWUiLCJzZXRDYW5jZWxGbGFnIiwicHJldmVudERlZmF1bHQiLCJkZWZhdWx0UHJldmVudGVkIiwiaXNUcnVzdGVkIiwiaW5pdEV2ZW50IiwiV2Vha01hcCIsImV2ZW50IiwibmFtZSIsInJldHYiLCJnZXQiLCJrZXlzIiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsImxlbmd0aCIsIkRPTUV4Y2VwdGlvbiIsInNldFByb3RvdHlwZU9mIiwiRXJyb3JDb2RlTWFwIiwiSU5ERVhfU0laRV9FUlIiLCJET01TVFJJTkdfU0laRV9FUlIiLCJISUVSQVJDSFlfUkVRVUVTVF9FUlIiLCJXUk9OR19ET0NVTUVOVF9FUlIiLCJJTlZBTElEX0NIQVJBQ1RFUl9FUlIiLCJOT19EQVRBX0FMTE9XRURfRVJSIiwiTk9fTU9ESUZJQ0FUSU9OX0FMTE9XRURfRVJSIiwiTk9UX0ZPVU5EX0VSUiIsIk5PVF9TVVBQT1JURURfRVJSIiwiSU5VU0VfQVRUUklCVVRFX0VSUiIsIklOVkFMSURfU1RBVEVfRVJSIiwiU1lOVEFYX0VSUiIsIklOVkFMSURfTU9ESUZJQ0FUSU9OX0VSUiIsIk5BTUVTUEFDRV9FUlIiLCJJTlZBTElEX0FDQ0VTU19FUlIiLCJWQUxJREFUSU9OX0VSUiIsIlRZUEVfTUlTTUFUQ0hfRVJSIiwiU0VDVVJJVFlfRVJSIiwiTkVUV09SS19FUlIiLCJBQk9SVF9FUlIiLCJVUkxfTUlTTUFUQ0hfRVJSIiwiUVVPVEFfRVhDRUVERURfRVJSIiwiVElNRU9VVF9FUlIiLCJJTlZBTElEX05PREVfVFlQRV9FUlIiLCJEQVRBX0NMT05FX0VSUiIsImRlZmluZUVycm9yQ29kZVByb3BlcnRpZXMiLCJvYmoiLCJrZXkiLCJjb25maWd1cmFibGUiLCJFdmVudFdyYXBwZXIiLCJ3cmFwIiwiZ2V0V3JhcHBlckNsYXNzT2YiLCJzdXBlciIsImludGVybmFsRGF0YU1hcCQxIiwib3JpZ2luYWwiLCJkZWZpbmVSZWRpcmVjdERlc2NyaXB0b3IiLCIkJDEiLCJ3cmFwcGVyQ2xhc3NDYWNoZSIsIm9yaWdpbmFsRXZlbnQiLCJnZXRQcm90b3R5cGVPZiIsIndyYXBwZXIiLCJCYXNlRXZlbnRXcmFwcGVyIiwib3JpZ2luYWxQcm90b3R5cGUiLCJDdXN0b21FdmVudFdyYXBwZXIiLCJkZWZpbmVXcmFwcGVyIiwiZCIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImJpbmQiLCJpc0NhcHR1cmUiLCJsaXN0ZW5lciIsImZsYWdzIiwiaXNQYXNzaXZlIiwiaXNPbmNlIiwiaXNSZW1vdmVkIiwiaW52b2tlQ2FsbGJhY2siLCJjYWxsYmFjayIsImhhbmRsZUV2ZW50IiwidGhyb3duRXJyb3IiLCJtYXliZUVycm9yIiwiZXJyb3IiLCJkaXNwYXRjaEV2ZW50IiwiRXJyb3JFdmVudCIsInByb2Nlc3MiLCJlbWl0IiwicmVwb3J0RXJyb3IiLCJmaW5kSW5kZXhPZkxpc3RlbmVyIiwibGlzdGVuZXJzIiwiY2FwdHVyZSIsInJlbW92ZUxpc3RlbmVyIiwibGlzdCIsImluZGV4IiwicmVtb3ZlTGlzdGVuZXJBdCIsImRpc2FibGVDb3ciLCJzZXRSZW1vdmVkIiwic2lnbmFsIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInNpZ25hbExpc3RlbmVyIiwiY293IiwiZmlsdGVyIiwiXyIsInNwbGljZSIsIkV2ZW50VGFyZ2V0IiwiaW50ZXJuYWxEYXRhTWFwJDIiLCJjcmVhdGUiLCJhZGRFdmVudExpc3RlbmVyIiwidHlwZTAiLCJjYWxsYmFjazAiLCJvcHRpb25zMCIsImxpc3RlbmVyTWFwIiwiJCQyIiwib25jZSIsInBhc3NpdmUiLCJvcHRpb25zIiwiYXNzZXJ0Q2FsbGJhY2siLCJub3JtYWxpemVBZGRPcHRpb25zIiwiYWJvcnRlZCIsImF0dHJDYWxsYmFjayIsImF0dHJMaXN0ZW5lciIsImVuc3VyZUxpc3RlbmVyTGlzdCIsImNyZWF0ZUxpc3RlbmVyIiwicHVzaCIsImFkZExpc3RlbmVyIiwid2FybkR1cGxpY2F0ZSIsIm5vcm1hbGl6ZU9wdGlvbnMiLCJlIiwiZXZlbnREYXRhIiwibXNnIiwiY2FwdHVyZVN0YWNrVHJhY2UiLCJkZWZpbmVQcm9wZXJ0aWVzIiwia2V5cyQxIiwiZ2V0RXZlbnRzRm9yRGF5IiwiZXZlbnRzIiwiZGF0ZSIsImdldEZ1bGxZZWFyIiwiZ2V0TW9udGgiLCJnZXREYXRlIiwic29ydCIsImEiLCJiIiwidGltZSIsInBhcnNlSW50IiwibXVsdGlEYXlzIiwiREFZUyIsIk1vbnRoR3JpZCIsImVsIiwiX2RhdGUiLCJyb290RWwiLCJfZXZlbnRzIiwicmVuZGVyIiwiaW5uZXJIVE1MIiwibW9udGgiLCJ5ZWFyIiwiZmlyc3REYXkiLCJsYXN0RGF5IiwiZmlyc3RXZWVrZGF5IiwiZ2V0RGF5IiwibGFzdFdlZWtkYXkiLCJkYXlzSW5Nb250aCIsImRheXNJbkxhc3RNb250aCIsImRheXMiLCJpbmRleEluR3JpZCIsImh0bWwiLCJyZW5kZXJEYXkiLCJpbnNlcnRBZGphY2VudEhUTUwiLCJsYXN0RWxlbWVudENoaWxkIiwiQ3VzdG9tRXZlbnQiLCJkZXRhaWwiLCJ1cGRhdGVOb3dNYXJrZXIiLCJkYXlOdW1iZXIiLCJjbGFzc05hbWUiLCJ0b0RhdGVTdHJpbmciLCJtYXAiLCJhc09uZUxpbmVIVE1MIiwiam9pbiIsInJhdGlvIiwiZ2V0SG91cnMiLCJnZXRNaW51dGVzIiwiZGF5RWwiLCJxdWVyeVNlbGVjdG9yIiwibWFya2VySGVpZ2h0Iiwib2Zmc2V0SGVpZ2h0Iiwic3R5bGUiLCJzZXRQcm9wZXJ0eSIsInNldFRpbWVvdXQiLCJNT05USFMiLCJUb29sYmFyIiwibW9kZSIsInNlbGVjdGVkTW9kZSIsImZvcm1hdE1vbnRoWWVhciIsImxvZyIsIlNpZGViYXIiLCJ1bCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImFwcGVuZENoaWxkIiwiYXNGdWxsSFRNTCIsIldlZWtHcmlkIiwiZGF5IiwiYXNNZWRpdW1MZW5ndGhIVE1MIiwiQXBwVUkiLCJ0b29sYmFyRWwiLCJpZCIsInRvb2xiYXIiLCJuZXdEYXRlIiwibW9udGhHcmlkRWwiLCJkaXNwbGF5Iiwid2Vla0dyaWRFbCIsIm1vbnRoR3JpZCIsIndlZWtHcmlkIiwic2lkZWJhckVsIiwic2lkZWJhciIsIkNhbGVuZGFyRXZlbnQiLCJ0aXRsZSIsInJzdnAiLCJjb2xvciIsImRlc2NyaXB0aW9uIiwid2hlbiIsInN0YXJ0IiwiZW5kIiwicmVwZWF0IiwiZHVyYXRpb24iLCJsb2NhdGlvbiIsIkV2ZW50UG9wdXAiLCJwb3B1cEVsIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiZXZlbnRFbCIsImNsb3Nlc3QiLCJzdGFydHNXaXRoIiwiZXZlbnRJZCIsImZpbmQiLCJldmVudEluZGV4SW5HcmlkIiwiZGF0YXNldCIsInRvZ2dsZSIsImJvZHkiLCJyZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwidG9wIiwicmlnaHQiLCJsZWZ0Iiwid2lkdGgiLCJjbGllbnRIZWlnaHQiLCJTdG9yZSIsImdldFN0b3JlZFByZWZzIiwiUHJvbWlzZSIsInJlc29sdmUiLCJNYXRoIiwicmFuZG9tIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImluaXREYXRlIiwic2V0SXRlbSIsInRvSVNPU3RyaW5nIiwic3RvcmUiLCJwcmVmcyIsImluaXRNb2RlIiwiYXBwRWwiLCJnZXRFbGVtZW50QnlJZCIsImFwcFVJIiwicmVzcG9uc2UiLCJmZXRjaCIsImpzb24iLCJmZXRjaERhdGEiLCJkYXRlcyIsInN0YXJ0RGF0ZSIsImVuZERhdGUiLCJnZXRUaW1lIiwid2Vla3MiLCJtb250aHMiLCJzZXRNb250aCIsInllYXJzIiwic2V0RnVsbFllYXIiLCJzdGFydFRpbWUiLCJjcmVhdGVPbmVPck11bHRpcGxlRXZlbnRzRnJvbURhdGEiLCJmbGF0IiwiZ2V0QWxsRXZlbnRzIl0sInNvdXJjZVJvb3QiOiIifQ==